var BEMHTML;!function(t){function e(e){var i={},o=function(e,i){return function(n){if("object"==typeof i&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this,o.bemhtml=n()}}(function(){return function t(e,i,o){function r(a,c){if(!i[a]){if(!e[a]){var u="function"==typeof n&&n;if(!c&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return r(n?n:t)},h,h.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){function i(t){this.bemxjst=t,this.jsClass=null,this.tag=new r(this,"tag"),this.attrs=new r(this,"attrs"),this.js=new r(this,"js"),this.mix=new r(this,"mix"),this.bem=new r(this,"bem"),this.cls=new r(this,"cls"),s.apply(this,arguments)}var o=t("inherits"),r=t("../bemxjst/match").Match,s=t("../bemxjst/entity").Entity;o(i,s),n.Entity=i,i.prototype.init=function(t,e){this.block=t,this.elem=e,this.jsClass=this.bemxjst.classBuilder.build(this.block,this.elem)},i.prototype._initRest=function(t){"default"===t?this.rest[t]=this.def:"tag"===t||"attrs"===t||"js"===t||"mix"===t||"bem"===t||"cls"===t||"content"===t?this.rest[t]=this[t]:this.rest.hasOwnProperty(t)||(this.rest[t]=new r(this,t))},i.prototype.defaultBody=function(t){return this.bemxjst.render(t,this,this.tag.exec(t),t.ctx.js!==!1?this.js.exec(t):void 0,this.bem.exec(t),this.cls.exec(t),this.mix.exec(t),this.attrs.exec(t),this.content.exec(t))}},{"../bemxjst/entity":5,"../bemxjst/match":8,inherits:11}],2:[function(t,e,n){function i(t){a.apply(this,arguments),this._shortTagCloser="undefined"!=typeof t.xhtml&&t.xhtml?"/>":">",this._elemJsInstances=t.elemJsInstances,this._omitOptionalEndTags=t.omitOptionalEndTags,this._unquotedAttrs="undefined"!=typeof t.unquotedAttrs&&t.unquotedAttrs}var o=t("inherits"),r=t("../bemxjst/utils"),s=t("./entity").Entity,a=t("../bemxjst");o(i,a),e.exports=i,i.prototype.Entity=s,i.prototype.runMany=function(t){var e="",n=this.context,i=n.position,o=n._notNewList;if(o?n._listLength+=t.length-1:(n.position=0,n._listLength=t.length),n._notNewList=!0,this.canFlush)for(var r=0;r<t.length;r++)e+=n._flush(this._run(t[r]));else for(var r=0;r<t.length;r++)e+=this._run(t[r]);return o||(n.position=i),e},i.prototype.render=function(t,e,n,i,o,s,a,c,u){var l=t.ctx;if(void 0===n)n="div";else if(!n)return u||0===u?this._run(u):"";var h="<"+n,d=l.js;d!==!1&&(i===!0&&(i={}),i&&i!==l.js?d!==!0&&(i=r.extend(d,i)):d===!0&&(i={}));var p;i&&(p={},p[e.jsClass]=i);var f="undefined"!=typeof o?o:e.block||e.elem;f=!!f;var m=p&&(this._elemJsInstances?e.block||e.elem:e.block&&!e.elem);if(!f&&!s)return this.renderClose(h,t,n,c,f,l,u);h+=" class=";var g="";if(f){if(g+=e.jsClass,g+=this.buildModsClasses(e.block,e.elem,e.elem?t.elemMods:t.mods),l.mix&&a&&a!==l.mix&&(a=[].concat(a,l.mix)),a){var _=this.renderMix(e,a,p,m);g+=_.out,p=_.jsParams,m=_.addJSInitClass}s&&(g+=" "+("string"==typeof s?r.attrEscape(s).trim():s))}else g+="string"==typeof s?r.attrEscape(s).trim():s;return m&&(g+=" i-bem"),h+=this._unquotedAttrs&&r.isUnquotedAttr(g)?g:'"'+g+'"',f&&p&&(h+=" data-bem='"+r.jsAttrEscape(JSON.stringify(p))+"'"),this.renderClose(h,t,n,c,f,l,u)};var c={html:1,head:1,body:1,p:1,ul:1,ol:1,li:1,dt:1,dd:1,colgroup:1,thead:1,tbody:1,tfoot:1,tr:1,th:1,td:1,option:1,rb:1,rt:1,rtc:1,rp:1,optgroup:1};i.prototype.renderClose=function(t,e,n,i,o,s,a){var u=t;return u+=this.renderAttrs(i,s),r.isShortTag(n)?(u+=this._shortTagCloser,this.canFlush&&(u=e._flush(u))):(u+=">",this.canFlush&&(u=e._flush(u)),(a||0===a)&&(u+=this.renderContent(a,o)),this._omitOptionalEndTags&&c.hasOwnProperty(n)||(u+="</"+n+">")),this.canFlush&&(u=e._flush(u)),u},i.prototype.renderAttrs=function(t,e){var n="";if(r.isObj(t)||r.isObj(e.attrs)){t=r.extend(t,e.attrs);for(var i in t){var o=t[i];if(void 0!==o&&o!==!1&&null!==o)if(o===!0)n+=" "+i;else{var s=r.isSimple(o)?o:this.context.reapply(o);n+=" "+i+"=",n+=this._unquotedAttrs&&r.isUnquotedAttr(s)?s:'"'+r.attrEscape(s)+'"'}}}return n},i.prototype.renderMix=function(t,e,n,i){var o={},r=this.context,s=n,a=i;o[t.jsClass]=!0,Array.isArray(e)||(e=[e]);for(var c=this.classBuilder,u="",l=0;l<e.length;l++){var h=e[l];if(h){"string"==typeof h&&(h={block:h,elem:void 0});var d=!1;h.elem?d=h.elem!==t.elem&&h.elem!==r.elem||h.block&&h.block!==t.block:h.block&&(d=!(h.block===t.block&&h.mods)||h.mods&&t.elem);var p=h.block||h._block||r.block,f=h.elem||h._elem||r.elem,m=c.build(p,f),g=h.elem||h._elem||(h.block?void 0:r.elem);if(d&&(u+=" "+c.build(p,g)),u+=this.buildModsClasses(p,g,h.elem||!h.block&&(h._elem||r.elem)?h.elemMods:h.mods),h.js&&(s||(s={}),s[c.build(p,h.elem)]=h.js===!0?{}:h.js,a||(a=p&&!h.elem)),d&&!o[m]){o[m]=!0;var _=this.entities[m];if(_){var y=r.block,v=r.elem,b=_.mix.exec(r);if(r.elem=v,r.block=y,b)for(var x=0;x<b.length;x++){var k=b[x];if(k&&(!k.block&&!k.elem||!o[c.build(k.block,k.elem)])){if(k.block)continue;k._block=p,k._elem=f,e=e.slice(0,l+1).concat(k,e.slice(l+1))}}}}}}return{out:u,jsParams:s,addJSInitClass:a}},i.prototype.buildModsClasses=function(t,e,n){if(!n)return"";var i,o="";for(i in n)if(n.hasOwnProperty(i)&&""!==i){var r=n[i];if(r||0===r){"boolean"!=typeof r&&(r+="");var s=this.classBuilder;o+=" "+(e?s.buildElemClass(t,e,i,r):s.buildBlockClass(t,i,r))}}return o}},{"../bemxjst":7,"../bemxjst/utils":10,"./entity":1,inherits:11}],3:[function(t,e,n){function i(t){this.modDelim=t.mod||"_",this.elemDelim=t.elem||"__"}n.ClassBuilder=i,i.prototype.build=function(t,e){return e?t+this.elemDelim+e:t},i.prototype.buildModPostfix=function(t,e){var n=this.modDelim+t;return e!==!0&&(n+=this.modDelim+e),n},i.prototype.buildBlockClass=function(t,e,n){var i=t;return n&&(i+=this.buildModPostfix(e,n)),i},i.prototype.buildElemClass=function(t,e,n,i){return this.buildBlockClass(t)+this.elemDelim+e+this.buildModPostfix(n,i)},i.prototype.split=function(t){return t.split(this.elemDelim,2)}},{}],4:[function(t,e,n){function i(t){this._bemxjst=t,this.ctx=null,this.block="",this._currBlock="",this.elem=null,this.mods={},this.elemMods={},this.position=0,this._listLength=0,this._notNewList=!1,this.escapeContent=t.options.escapeContent===!0}var o=t("./utils");n.Context=i,i.prototype._flush=null,i.prototype.isSimple=o.isSimple,i.prototype.isShortTag=o.isShortTag,i.prototype.extend=o.extend,i.prototype.identify=o.identify,i.prototype.xmlEscape=o.xmlEscape,i.prototype.attrEscape=o.attrEscape,i.prototype.jsAttrEscape=o.jsAttrEscape,i.prototype.isFirst=function(){return 1===this.position},i.prototype.isLast=function(){return this.position===this._listLength},i.prototype.generateId=function(){return o.identify(this.ctx)},i.prototype.reapply=function(t){return this._bemxjst.run(t)}},{"./utils":10}],5:[function(t,e,n){function i(t,e,n,i){this.bemxjst=t,this.block=null,this.elem=null,this.options={},this.canFlush=!0,this.def=new s(this),this.content=new s(this,"content"),this.rest={},this.init(e,n),this.initModes(i)}function o(){return this.ctx.content}var r=t("./utils"),s=t("./match").Match,a=t("./tree"),c=a.Template,u=a.PropertyMatch,l=a.CompilerOptions;n.Entity=i,i.prototype.init=function(t,e){this.block=t,this.elem=e},i.prototype.initModes=function(t){for(var e=0;e<t.length;e++){for(var n=t[e],i=n.predicates.length-1;i>=0;i--){var o=n.predicates[i];if(o instanceof u&&"_mode"===o.key){n.predicates.splice(i,1),this._initRest(o.value),this.rest[o.value].push(n);break}}i===-1&&this.def.push(n);for(var i=n.predicates.length-1;i>=0;i--){var o=n.predicates[i];o instanceof l&&(this.options=r.extend(this.options,o.options))}}},i.prototype.prepend=function(t){for(var e=Object.keys(this.rest),n=0;n<e.length;n++){var i=e[n];t.rest[i]&&this.rest[i].prepend(t.rest[i])}e=Object.keys(t.rest);for(var n=0;n<e.length;n++){var i=e[n];this.rest[i]||(this._initRest(i),this.rest[i].prepend(t.rest[i]))}},i.prototype.run=function(t){return 0!==this.def.count?this.def.exec(t):this.defaultBody(t)},i.prototype.setDefaults=function(){if(0!==this.content.count&&this.content.push(new c([],o)),0!==this.def.count){this.canFlush=this.options.flush||!1;var t=this;this.def.push(new c([],function(){return t.defaultBody(this)}))}}},{"./match":8,"./tree":9,"./utils":10}],6:[function(t,e,n){function i(t,e){this.name="BEMXJSTError",this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,e||this.constructor):this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,n.BEMXJSTError=i},{}],7:[function(t,e,n){function i(t){this.options=t||{},this.entities=null,this.defaultEnt=null,this.tree=null,this.match=null,this.contextConstructor=function(t){c.call(this,t)},o(this.contextConstructor,c),this.context=null,this.classBuilder=new u(this.options.naming||{}),this.depth=0,this.canFlush=!1,this.oninit=null,this.defaultEnt=new this.Entity(this,"","",[]),this.defaultElemEnt=new this.Entity(this,"","",[])}var o=t("inherits"),r=t("./tree").Tree,s=t("./tree").PropertyMatch,a=t("./tree").AddMatch,c=t("./context").Context,u=t("./class-builder").ClassBuilder,l=t("./utils");e.exports=i,i.prototype.locals=r.methods.concat("local","applyCtx","applyNext","apply"),i.prototype.compile=function(t){function e(){return s._run(s.context.ctx)}function n(t,n){return n?s.local(n,function(){return s.local({ctx:t},e)}):s.local({ctx:t},e)}function i(t,e){return s.applyMode(t,e)}function o(t){return function(e){return s.local(t,e)}}var s=this,a=new r({refs:{applyCtx:n,local:o,apply:i}}),c=this.recompileInput(t),u=a.build(c,[o,n,function t(e){return e?s.local(e,t):s.applyNext()},i]);this.tree&&(u={templates:u.templates.concat(this.tree.templates),oninit:this.tree.oninit.concat(u.oninit)}),this.tree=u;var l=this.groupEntities(u.templates);l=this.transformEntities(l),this.entities=l,this.oninit=u.oninit},i.prototype.recompileInput=function(t){var e=i.prototype.locals;if("function"==typeof t&&t.length===e.length)return t;var n=t.toString();return n=n.replace(/^function[^{]+{|}$/g,""),n=new Function(e.join(", "),n)},i.prototype.groupEntities=function(e){for(var n={},i=0;i<e.length;i++){var o,r=e[i].clone(),c=null;o=void 0;for(var u=0;u<r.predicates.length;u++){var l=r.predicates[u];if(l instanceof s||l instanceof a){if("block"===l.key)c=l.value;else{if("elem"!==l.key)continue;o=l.value}r.predicates.splice(u,1),u--}}if(null===c){for(var h="block(…) subpredicate is not found.\n    See template with subpredicates:\n     * ",u=0;u<r.predicates.length;u++){var l=r.predicates[u];0!==u&&(h+="\n     * "),h+="_mode"===l.key?l.value+"()":Array.isArray(l.key)?l.key[0].replace("mods","mod").replace("elemMods","elemMod")+"('"+l.key[1]+"', '"+l.value+"')":l.value&&l.key?l.key+"('"+l.value+"')":"match(…)"}throw h+="\n    And template body: \n    ("+("function"==typeof r.body?r.body:JSON.stringify(r.body))+")","undefined"==typeof BEMXJSTError&&(BEMXJSTError=t("./error").BEMXJSTError),new BEMXJSTError(h)}var d=this.classBuilder.build(c,o);n[d]||(n[d]=[]),n[d].push(r)}return n},i.prototype.transformEntities=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],r=this.classBuilder.split(o),s=r[0],a=r[1];"*"===a&&e.push(s),t[o]=new this.Entity(this,s,a,t[o])}if(t.hasOwnProperty("*")){for(var c=t["*"],i=0;i<n.length;i++){var o=n[i];"*"!==o&&t[o].prepend(c)}this.defaultEnt.prepend(c),this.defaultElemEnt.prepend(c)}for(var i=0;i<e.length;i++){for(var s=e[i],u=this.classBuilder.build(s,"*"),c=t[u],i=0;i<n.length;i++){var o=n[i];if(o!==u){var l=t[o];l.block===s&&void 0!==l.elem&&t[o].prepend(c)}}this.defaultElemEnt.prepend(c)}for(var i=0;i<n.length;i++){var o=n[i];t[o].setDefaults(),this.defaultEnt.setDefaults(),this.defaultElemEnt.setDefaults()}return t},i.prototype._run=function(t){return void 0===t||""===t||null===t?this.runEmpty():Array.isArray(t)?this.runMany(t):"string"!=typeof t.html||t.tag||"undefined"!=typeof t.block||"undefined"!=typeof t.elem||"undefined"!=typeof t.cls||"undefined"!=typeof t.attrs?l.isSimple(t)?this.runSimple(t):this.runOne(t):this.runUnescaped(t)},i.prototype.run=function(t){var e=this.match,n=this.context;this.match=null,this.context=new this.contextConstructor(this),this.canFlush=null!==this.context._flush,this.depth=0;var i=this._run(t);return this.canFlush&&(i=this.context._flush(i)),this.match=e,this.context=n,i},i.prototype.runEmpty=function(){return this.context._listLength--,""},i.prototype.runUnescaped=function(t){return this.context._listLength--,""+t.html},i.prototype.runSimple=function(t){return this.context._listLength--,!t&&0!==t||t===!0?"":"string"==typeof t&&this.context.escapeContent?l.xmlEscape(t):t},i.prototype.runOne=function(t){var e=this.context,n=e.ctx,i=e.block,o=e._currBlock,r=e.elem,s=e.mods,a=e.elemMods;t.block||t.elem?e._currBlock="":e._currBlock=e.block,e.ctx=t,t.block?(e.block=t.block,t.mods?e.mods=t.mods:t.block===i&&t.elem||(e.mods={})):t.elem?o&&(e.block=o):e.block="",e.elem=t.elem,t.elemMods?e.elemMods=t.elemMods:e.elemMods={};var c=e.block||"",u=e.elem;c||u?e.position++:e._listLength--,this.depth++;var l=!1,h=this.entities[this.classBuilder.build(c,u)];h?this.canFlush&&!h.canFlush&&(l=!0,this.canFlush=!1):(h=this.defaultEnt,void 0!==u&&(h=this.defaultElemEnt),h.init(c,u));var d=this.options.production===!0?this.tryRun(e,h):h.run(e);return e.ctx=n,e.block=i,e.elem=r,e.mods=s,e.elemMods=a,e._currBlock=o,this.depth--,l&&(this.canFlush=!0),d},i.prototype.tryRun=function(t,e){try{return e.run(t)}catch(e){return console.error("BEMXJST ERROR: cannot render "+["block "+t.block,"elem "+t.elem,"mods "+JSON.stringify(t.mods),"elemMods "+JSON.stringify(t.elemMods)].join(", "),e),""}},i.prototype.renderContent=function(t,e){var n=this.context,i=n.position,o=n._listLength,r=n._notNewList;n._notNewList=!1,e&&(n.position=0,n._listLength=1);var s=this._run(t);return n.position=i,n._listLength=o,n._notNewList=r,s},i.prototype.local=function(t,e){for(var n=Object.keys(t),i=[],o=0;o<n.length;o++){for(var r=n[o],s=r.split("."),a=this.context,c=0;c<s.length-1;c++)a=a[s[c]];i.push({parts:s,value:a[s[c]]}),a[s[c]]=t[r]}for(var u=e.call(this.context),o=0;o<i.length;o++){for(var s=i[o].parts,a=this.context,c=0;c<s.length-1;c++)a=a[s[c]];a[s[c]]=i[o].value}return u},i.prototype.applyNext=function(){return this.match.exec(this.context)},i.prototype.applyMode=function(t,e){var n=this.match.entity.rest[t];if(!n)return this.context.ctx[t];if(!e)return n.exec(this.context);var i=this,o=function(){return n.exec(i.context)};return this.local(e,o)},i.prototype.exportApply=function(t){var e=this;t.apply=function(t){return e.run(t)},t.compile=function(t){return e.compile(t)},t.BEMContext=e.contextConstructor;for(var n=0;n<e.oninit.length;n++){var i=e.oninit[n];i(t,{BEMContext:t.BEMContext})}}},{"./class-builder":3,"./context":4,"./error":6,"./tree":9,"./utils":10,inherits:11}],8:[function(t,e,n){function i(t,e){this.template=t,this.keys=e.key,this.value=e.value}function o(t,e){this.template=t,this.body=e.body}function r(t){this.template=t,this.wrap=null}function s(t){this.template=t,this.wrap=null}function a(t,e){this.template=t,this.key=e.key,this.value=e.value}function c(t,e){this.mode=t,this.predicates=new Array(e.predicates.length),this.body=e.body;for(var n=[],c=0,u=0;c<this.predicates.length;c++,u++){var l=e.predicates[c];l instanceof h?this.predicates[u]=new i(this,l):l instanceof f?(u--,n.push(new s(this))):l instanceof d?this.predicates[c]=new a(this,l):l instanceof m?this.predicates[u]=new o(this,l):l instanceof p?(u--,n.push(new r(this))):u--}for(var c=0;c<n.length;c++,u++)this.predicates[u]=n[c];this.predicates.length!==u&&(this.predicates.length=u)}function u(t,e){this.entity=t,this.modeName=e,this.bemxjst=this.entity.bemxjst,this.templates=[],this.mask=[0],this.maskSize=0,this.maskOffset=0,this.count=0,this.depth=-1,this.thrownError=null}var l=t("./tree"),h=l.PropertyMatch,d=l.AddMatch,p=l.WrapMatch,f=l.ExtendMatch,m=l.CustomMatch;i.prototype.exec=function(t){for(var e=t,n=0;n<this.keys.length-1;n++)if(e=e[this.keys[n]],!e)return!1;return e=e[this.keys[n]],this.value===!0?void 0!==e&&""!==e&&e!==!1&&null!==e:String(e)===this.value},o.prototype.exec=function(t){return this.body.call(t,t,t.ctx)},r.prototype.exec=function(t){var e=this.wrap!==t.ctx;return this.wrap=t.ctx,e},s.prototype.exec=function(t){var e=this.ext!==t.ctx;return this.ext=t.ctx,e},a.prototype.exec=function(t){return t[this.key]===this.value},n.MatchTemplate=c,n.Match=u,u.prototype.prepend=function(t){for(this.templates=t.templates.concat(this.templates),this.count+=t.count;Math.ceil(this.count/31)>this.mask.length;)this.mask.push(0);this.maskSize=this.mask.length},u.prototype.push=function(t){this.templates.push(new c(this,t)),this.count++,Math.ceil(this.count/31)>this.mask.length&&this.mask.push(0),this.maskSize=this.mask.length},u.prototype.tryCatch=function(t,e){try{return t.call(e,e,e.ctx)}catch(t){this.thrownError=t}},u.prototype.exec=function(t){for(var e,n=this.checkDepth(),i=this.maskOffset,o=this.mask[i],r=1,s=0;s<this.count;s++){if(0===(o&r)){e=this.templates[s];for(var a=0;a<e.predicates.length;a++){var c=e.predicates[a];if(!c.exec(t))break}if(a===e.predicates.length)break}1073741824===r?(i++,o=this.mask[i],r=1):r<<=1}if(s===this.count)return t.ctx[this.modeName];var u=o,l=this.bemxjst.match;this.mask[i]|=r,this.bemxjst.match=this,this.thrownError=null;var h;h="function"==typeof e.body?this.tryCatch(e.body,t):e.body,this.mask[i]=u,this.bemxjst.match=l,this.restoreDepth(n);var d=this.thrownError;if(null!==d)throw this.thrownError=null,d;return h},u.prototype.checkDepth=function(){if(this.depth===-1)return this.depth=this.bemxjst.depth,-1;if(this.bemxjst.depth===this.depth)return this.depth;var t=this.depth;for(this.depth=this.bemxjst.depth,this.maskOffset+=this.maskSize;this.mask.length<this.maskOffset+this.maskSize;)this.mask.push(0);return t},u.prototype.restoreDepth=function(t){t!==-1&&t!==this.depth&&(this.maskOffset-=this.maskSize),this.depth=t}},{"./tree":9}],9:[function(t,e,n){function i(t,e){this.predicates=t,this.body=e}function o(){}function r(t,e){this.conditions=[],this.children=[];for(var n=e.length-1;n>=0;n--){var i=e[n];i instanceof o?this.conditions.push(i):i===t.boundBody?this.children[n]=t.queue.pop():this.children[n]=i}}function s(t){o.call(this),this.refs=t}function a(t){o.call(this),this.refs=t}function c(t){o.call(this),this.refs=t}function u(t,e){o.call(this),this.mode=t,this.refs=e}function l(t){o.call(this),this.options=t}function h(t,e){o.call(this),this.key=t,this.value=e}function d(t){o.call(this),this.body=t}function p(t){this.options=t,this.refs=this.options.refs,this.boundBody=this.body.bind(this);for(var e=this.methods("body"),n=0;n<e.length;n++){var i=e[n];this.boundBody[p.methods[n]]=i}this.queue=[],this.templates=[],this.initializers=[]}function f(t,e,n){var i=t[n],o=t.boundBody;return"body"!==e?"replace"===n||"extend"===n||"wrap"===n?function(){return i.apply(t,arguments)}:function(){return i.apply(t,arguments),o}:function(){var e=i.apply(t,arguments),r=t.queue.pop(),s=t.queue[t.queue.length-1];return s.conditions=s.conditions.concat(r.conditions),s.children=s.children.concat(r.children),"replace"===n||"extend"===n||"wrap"===n?e:o}}var m=t("minimalistic-assert"),g=t("inherits");n.Template=i,i.prototype.wrap=function(){for(var t=this.body,e=0;e<this.predicates.length;e++){var n=this.predicates[e];t=n.wrapBody(t)}this.body=t},i.prototype.clone=function(){return new i(this.predicates.slice(),this.body)},n.MatchBase=o,o.prototype.wrapBody=function(t){return t},g(s,o),n.WrapMatch=s,s.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(a,o),n.ReplaceMatch=a,a.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(c,o),n.ExtendMatch=c,c.prototype.wrapBody=function(t){var e=this.refs.applyCtx,n=this.refs.local;return"function"!=typeof t?function(){for(var i={},o=Object.keys(t),r=0;r<o.length;r++)i[o[r]]=t[o[r]];return n(i)(function(){return e(this.ctx)})}:function(){for(var i={},o=t.call(this,this,this.ctx),r=Object.keys(o),s=0;s<r.length;s++)i[r[s]]=o[r[s]];return n(i)(function(){return e(this.ctx)})}},g(u,o),n.AddMatch=u,u.prototype.wrapBody=function(t){return this[this.mode+"WrapBody"](t)},u.prototype.appendContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,i=e.apply;return"function"!=typeof t?function(){return[i("content"),t]}:function(){return[i("content"),n(t.call(this,this,this.ctx))]}},u.prototype.prependContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,i=e.apply;return"function"!=typeof t?function(){return[t,i("content")]}:function(){return[n(t.call(this,this,this.ctx)),i("content")]}},g(l,o),n.CompilerOptions=l,g(h,o),n.PropertyMatch=h,g(d,o),n.CustomMatch=d,n.Tree=p,p.methods=["match","wrap","block","elem","mode","mod","elemMod","def","tag","attrs","cls","js","bem","mix","content","replace","extend","oninit","xjstOptions","appendContent","prependContent"],p.prototype.build=function(t,e){var n=this.methods("global").concat(e);return n[0]=this.match.bind(this),t.apply({},n),{templates:this.templates.slice().reverse(),oninit:this.initializers}},p.prototype.methods=function(t){for(var e=new Array(p.methods.length),n=0;n<e.length;n++){var i=p.methods[n];e[n]=f(this,t,i)}return e},p.prototype.flush=function(t,e){var n;n=e.conditions?t.concat(e.conditions):e.conditions;for(var o=0;o<e.children.length;o++){var s=e.children[o];if(s instanceof r)this.flush(n,e.children[o]);else{var a=new i(t,s);a.wrap(),this.templates.push(a)}}},p.prototype.body=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new r(this,t);return this.queue[this.queue.length-1].children.push(n),1===this.queue.length&&this.flush([],this.queue.shift()),this.boundBody},p.prototype.match=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++){var n=arguments[e];"function"==typeof n&&(n=new d(n)),m(n instanceof o,"Wrong .match() argument"),t[e]=n}return this.queue.push(new r(this,t)),this.boundBody},p.prototype.applyMode=function(t,e){if(t.length)throw new Error("Predicate should not have arguments but "+JSON.stringify(t)+" passed");return this.mode(e)},p.prototype.xjstOptions=function(t){return this.queue.push(new r(this,[new l(t)])),this.boundBody},p.prototype.block=function(t){return this.match(new h("block",t))},p.prototype.elem=function(t){return this.match(new h("elem",t))},p.prototype.mode=function(t){return this.match(new h("_mode",t))},p.prototype.mod=function(t,e){return this.match(new h(["mods",t],void 0===e||String(e)))},p.prototype.elemMod=function(t,e){return this.match(new h(["elemMods",t],void 0===e||String(e)))},p.prototype.def=function(){return this.applyMode(arguments,"default")},["tag","attrs","cls","js","bem","mix","content"].forEach(function(t){p.prototype[t]=function(){return this.applyMode(arguments,t)}}),["appendContent","prependContent"].forEach(function(t){p.prototype[t]=function(){return this.content.apply(this,arguments).match(new u(t,this.refs))}}),p.prototype.wrap=function(){return this.def.apply(this,arguments).match(new s(this.refs))},p.prototype.replace=function(){return this.def.apply(this,arguments).match(new a(this.refs))},p.prototype.extend=function(){return this.def.apply(this,arguments).match(new c(this.refs))},p.prototype.oninit=function(t){this.initializers.push(t)}},{inherits:11,"minimalistic-assert":12}],10:[function(t,e,n){function i(){return g+ ++p}var o="&amp;",r="&lt;",s="&gt;",a="&quot;",c="&#39;",u=/[&<>]/;n.xmlEscape=function(t){var e=""+t,n=u.exec(e);if(!n)return e;var i,a="",c=0,l=0;for(c=n.index;c<e.length;c++){switch(e.charCodeAt(c)){case 38:i=o;break;case 60:i=r;break;case 62:i=s;break;default:continue}l!==c&&(a+=e.substring(l,c)),l=c+1,a+=i}return l!==c?a+e.substring(l,c):a};var l=/["&]/;n.attrEscape=function(t){var e=""+t,n=l.exec(e);if(!n)return e;var i,r="",s=0,c=0;for(s=n.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:i=a;break;case 38:i=o;break;default:continue}c!==s&&(r+=e.substring(c,s)),c=s+1,r+=i}return c!==s?r+e.substring(c,s):r};var h=/['&]/;n.jsAttrEscape=function(t){var e=""+t,n=h.exec(e);if(!n)return e;var i,r="",s=0,a=0;for(s=n.index;s<e.length;s++){switch(e.charCodeAt(s)){case 38:i=o;break;case 39:i=c;break;default:continue}a!==s&&(r+=e.substring(a,s)),a=s+1,r+=i}return a!==s?r+e.substring(a,s):r},n.extend=function(t,e){if(!t||!e)return t||e;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i};var d={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};n.isShortTag=function(t){return d.hasOwnProperty(t)},n.isSimple=function t(e){return!e||e===!0||(!(e.block||e.elem||e.tag||e.cls||e.attrs||!e.hasOwnProperty("html")||!t(e.html))||("string"==typeof e||"number"==typeof e))},n.isObj=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t};var p=0,f=+new Date,m="__"+f,g="uniq"+f;n.getUniq=i,n.identify=function(t,e){if(!t)return i();if(e||t[m])return t[m];var n=i();return t[m]=n,n},n.fnToString=function(t){if(!t)return"";if("function"==typeof t){var e=/^function\s*[^{]+{|}$/g,n=/^(_|\(\w|[^=>]+\))\s=>\s{|}$/g;t=t.toString(),t=t.replace(0===t.indexOf("function")?e:n,"")}return t};var _=/^[:\w.-]+$/;n.isUnquotedAttr=function(t){return t&&_.exec(t)}},{}],11:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],12:[function(t,e,n){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=i,i.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}]},{},[2])(2)}),e.exports||i.BEMHTML}({},{}),r=new o({escapeContent:!0});return r.compile(function(t,n,i,o,r,s,a,c,u,l,h,d,p,f,m,g,_,y,v,b,x,k,M,E,w){y(function(t){var e=t.BEMContext.prototype,n=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);n._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},n.makePublic=function(t,i){return"object"==typeof t?void(n._public=e.extend(n._public,t)):("undefined"==typeof i&&(i=!0),void(n._public[t]=i))},n.isPublic=function(t){return Boolean(n._public[t])},n.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,i=["ua","by","kz"].indexOf(t)!==-1?"yandex.ru":e;n.tld=t,n["content-region"]=t,n["click-host"]="//clck."+i,n["passport-host"]="https://passport."+i,n["pass-host"]="https://pass."+e,n["social-host"]="https://social."+e,n["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},n)},restore:function(){var t;for(t in n)delete n[t];for(t in this._backup)n[t]=this._backup[t]}}}),i("i-global")(u()(""),c()(function(){var t=this.ctx.params||{},e=this["i-global"];this._iGlobalBackup.exists()?this.ctx.reset!==!1&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld);for(var n in t)e[n]=t[n];return""})),y(function(t){t["i-global"].makePublic("basePath"),t["i-global"].makePublic("avatarsMds"),t["i-global"].makePublic("safeHtmlContent")}),i("i-ua")(p()(!1),u()("script"),l()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),m()(function(){var t=[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");return[{html:t}]})),i("i-ua").content()(function(){var t=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("");return[].concat(E(),{html:t})}),i("i-bem").elem("i18n").def()(function(){if(!this.ctx)return"";var t=this.ctx,e=t.keyset,n=t.key,i=t.params||{};return e||n?(t.content&&(i.content=this.reapply(t.content)),BEM.I18N(e,n,i)):""}),i("b-statcounter").tag()("i"),i("b-statcounter").elem("metrika").match(function(){return this.elem})(u()("img"),l()(function(){return{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}),p()(!1),c()(t(function(){return!this.ctx.counter})(function(){return""}),t(function(){return void 0===this.ctx._noindex})(function(){return E({_noindex:this.ctx.js&&("noindex"===this.ctx.js.ut||0===this.ctx.js.ut)})}))),i("b-statcounter").elem("metrika").elemMod("type","js")(u()("i"),l()(function(){return{}}),h()("i-bem"),p()(!0),d()(function(){return{id:Number(this.ctx.counter)}}),m()(function(){return{tag:"noscript",content:{tag:"img",attrs:{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}}})),i("b-page").elem("link")(p()(!1),u()("link"),l()(function(){return{rel:this.ctx.rel,type:this.ctx.type,href:this.ctx.url,sizes:this.ctx.sizes,title:this.ctx.title}})),i("title").mod("size","xxl").tag()("h1"),i("title").mod("size","xl").tag()("h2"),i("title").mod("size","l").tag()("h3"),i("title").mod("size","m").tag()("h4"),i("title").mod("size","s").tag()("h5"),i("button")(c()(function(){this.mods;return E()}),u()("button"),t(function(){return this.ctx.url}).tag()("a"),d()(!0),l()(t(function(){return!0})(function(){var t=this.ctx,e={};return e.tabindex=t.tabindex,e}),t(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,n=E(),i={href:t.url,target:t.target},o=void 0!==Object(e).rel,r=o?String(e.rel):"",s="_blank"===i.target;return s&&(i.rel="noopener",r&&r.indexOf("noopener")===-1&&(e.rel=r+" noopener")),this.extend(n,i)}),t(function(){return!this.ctx.url})(function(){var t=this.ctx,e=E(),n={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,n)})),m()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),i("button").mod("disabled","yes").attrs()(function(){var t=this.ctx,e={};return t.url?e["aria-disabled"]="true":e.disabled=!0,this.extend(E(),e)}),i("footer")(c()(function(){return E({_inFooter:!0})}),f()(function(){return[{block:"clearfix"}]}),l()(function(){return{role:"contentinfo"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this["i-services"],e=this.ctx.region,n=[],i=[];n.push({elem:"link",url:e?t.serviceUrl("mobile",e):BEM.I18N("footer","apps-url"),content:BEM.I18N("footer","apps")});var o=this.ctx.tld.indexOf("com")===-1;return o&&i.push({elem:"link",url:e?t.serviceUrl("advertising",e)+"/kupislova.xml?advertising":BEM.I18N("footer","advert-url"),content:BEM.I18N("footer","advert")}),o&&this.ctx.statUrl&&i.push({elem:"link",url:this.ctx.statUrl,content:BEM.I18N("footer","stat")}),i.push({elem:"link",url:e?t.serviceUrl("legal",e)+"/termsofuse":BEM.I18N("footer","termsofuse-url"),content:BEM.I18N("footer","termsofuse")}),i.push({elem:"link",url:e?t.serviceUrl("company",e):BEM.I18N("footer","about-url"),
content:BEM.I18N("footer","about")}),i.push({block:"copyright",elemLinkMix:{block:this.block,elem:"link"},start:this.ctx.start}),[{elem:"column",content:n},{elem:"column",elemMods:{side:"right"},content:i}]})),y(function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})}),y(function(t){function e(t){return"object"==typeof t&&"[object Object]"===o.call(t)}function n(t,i,o){var r,s;t=Object(t),i=Object(i);for(r in i)s=o&&o(t[r],i[r],r),void 0!==s?t[r]=s:e(t[r])&&e(i[r])?t[r]=n(t[r],i[r],o):t[r]=i[r];return t}function i(t,e){return n(t,e,function(t,e,n){if("mix"===n)return[].concat(t,e)})}var o=Object.prototype.toString;t.BEMContext.prototype.util.merge=n,t.BEMContext.prototype.util.mergeBemjson=i}),i("link")(c()(function(){var t=(this.mods,this.ctx.url);return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),this._url=this.isSimple(t)?t:this.reapply(t),E()}),u()(function(){return void 0!==this._url?"a":"span"}),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0,_url:this.mods.disabled?this._url:void 0}}),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,i=n?String(e.rel):"";return i&&i.indexOf("noopener")===-1&&(e.rel=i+" noopener"),this.extend(E(),{rel:"noopener"})}),l()(function(){var t=this.ctx,e=this._url,n=void 0!==e,i=Boolean(this.mods.disabled);return this.extend(E(),{id:t.id,name:t.name,title:t.title,target:t.target,tabindex:i?void 0:t.tabindex,href:n&&!i?e:void 0,role:n?void 0:"button","aria-disabled":i?"true":void 0})}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx,e=Boolean(t.text),n=Boolean(t.icon),i=function(t){return function(e){return"string"==typeof e?{html:t(e)}:e}}(this.xmlEscape);return[n&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon"}},t.icon),e&&(this.isSimple(t.text)?n?{elem:"inner",content:i(t.text)}:i(t.text):t.text.block?this.util.mergeBemjson({mix:{block:"link",elem:"inner"}},t.text):this.extend({block:"link",elem:"inner"},t.text))]}),o("inner").tag()("span")),i("footer").elem("link").def()(function(){var t=this.extend(this.ctx,{block:"link",mods:{theme:"normal"},mix:[{block:this.block,elem:this.elem,elemMods:this.elemMods}]});return this.ctx.mix&&(t.mix=t.mix.concat(this.ctx.mix)),delete t.elem,M(t)}),i("copyright")(r("wrapLink")(function(){var t=this.ctx;return{block:"i-bem",elem:"i18n",keyset:"copyright",key:"link",content:{block:"copyright",elem:"link",mix:t.elemLinkMix,url:void 0===t.url?this["i-services"].serviceUrl("www"):t.url}}}),m()(function(){return["© ",{elem:"dates",start:this.ctx.start},"  ",this.ctx.content||w("wrapLink")]})),i("copyright").elem("link")(u()(!1),t(function(){return this.ctx.url})(u()("a"),l()(function(){return{href:this.ctx.url}})),m()(function(){return this.ctx.content||BEM.I18N("copyright","yandex")})),i("copyright").elem("dates")(u()("span"),m()(function(){var t=this.ctx.start,e=(new Date).getFullYear();return[t&&t!==e&&t+"–",e]})),y(function(t){var e=t["i-services"]=t.BEMContext.prototype["i-services"]={},n=t["i-global"];e.serviceName=function(t){return BEM.I18N("i-services",t||n.id)},e.serviceUrl=function(t,i){var o=n;return t||(t=o.id),i||(i=o["content-region"]),e._data[t](i)}}),i("i-services").def()(o("name")(function(){return M(this["i-services"].serviceName(this.ctx.id))}),o("url")(function(){return M(this["i-services"].serviceUrl(this.ctx.id,this.ctx.region))})),y(function(t){t["i-services"]._data={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//yandex.ua/all";case"by":return"//yandex.by/all";case"kz":return"//yandex.kz/all";case"com":return"//yandex.com/all";case"tr":return"//yandex.com.tr/all";default:return"//yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru"},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(){return"https://auto.ru"},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},collection:function(){return"https://collection.yandex.ru"},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},delivery:function(){return"https://delivery.yandex.ru"},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";default:return"https://direct.yandex.ru"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://maps.yandex.ua";case"com":return"https://maps.yandex.com";case"tr":return"https://harita.yandex.com.tr";default:return"https://maps.yandex.ru"}},"maps-com":function(){return"https://maps.yandex.com"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";case"tr":return"https://market.yandex.com.tr";default:return"https://market.yandex.ru"}},"market.advertising":function(){return"https://welcome.advertising.yandex.ru/market/"},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},pass:function(t){switch(t){case"ua":return"https://pass.yandex.ua";case"by":return"https://pass.yandex.by";case"kz":return"https://pass.yandex.kz";case"com":return"https://pass.yandex.com";case"tr":return"https://pass.yandex.com.tr";default:return"https://pass.yandex.ru"}},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://sprav.yandex.ua";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},support:function(t){switch(t){case"ua":return"https://yandex.ua/support/";case"by":return"https://yandex.by/support/";case"kz":return"https://yandex.kz/support/";case"com":return"https://yandex.com/support/";case"tr":return"https://yandex.com.tr/support/";default:return"https://yandex.ru/support/"}},taxi:function(){return"https://taxi.yandex.ru"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://tune.yandex.ua";case"by":return"https://tune.yandex.by";case"kz":return"https://tune.yandex.kz";case"com":return"https://tune.yandex.com";case"tr":return"https://tune.yandex.com.tr";default:return"https://tune.yandex.ru"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"http://yandex.ua/video/";case"by":return"http://yandex.by/video/";case"kz":return"http://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"http://yandex.com.tr/video/";default:return"http://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},"webmaster-api":function(t){switch(t){case"com":return"https://tech.yandex.com/webmaster/";case"tr":return"https://tech.yandex.com/webmaster/";default:return"https://tech.yandex.ru/webmaster/"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"}}}),i("header2")(l()(function(){return{role:"banner"}}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx;return[{elem:"main",content:[t.logo,{elem:"left",content:t.left},t.right&&{elem:"right",content:t.right}]},t.under&&{elem:"under",content:t.under}]}),o("logo").content()(function(){return this.ctx.serviceLogo?[].concat(E(),{block:"icon",mix:[{block:"header2",elem:"logo"},{block:"logo",mods:{service:"yes"}}]}):E()})),i("header2").mod("tableau","yes")(c()(function(){return E({_isTableau:!0})}),f()(function(){return[{block:"tableau-node",mods:{global:"yes"},js:!0}].concat(E())})),i("search2").match(function(){return this._isTableau}).def()(function(){return E({_mixTableauToInput:!0})}),i("input").match(function(){return this._mixTableauToInput}).mix()(function(){return[{block:"tableau-node",elem:"input"}].concat(E())}),i("header2").mod("tableau","yes").elem("logo").mix()(function(){return[{block:"tableau-node",elem:"trigger"}].concat(E())}),i("user")(c()(function(){var t=this.ctx.js||{},e=t.uid||this.ctx.uid||this["i-global"].uid,n=this.ctx.login,i=n||this["i-global"].login||(this["i-global"].displayName||{}).name;return E({_uid:e,_login:n,_hasDisplayName:i})}),u()("a"),d()(function(){return this.extend({uid:this._uid,login:this._login||this["i-global"].login},E())}),l()(function(){var t=this["i-global"],e=this._login||t.login,n=e&&/^uid-/.test(e),i={href:n?t["social-host"]:t["passport-host"]+"/passport?mode=passport"},o=this.ctx.counter||(this.ctx.counters||{}).user;return o&&(i.onmousedown=o),i}),m()(function(){return this._hasDisplayName?[this.ctx.content]:{elem:"enter"}})),i("user")(d()(function(){return this.extend(E()||{},{avatarHost:this["i-global"].avatarsMds})})),y(function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"…":t}}),i("user").elem("name")(u()("span"),c()(function(){var t=this.ctx,e=this["i-global"],n=t.content||t.login||this._login||(e.displayName||{}).name,i=!1;return n||(/^uid-/.test(e.login)?(n="",i=!0):n=e.login),E({_maxLength:void 0!==t.maxLength?t.maxLength:16,_maxLengthRelative:void 0!==t.maxLengthRelative?t.maxLengthRelative:3,_userName:n,_isUglyUserName:t.isUglyUserName||i})}),r("pre-content")(function(){var t=this.ctx;return[{elem:"first-letter",tag:"span",content:{html:this.xmlEscape(t.charAt(0))}},{html:this.xmlEscape(t.slice(1))}]}),m()(function(){return w("pre-content",{ctx:this.cleverSubstring(this._userName,this._maxLength,this._maxLengthRelative)})}),d()(function(){return{maxLength:this._maxLength,maxLengthRelative:this._maxLengthRelative,isUglyUserName:this._isUglyUserName}})),i("b-page").elem("static")(g()(function(){var t=this.ctx.bundle,e=this.ctx.data,n=this.ctx.page,i=this.ctx.common;return[{elem:"icon-set",data:e},i&&{elem:"css",url:e.stHost+t+".bundles/common/_common.css"},{elem:"css",url:e.stHost+t+".bundles/"+n+"/_"+n+".css"},{block:"i-jquery",mods:{version:"default"}},i&&{elem:"js",url:e.stHost+t+".bundles/common/_common."+e.language+".pub.js"},{elem:"js",url:e.stHost+t+".bundles/"+n+"/_"+n+"."+e.language+".pub.js"}]})),i("b-page").elem("icon-set")(g()(function(){return[{elem:"favicon",url:this.ctx.data.faviconDir+"favicon-16.png",sizes:"16x16"},{elem:"favicon",url:this.ctx.data.faviconDir+"favicon-32.png",sizes:"32x32"},{elem:"favicon",url:this.ctx.data.faviconDir+"favicon-64.png",sizes:"64x64"},{tag:"link",attrs:{rel:"mask-icon",href:this.ctx.data.stHost+"i/icons/favicon.svg",color:"#338EF5"}}]})),i("b-page").elem("favicon")(u()("link"),p()(!1),l()(function(){return{rel:"icon",href:this.ctx.url,sizes:this.ctx.sizes}})),i("i-jquery").def()(function(){return M({block:"b-page",elem:"js",nonce:this.ctx.nonce||this["i-global"].nonce,url:this.ctx.url||"https://yastatic.net/jquery/"+this.mods.version+"/jquery.min.js"})}),i("b-page").elem("js")(p()(!1),u()("script"),l()(function(){return{src:this.ctx.url,nonce:this.ctx.nonce||this["i-global"].nonce}})),i("i-jquery").mod("version","default").def()(function(){return E({"mods.version":"2.2.3"})}),i("safe-content")(g()(function(){var t=this.ctx.content,e=this["i-global"].safeHtmlContent;if(e){var n=this.require("xss"),i=n.FilterXSS,o=new i,r=o.process(t);return{html:r}}return{html:t}})),i("b-page")(o("root").attrs()(function(){return{lang:this["i-global"].lang||"ru"}}),r("js-params")(function(){var t=this["i-global"],e={},n={block:"i-global",js:e};return Object.keys(t).forEach(function(n){t.isPublic(n)&&(e[n]=t[n])}),n})),i("b-page")(r("doctype")(function(){return this.ctx.doctype||"<!DOCTYPE html>"}),r("xUACompatible")(function(){return this.ctx["x-ua-compatible"]!==!1&&{tag:"meta",attrs:{"http-equiv":"X-UA-Compatible",content:this.ctx["x-ua-compatible"]||"IE=edge"}}}),n()(function(){var t=this.ctx;return[{html:w("doctype")},{elem:"root",content:[{elem:"head",content:[t.csp&&this.extend(t.csp,{elem:"csp"}),{tag:"meta",attrs:{charset:"utf-8"}},w("xUACompatible"),void 0!==t.title&&{tag:"title",content:t.title},t.favicon?{elem:"favicon",url:t.favicon}:"",t.meta,{block:"i-ua",nonce:t.nonce},t.head]},t]}]}),u()("body"),o("root")(p()(!1),u()("html"),h()("i-ua_js_no i-ua_css_standard")),o("head")(p()(!1),u()("head")),o("meta")(p()(!1),u()("meta"),l()(function(){return this.ctx.attrs})),o("favicon").replace()(function(){return{elem:"link",rel:"shortcut icon",url:this.ctx.url}}),m()(function(){return{elem:"body",content:this.ctx.content}}),o("body").tag()(""),f()(function(){return[].concat(E(),[{elem:"body"},w("js-params"),{block:"i-ua",js:!0}])})),i("b-page").elem("css")(p()(!1),u()("style"),l()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),g().match(function(){return void 0!==this.ctx.ie})(t(function(){return this.ctx.ie===!0})(function(){var t=this.ctx.url;return{elem:"cc",condition:"IE 9",content:{elem:"css",url:/\.css$/.test(t)?t:t+".ie9.css"}}}),t(function(){return this.ctx.ie===!1})(function(){return{elem:"cc",condition:"gt IE 9",others:!0,content:{elem:"css",url:this.ctx.url}}}),t(function(){return"string"==typeof this.ctx.ie})(function(){return{elem:"cc",condition:this.ctx.ie,others:this.ctx.ie.indexOf("!")>-1,content:{elem:"css",url:this.ctx.url}}})),t(function(){return this.ctx.url})(u()("link"),l()(function(){return{rel:"stylesheet",href:this.ctx.url}}))),i("b-page").elem("css")(t(function(){return this.ctx.ie===!0}).replace()(function(){var t=this.ctx.url;return[t&&{elem:"cc",condition:"IE 8",content:{elem:"css",url:t+".ie8.css"}},{html:E()}]})),i("b-page").elem("cc")(u()(!1),m()(function(){var t=this.ctx.others,e=this.ctx.condition.indexOf("!")>-1;return[{html:["<!--[if "+this.ctx.condition+"]>",t?"<!":"",e||t?"-->":""].join("")},this.ctx.content,{html:[e||t?"<!--":"","<![endif]-->"].join("")}]})),i("survey")(u()("form"),l()({method:"POST",action:"",novalidate:"",enctype:"multipart/form-data"}),m()(function(){return[{tag:"input",attrs:{type:"hidden",name:"_csrf",value:this.ctx.js.csrfToken}},{elem:"section",content:[{block:"survey-validation",elem:"message",elemMods:{role:"main"},mix:[{block:"survey",elem:"line",elemMods:{type:"main-message"}}],content:BEM.I18N("survey","error-text")},this.ctx.content]},{elem:"submit-button",content:{block:"safe-content",content:this.ctx.submitButtonText}}]})),i("survey").mod("preview","yes").tag()("div"),i("survey").elem("control").tag()("td"),i("survey").elem("label").content()(function(){var t=this.ctx.content,e={tag:"label",attrs:{for:this.ctx.for},content:["string"==typeof t?{block:"safe-content",content:t}:t]};return this.ctx.hint&&e.content.push({elem:"hint",content:this.ctx.hint}),e}),i("survey").elem("label").tag()("td"),i("survey").elem("required").tag()("td"),i("survey").elem("required-star")(u()("span"),m()("*")),i("survey").elem("group").tag()("fieldset"),i("survey").elem("line-inner")(u()("table"),m()(function(){return{tag:"tr",content:this.ctx.content}})),i("survey").elem("line-inner").elemMod("long","yes")(u()("table"),m()(function(){var t=this.ctx.content[1],e=t.content;return e?[{tag:"tr",content:[this.ctx.content[0],this.ctx.content[1]]},{tag:"tr",content:[{elem:"required"},this.ctx.content[2]]}]:{tag:"tr",content:[this.ctx.content[0],this.ctx.content[2]]}})),i("survey").elem("submit-button").content()(function(){return{block:"button",mods:{theme:"action",size:"m"},type:"submit",content:this.ctx.content}}),i("survey").elem("line").content()(function(){var t={elem:"line-inner",elemMods:{long:"yes"==this.elemMods.long?"yes":""},content:this.ctx.content};return t.content instanceof Array&&t.content.unshift({elem:"required",content:{elem:"required-star"}}),t}),i("survey").elem("hint")(u()("span"),m()(function(){
var t=this.ctx.content;return"string"==typeof t?{block:"safe-content",content:t}:t})),i("survey").elem("captcha").content()(function(){var t=this.ctx.tags[0]||"",e=this.ctx.tags[1]||"";return[{tag:"input",attrs:t.attrs},{block:"input",js:{},mods:{size:"m"},content:[{elem:"control",controlAttrs:this.extend(e.attrs,{type:"number"})}]},{elem:"captcha-img",src:t.attrs["data-captcha-image-url"]},{elem:"captcha-updater",content:BEM.I18N("survey","captcha-updater")}]}),i("survey").elem("captcha-updater").content()(function(){return{block:"link",mods:{theme:"pseudo",pseudo:"yes",inner:"yes"},content:[{block:"icon",mods:{type:"updater"},mix:[{block:"survey",elem:"captcha-updater-ico"}]},{elem:"inner",content:BEM.I18N("survey","captcha-updater")}]}}),i("link").mod("pseudo","yes")(m().match(function(){return!this.mods.inner})(function(){return{elem:"inner",content:E()}})),i("icon")(u()("i"),l()(function(){var t=this.ctx,e=void 0!==t.url,n=void 0!==Object(t.attrs).style,i=(n?t.attrs.style:"")+(e?";background-image:url('"+t.url+"');":"");return n&&(t.attrs.style=i),{style:i||void 0,"aria-hidden":"true"}})),i("survey").elem("captcha-img")(u()("img"),l()(function(){return{src:this.ctx.src}})),i("input")(u()("span"),r("live")(!1),r("getLive")(function(){var t=w("live"),e=this.ctx.js,n=this.mods,i={autofocus:"yes",width:"content","tap-ahead":"yes"};return e?(void 0!==e.live?Boolean(e.live):t)&&!e.autoFocus&&!Object.keys(i).some(function(t){return n[t]===i[t]}):t}),d()(function(){return{live:this._live}}),c()(function(){var t,e=w("value",{ctx:this.ctx.value}),n=this.ctx.id||this.generateId(),i=this.mods,o=w("getLive",{}),r=this.ctx.placeholder;return i.theme=i.theme||"normal",this.ctx.hasOwnProperty("placeholder")&&(t=this.isSimple(r)?r:this.reapply(r)),E({_inputId:n,_labelId:"label"+n,_hintId:"hint"+n,_name:this.ctx.name||"",_value:e,_inputLink:!0,_iconLeft:this.ctx.icon||this.ctx.iconLeft,_iconRight:this.ctx.iconRight,_disabled:i.disabled,_live:o,_placeholder:t,_hasClear:"no"!==i.clear})}),r("value")("",t(function(){return this.ctx})(function(){return this.reapply(this.ctx)}),t(function(){return this.isSimple(this.ctx)})(function(){return this.ctx}))),i("input").elem("box")(u()("span"),m()(function(){return[this._iconLeft&&{elem:"icon",icon:this._iconLeft,elemMods:{side:"left"}},this._iconRight&&{elem:"icon",icon:this._iconRight,elemMods:{side:"right"}},this._hasClear&&{elem:"clear",elemMods:this._value||0===this._value?{visibility:"visible"}:void 0,content:" "},this.ctx.content].filter(Boolean)})),i("input").elem("control")(u()("input"),l()(function(){var t=this.extend({id:this._inputId,name:this._name,placeholder:this._placeholder},this.ctx.controlAttrs);return(this._value||0===this._value||""===this._value)&&(t.value=this._value),this.mods.disabled&&(t.disabled=!0),this._live&&(t.autocomplete="off"),t["aria-labelledby"]=this._labelId+" "+this._hintId,t}),n()(function(){return{elem:"box",content:this.ctx}})),i("input").elem("clear")(u()("span"),l()(function(){return{unselectable:"on"}}),m().match(function(){return!this.ctx.content})("")),i("input").elem("samples")(u()("span"),l()(function(){return{role:"list"}})),i("input").elem("sample")(u()("span"),l()(function(){return{role:"listitem"}})),i("link").match(function(){return this._inputLink&&this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),i("input").mod("type","textarea").elem("control")(u()("textarea"),l()(function(){var t=E({_value:null});return this.extend(t,{rows:10,cols:10})}),m()(function(){return{html:this.xmlEscape(this._value||this.ctx.content||"")}})),i("popup")(c().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var n=t.attrs||(t.attrs={});n.style=(n.style||"")+";z-index:"+t.zIndex+";"}return w("default",{_popupDefaults:!0})}),m()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),i("b-autocomplete-item")(u()("li"),t(function(){return this.ctx.search_cgi&&Array.isArray(this.ctx.search_cgi)}).js()(function(){return{cgi:this.ctx.search_cgi}}),d()(!0),f()(function(){return[{mods:{pers:this.ctx.pers?"yes":""}}]}),m()(function(){var t=this.ctx.data,e=BEM.blocks["b-autocomplete-item"].highlight,n=this.xmlEscape(Array.isArray(t)?t[1]:t);return e(n,this.ctx.hl)})),i("b-autocomplete-item").mod("type","nav")(c()(function(){var t=this.ctx.data,e=t[4],n=(e.match(/^\w[\w-]*:\/\//g)?"":"http://")+e,i=BEM.blocks["i-common__string"].escapeHTML(t[3]),o=" — "+BEM.blocks["b-autocomplete-item"].highlight(t[2],this.ctx.hl);return E({_linkUrlContent:i,_linkInfoConten:o,_url:n})}),d()(function(){return{val:this._url}}),m()(function(){return{elem:"link",tag:"a",attrs:{href:this._url,target:"_blank"},content:[{elem:"link-url",tag:"span",content:this._linkUrlContent},{elem:"link-info",tag:"span",content:this._linkInfoConten}]}})),i("b-autocomplete-item").mod("type","foot")(f()(function(){return[{mods:{enterable:"no"}}]}),m()(function(){return this.ctx.data.slice(1).map(function(t){return Array.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t},this)})),i("b-autocomplete-item").mod("type","lingvo").content()(function(){var t=this.ctx.data[1];return[{tag:"span",elem:"text",content:t.text},{tag:"span",elem:"translation",content:[" — ",t.translation]}]}),i("b-autocomplete-item").mod("type","proxy")(d()(function(){var t=this.ctx.data[1];return{id:t.id}}),m()(function(){var t=this.ctx.data[1];return t.text})),i("input").elem("message")(u()("span"),l()(function(){return{"aria-hidden":"true"}})),i("textinput")(u()("span"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),m()(function(){var t=this.ctx,e=this.mods;return[{elem:"control",attrs:this.extend({type:e.type,id:t.id,name:t.name,value:t.text,tabindex:t.tabindex,placeholder:t.placeholder,autocomplete:t.autocomplete===!1&&"off",disabled:Boolean(e.disabled)},t.controlAttrs)},{elem:"box"}]})),i("textinput")(t(function(){return this.ctx.controlAttrs}).js()(function(){var t=Boolean(this.ctx.controlAttrs.autofocus);return this.extend(E(),{autofocus:t,live:!t})})),i("textinput").elem("box").tag()("span"),i("textinput").elem("control").tag()("input"),i("textinput").mod("type","number")(c()(function(){return this.ctx.placeholder=!1,this.mods["has-clear"]=!1,E()})),i("textinput").mod("has-clear","yes")(m()(function(){return[].concat(E(),{elem:"clear",elemMods:{theme:this.mods.theme,visible:Boolean(this.ctx.text)&&"yes"}})}),t(function(){return this.ctx.controlAttrs&&this.ctx.controlAttrs.readonly}).def()(function(){return this.mods["has-clear"]=!1,E()})),i("textinput").elem("clear")(r("icon-type")("default"),g()(function(){return{elem:"icon",icon:{mods:{type:w("icon-type")},mix:{block:this.block,elem:"clear",elemMods:this.ctx.elemMods}}}})),i("textinput").elem("icon").replace()(function(){var t=this.ctx.icon||{};return t.block="icon",t.mix=[].concat(t.mix,{block:this.block,elem:this.elem,elemMods:this.elemMods}),t.mods=this.extend({size:this.mods.size,disabled:this.mods.disabled},t.mods),t}),i("checkbox")(c()(function(){var t=this.ctx;return t.checkboxAttrs=this.extend({id:this.generateId(),checked:Boolean(this.mods.checked),disabled:Boolean(this.mods.disabled)},t.checkboxAttrs),t.checkboxAttrs["aria-labelledby"]="label"+t.checkboxAttrs.id,E({_labelAttrs:{id:t.checkboxAttrs["aria-labelledby"],for:t.checkboxAttrs.id}})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),t(function(){return void 0===this.ctx.content}).content()(function(){return[this.util.merge({elem:"box",tag:"span",content:[this.util.merge({elem:"control",attrs:this.ctx.checkboxAttrs},this.ctx.control),{elem:"tick",tag:"i"}]},this.ctx.box),void 0!==this.ctx.text&&this.util.merge({elem:"label"},this.isSimple(this.ctx.text)?{content:{html:this.xmlEscape(this.ctx.text)}}:this.ctx.text)].filter(Boolean)})),i("checkbox").elem("control")(u()("input"),l()(function(){return{type:"checkbox",autocomplete:"off"}})),i("checkbox").elem("label")(u()("label"),l()(function(){return this.extend({"aria-hidden":"true"},this._labelAttrs)})),i("radiobox")(c()(function(){var t=this.ctx,e=this.mods;return E({_disabled:e.disabled,_name:t.name,_value:t.value})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)})),i("radiobox").elem("radio")(c()(function(){var t=this.ctx,e=this.elemMods,n=this.extend({id:this.generateId(),type:"radio",name:this._name},t.controlAttrs),i=void 0!==n.value&&n.value===this._value;return e.disabled||(e.disabled=this._disabled),e.checked||(e.checked=i?"yes":""),e.disabled&&(n.disabled=!0,n.tabindex=-1),e.checked&&(n.checked=!0),E({_controlAttrs:n})}),u()("label"),l()(function(){return{for:this._controlAttrs.id}}),m()(function(){return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:E()}]})),i("radiobox").elem("control")(u()("input"),l()(function(){return this._controlAttrs})),i("radio-button")(c()(function(){var t=this.ctx,e=this.mods;return E({_radioButton:{name:t.name,value:t.value,disabled:Boolean(e.disabled)}})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),m()(function(){var t=this.ctx.content;return Array.isArray(t)?t.filter(function(t){return!this.isSimple(t)&&t},this):t})),i("radio-button").elem("radio")(c()(function(){var t=this.elemMods,e=this._radioButton,n=e.disabled,i=this.extend({},this.ctx.controlAttrs),o=void 0!==i.value&&i.value===e.value;return o&&(t.checked="yes"),n&&(t.disabled="yes"),t.side||(t.side=["","right","left","both"][2*this.isFirst()+this.isLast()]),i.checked=Boolean(t.checked),i.disabled=Boolean(t.disabled),i.id||(i.id=this.generateId()),E({_controlAttrs:i})}),u()("label"),l()(function(){return{for:this._controlAttrs.id}}),m()(function(){return[{elem:"control"},{elem:"text",tag:"span",content:this.ctx.content}]})),i("radio-button").elem("control")(u()("input"),l()(function(){var t=this._controlAttrs;return t.checked=Boolean(t.checked),t.disabled=Boolean(t.disabled),t.disabled&&(t.tabindex="-1"),t.type="radio",t.name=this._radioButton.name,t})),i("select")(c()(function(){var t=this.ctx,e=t.id||this.generateId();return E({_controlAttrs:{id:e,name:t.name},_formSelect:{block:this.block,mods:this.mods,tabindex:t.tabindex}})}),d()(function(){return this.extend({live:!1},this.ctx.js)}),u()("span"),o("option").tag()("option"),o("option-group").tag()("optgroup"),o("text").tag()("span")),i("select").def()(function(){var t=this.ctx,e=(w("js")||{}).live;if(e){var n=t.content.filter(function(t){return"control"===t.elem})[0].content;if(n.length){var i=function(t){for(var e,n,o=0;o<t.length&&(e=t[o],"option"===e.elem&&Object(e.attrs).selected?n=e:"option-group"===e.elem&&(n=i(e.content)),!n);o++);return n},o=i(n);return o||(o=n[0],"option-group"===o.elem&&(o=o.content[0])),E({_initValue:o.attrs.value,_initText:o.content})}}return E()}),i("select").elem("item").attrs()(function(){return{id:this.generateId()}}),i("select").elem("item").match(function(){return this.elemMods.label}).attrs()(function(){var t=E()||{};return this._labelId&&(t.id=this._labelId),t["aria-hidden"]="true",t}),i("button").match(function(){return this._formSelect})(l()(function(){var t=E()||{};t.role="listbox",t.type="button",t["aria-haspopup"]="true",t["aria-expanded"]="false";var e=this._formSelect.tabindex;return"undefined"!=typeof e&&(t.tabindex=e),t}),c()(function(){var t=this.ctx,e=this._formSelect.mods,n=this.mods;return n.arrow="down",e.theme&&(n.theme=e.theme),e.size&&(n.size=e.size),e.disabled&&(n.disabled="yes"),this._initText&&(t.content=this._initText),E({"ctx._theme":!0})}),f()(function(){return[{block:this._formSelect.block,elem:"button"}]})),i("select").elem("group")(l()(function(){return{role:"group","aria-labelledby":this._labelId}}),f()(function(){var t=this.isFirst()?this.isLast()?"both":"first":this.isLast()?"last":"middle";return{elemMods:{position:t}}}),c()(function(){return E({_labelId:this.generateId()})})),i("select").elem("text")(m()(function(){return{block:"safe-content",content:this.ctx.content}})),i("select").elem("control")(t(function(){return this._initValue}).def()(function(){var t=this.ctx;return t.attrs=this.extend(t.attrs,{value:this._initValue}),E()}),u()("select"),l()(function(){var t={};return["id","name","tabindex"].forEach(function(e){this._controlAttrs[e]&&(t[e]=this._controlAttrs[e])}.bind(this)),t.disabled=Boolean(this.mods.disabled),t.tabindex=-1,t["aria-hidden"]="true",this.ctx.controlAttrs||t})),i("attach")(u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),c()(function(){var t=this.ctx;this.mods;return this.mods.theme||(this.mods.theme="normal"),E({_attachButton:!0,_id:t.id||this.generateId(),_name:t.name||"attachment",_tabindex:t.tabindex,_disabled:this.mods.disabled})}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx,e=t.text&&{html:this.xmlEscape(t.text)},n=[];return"button2"!==this.mods.use&&n.push(this.util.mergeBemjson({block:"button",mods:{size:this.mods.size,theme:this.mods.theme},mix:{block:"attach",elem:"button"},id:this._id,name:this._name,tabindex:t.tabindex,content:e||BEM.I18N("attach","button-text")},t.button||{})),void 0!==t.holder&&n.push("string"==typeof t.holder?{elem:"holder",content:{html:this.xmlEscape(t.holder)}}:this.extend(t.holder,{elem:"holder"})),n})),i("button").match(function(){return this._attachButton})(u()("span"),t(function(){return this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),c()(function(){this.ctx.content||(this.ctx.content=BEM.I18N("attach","button-text"));var t=this.ctx;return t.id&&(this._id=t.id),t.name&&(this._name=t.name),E({_name:this._name,_id:this._id,_textId:"text"+this._id,_tabindex:t.tabindex||this._tabindex})}),l()(function(){return{}}),m()(function(){var t=E(),e={block:"attach",elem:"control",attrs:this.extend({autocomplete:"off"},this.ctx.controlAttrs||{})};return[t,e]}),o("text").attrs()(function(){var t=E()||{};return t.id=this._textId,t["aria-hidden"]="true",t})),i("attach").elem("control")(f()(function(){return[{block:"button",elem:"control"}]}),u()("input"),l()(function(){var t=this.extend(this.ctx.attrs||{},{type:"file",name:this._name,id:this._id,"aria-labelledby":this._textId});return t.disabled=Boolean(this._disabled),this._disabled&&(t["aria-disabled"]="true"),this._tabindex&&(t.tabindex=this._tabindex),t})),i("attach").elem("holder")(c()(function(){return this.elemMods.state="hidden",E()}),u()("span"),l()(function(){return{"aria-hidden":"true"}}),m()(function(){return[{block:"image",mix:{block:"attach",elem:"icon-file"}},{elem:"text",tag:"label",attrs:{for:this._id},content:this.ctx.content||BEM.I18N("attach","no-file")},{block:"image",mix:{block:"attach",elem:"reset"}}]})),i("image")(u()("img"),l()(function(){var t=this.ctx,e={src:"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""};return t.url&&(e.src=t.url),["alt","width","height"].forEach(function(n){t[n]&&(e[n]=t[n])}),e})),i("date-input")(o("label").tag()("label"),c()(function(){var t=this.ctx,e=t.value||"",n=t.name||"";return e instanceof Array&&(e=e[0]),n instanceof Array&&(n=n[0]),e&&(e=e.split(".").reverse().join("-")),E({name:n,value:e})})),i("date-input")(m()(function(){var t=this.ctx;return[{block:"m-calendar",mix:[{block:t.block,elem:"control"}],mods:{toggler:"input",type:"month",has:"clear"},js:this.extend(t.js||{},{autoclose:!0,value:this.value}),size:"m",attrs:t.attrs,theme:"grey"},{block:this.ctx.block,elem:"iso-date",tag:"input",attrs:{type:"hidden",name:this.name,value:this.value}}]})),y(function(t,e){t.BEMContext.prototype["mi-helpers"]={getDateFromHumanString:function(t){var e,n=Math.abs(~t.search(/\./)||~t.search("Z")),i=t;return i=i.replace(/-/g,",").replace("T",",").replace(/:/g,","),i=n?i.substr(0,n-1):i,i=i.split(","),i[1]=i[1]-1,e=this.getUTC_YMD(i[0],i[1],i[2]),i[3]&&e.setHours(i[3]),i[4]&&e.setMinutes(i[4]),i[5]&&e.setSeconds(i[5]),e},getUTC_YMD:function(t,e,n){var i=new Date(Date.UTC(2e3,10));return i.setUTCFullYear(t),i.setUTCMonth(e),i.setUTCDate(n),i.setUTCMinutes(i.getMinutes()+i.getTimezoneOffset()),i},getHumanStringFromDate:function(t){var e,n=t.date,i=n.getFullYear(),o=(n.getMonth()+1).toString(),r=n.getDate().toString(),s=n.getHours().toString(),a=n.getMinutes().toString(),c=n.getSeconds().toString();return 1===o.length&&(o="0"+o),e=i+"-"+o,t.needDay!==!1&&(1===r.length&&(r="0"+r),e=e+"-"+r,t.needHours&&(1===s.length&&(s="0"+s),e=e+"T"+s,t.needMinutes&&(1===a.length&&(a="0"+a),e=e+":"+a,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},o={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};return function(r,s,a){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(r)||/\d/.test(r)||(s=r,r=void 0);try{if(r=r?new Date(r):new Date,isNaN(r))throw SyntaxError("invalid date");s=String(o[s]||s||o.default),"UTC:"==s.slice(0,4)&&(s=s.slice(4),a=!0);var c=a?"getUTC":"get",u=r[c+"Date"](),l=r[c+"Day"](),h=r[c+"Month"](),d=r[c+"FullYear"](),p=r[c+"Hours"](),f=r[c+"Minutes"](),m=r[c+"Seconds"](),g=r[c+"Milliseconds"](),_=a?0:r.getTimezoneOffset(),y={d:u,dd:i(u),ddd:BEM.I18N("i-tanker__days","short"+(l?l:7)),dddd:BEM.I18N("i-tanker__days","n"+(l?l:7)),m:h+1,mm:i(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:f,MM:i(f),s:m,ss:i(m),l:i(g,3),L:i(g>99?Math.round(g/10):g),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:a?"UTC":(String(r).match(e)||[""]).pop().replace(n,""),o:(_>0?"-":"+")+i(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return s.replace(t,function(t){return t in y?y[t]:t.slice(1,t.length-1)})}catch(t){}finally{}}}()}}),i("popup").elem("tail").tag()("i"),i("m-datepicker")(d()(!0),o("great-chooser").tag()("form")),i("awesome-icon").tag()("span"),i("i-ua").content()(function(){var t=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("");return[].concat(E()||[],{html:t})}),i("input").elem("hint")(u()("label"),l()(function(){return{id:this._hintId,for:this._inputId,"aria-hidden":"true"}}),c()(function(){return this._iconLeft&&(this.elemMods.lpad="yes"),this._iconRight&&(this.elemMods.rpad="yes"),this._value||0===this._value||(this.elemMods.visibility="visible"),E()})),i("input").elem("control").match(function(){return this._placeholder}).wrap()(function(){return[{elem:"hint",content:this._placeholder},this.ctx]}),i("m-calendar").mod("toggler","input").content()(function(){return{elem:"toggler",content:{block:"input",mods:{size:this.ctx.size,clear:"no",toggler:"datepicker",disabled:this.ctx.mods.disabled||""},placeholder:this.ctx.js.defaultText,content:[{elem:"control",attrs:this.extend(this.ctx.attrs||{},{readonly:"yes"})}]}}}),i("date-range-input").content()(function(){var t=this.ctx,e=this.ctx.block,n=t.value||"",i=t.name||"",o=["from","to"],r=t.js.limits,s=n.map(function(t,n){var s,a=o[n];return t||(s=r.min||r.max),{block:"date-input",mods:{type:a},mix:[{block:e,elem:a}],name:i[n],attrs:{id:i[n]},value:t,js:{defaultText:BEM.I18N(e,a),limits:r,date:s}}});return s}),i("rub")(u()("span"),f()([{block:"i-font",mods:{face:"rub-arial-regular"}}]),m()("Р")),i("price").mod("currency","rub").content()(function(){return[{elem:"val",content:this.ctx.content}," ",{block:"rub"}]}),i("price").mod("currency","eur").content()(function(){return[{elem:"val",content:this.ctx.content}," €"]}),i("price").elem("val").tag()("span"),i("autocomplete-item")(d()(function(){return this.ctx.data}),m()(function(){return[{elem:"label",tag:"span",content:this.ctx.data.label},{elem:"data",data:this.ctx.data},{elem:"clear",tag:"span",content:"×"}]})),i("autocomplete-item").elem("data")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.data.name,value:this.ctx.data.value}})),i("file")(d()(function(){return{token:this.ctx.token,attrs:this.ctx.fileAttrs}}),m()(function(){var t=this.ctx,e=t.fileAttrs||"",n=e.size||"s",i=e.name||"";return[{block:"button",mods:{theme:"normal",size:n,side:"left",active:"no"},content:i.length>20?i.substr(0,20)+"…":i,attrs:{title:i}},{block:"button",mods:{theme:"normal",size:n,side:"right","only-icon":"yes"},mix:[{block:"file",elem:"delete"}],content:[{block:"spin2",mods:{size:"xxs",progress:"yes"}},{block:"image",mix:[{block:"button",elem:"icon",elemMods:{10:"delete"}}],alt:""}]}]})),i("file").mod("hidden","yes")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.content}})),i("file-upload")(d()(function(){return this.extend(this.ctx.js,{maxFilesSize:this.ctx.maxFilesSize,maxFilesCount:this.ctx.maxFilesCount})}),m()(function(){return[{block:"attach",mods:{size:"m"},content:[{block:"button",mods:{theme:"normal",size:"m"},mix:[{block:"attach",elem:"button"}],controlAttrs:{multiple:"multiple"},name:"file",content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"upload"}}],alt:BEM.I18N("file-upload","upload-text")},BEM.I18N("file-upload","upload-text")]}]},{elem:"limit",content:BEM.I18N("file-upload","limit-hint",{count:this.ctx.maxFilesCount,size:this.ctx.maxFilesSize,multiple:this.ctx.maxFilesCount>1})}]})),i("file-upload").elem("limit").tag()("span"),i("survey-validation").elem("message-list").tag()("ul"),i("scale").elem("cell-text").tag()("span"),i("scale").elem("answer")(u()("input"),l()(function(){return this.extend(this.ctx.attrs,{type:"checkbox"})})),i("domik")(c().match(function(){return!this.mods.logo})(function(){var t;return this.ctx.lang?t=this.ctx.lang:BEM.blocks&&BEM.blocks["i-global"]?t=BEM.blocks["i-global"].param("lang"):this["i-global"]&&(t=this["i-global"].lang),this.mods.logo=["en","tr","hy","ka","az"].indexOf(t)!==-1?"en":"ru",E()}),m()(function(){return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:this.ctx.content}]}),o("roof-border").tag()("i"),o("roof-body").tag()("i"),o("logo").tag()("i")),i("auth")(c()(function(){var t=this.ctx,e=function(t,e){return t?BEM.blocks["i-global"].param(e):this["i-global"][e]}.bind(this,BEM&&BEM.blocks);return void 0===t.retpath&&(t.retpath=e("retpath")),void 0===t.from&&(t.from=e("passport-msg")),E({_passportHost:e("passport-host")})}),u()("form"),d()(!0),l()(function(){return{method:"post",action:this.ctx.url||this._passportHost+"/auth",role:"form","aria-label":BEM.I18N("auth","auth")}}),r("auto-content")([]),m()(function(){var t=this.ctx;return[t.content||w("auto-content"),["retpath","from","origin","timestamp"].map(function(e){return{elem:"hidden",mix:{elem:e},name:e,val:t[e]}})]})),i("auth").elem("hidden")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.val}})),i("auth").mod("content","auto")(r("auto-content")([{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]),o("username").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]}}),o("password").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]}}),o("haunter").content()(function(){return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:BEM.I18N("auth","temporary")}}),o("button").content()(function(){return{block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:BEM.I18N("auth","logon")}}),o("remember").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/restoration",text:BEM.I18N("auth","remember")}}),o("register").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/registration",text:BEM.I18N("auth","register")}})),i("auth").elem("social").attrs()(function(){return{role:"group","aria-label":BEM.I18N("auth","social-log-in")}}),i("auth").elem("social-icon")(u()("i"),m()(" ")),i("dropdown")(d()(!0),f()(function(){return[{mods:{action:"closed"}}]}),o("popup").replace()(function(){var t=this.ctx,e=[{block:"dropdown",elem:"popup"}];return t.mix&&(e=e.concat(t.mix)),{block:"popup",mix:e,mods:this.elemMods,underMods:t.underMods,attrs:t.attrs,js:t.js,content:[{elem:"tail"},{elem:"content",content:t.content}]}})),i("button2")(c()(function(){return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),E()}),t(function(){return void 0===this.ctx.tag}).tag()("button"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),l()(function(){var t=this.ctx,e=Boolean(this.mods.disabled);return{type:"button",autocomplete:"off",id:t.id,title:t.title,name:t.name,value:t.val,tabindex:e?void 0:t.tabindex,disabled:e,"aria-disabled":e&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx;return[t.icon&&{elem:"icon",icon:t.icon},t.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:t.iconLeft},t.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:t.iconRight},void 0!==t.text&&(this.isSimple(t.text)?{elem:"text",content:{html:this.xmlEscape(t.text)}}:this.extend(t.text,{elem:"text"}))].filter(Boolean)})),i("button2").elem("text").tag()("span"),i("button2").mod("type","submit").attrs()(function(){return this.extend(E(),{type:"submit"})}),i("button2").mod("type","link")(c()(function(){return E()}),u()("a"),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,i=n?String(e.rel):"";return i&&i.indexOf("noopener")===-1&&(e.rel=i+" noopener"),this.extend(E(),{rel:"noopener"})}),l()(function(){return this.extend(E(),{target:this.ctx.target,href:this.mods.disabled?void 0:this.ctx.url,autocomplete:void 0,type:void 0})}),d()(function(){return this.extend(E(),{_url:this.mods.disabled?this.ctx.url:void 0})})),i("i-ua").content()(function(){var t=[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("");return[].concat(E(),{html:t})}),i("user").elem("icon").match(function(){return this._uid})(c()(function(){var t=this.ctx.avatarId||(this["i-global"].displayName||{}).default_avatar;return E({_avatarId:t})}),u()("span"),r("host")("//avatars.mds.yandex.net"),d()(function(){return{avatarId:this._avatarId}})),i("user").elem("icon").mode("iconSize")("middle"),i("user")(o("enter").def()(function(){var t=BEM.I18N("user","enter");return M([{block:"button",mods:{pseudo:"yes",size:"m",theme:"pseudo"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:t,"aria-label":t},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}])}),o("enter-label")(u()("span"),l()(function(){return{"aria-hidden":"true"}}),m()(function(){return BEM.I18N("user","enter")}))),i("domik").mod("type","hidden")(d()(!1),c()(function(){return M({block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]})})),i("domik").mod("type","popup").attrs()(function(){var t=E()||{};return t.role="dialog",t}),i("user").mod("menu","yes")(l()(function(){var t=E()||{};return t.role="button",t.tabindex=0,t["aria-haspopup"]="true",t["aria-expanded"]="false",t}),r("exit-url")(function(){var t=this["i-global"],e="/passport?mode=";return e+="logout&yu="+(t.yandexuid||""),t.retpath&&(e+="&retpath="+encodeURIComponent(t.retpath)),t["passport-host"]+e}),r("user-menu")(function(){var t=w("exit-url");return[{elem:"item",type:"mail",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("mail"),content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:{caller:this.ctx.mailCallerId}}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(this)}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","letter_compose"),url:this["i-services"].serviceUrl("mail")+"/compose"}},{elem:"item",type:"disk",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","tune"),url:this["i-services"].serviceUrl("tune")}},{elem:"item",type:"passport",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","passport"),url:this["i-services"].serviceUrl("passport")}},{elem:"item",type:"logout",content:{block:"link",mods:{theme:"normal"},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:t}}]}),t(function(){return this["i-global"].login}).wrap()(function(){var t=w("user-menu");return{block:"dropdown-menu",mods:{theme:"ffffff",size:"m",user:"yes"},content:[this.ctx,{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:t}]}})),i("dropdown-menu")(d()(!0),c()(function(){var t=this.mods;return void 0!==t.size||(t.size="m"),void 0!==t.theme||(t.theme="ffffff"),this.dropdownMenuSize=t.size,this._inDropdownMenu=!0,E()})),i("dropdown-menu").elem("popup").def()(function(){var t=this.ctx;return M({block:"dropdown",elem:"popup",js:this.ctx.js,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:this.extend({size:this.dropdownMenuSize},this.elemMods)}),attrs:t.attrs,content:{block:"dropdown-menu",elem:"menu",title:t.menuTitle,type:t.type,elemMods:t.menuMods,mix:t.menuMix,content:t.content}})}),i("dropdown-menu").elem("menu").def()(function(){var t=this.ctx,e=t.type||"vert",n=this.elemMods;return n.theme||(n.theme="ffffff"),M({block:"b-menu-"+e,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:n}),title:t.title,content:t.content})}),i("b-menu-vert").match(function(){return this._inDropdownMenu})(l()(function(){return{role:"menu"}}),o("item").attrs()(function(){return{role:"menuitem"}})),i("b-menu-horiz").match(function(){return this._inDropdownMenu})(l()(function(){return{role:"menu"}}),o("item").attrs()(function(){return{role:"menuitem"}})),i("b-menu-vert")(m()(function(){return[this.ctx.title,{elem:"layout",content:this.ctx.content}]}),o("layout").tag()("ul"),o("item").match(function(){return!this._inItemContent}).wrap()(function(){
return this.position--,{elem:"layout-unit",content:[this.ctx,this.ctx["item-content"]]}}),o("item-content").def()(function(){return E({_inItemContent:!0})}),o("layout-unit")(u()("li"),f()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t})),o("item-selector").tag()("span"),o("submenu").tag()("ul")),i("b-menu-horiz")(d()(!0),o("item").wrap()(function(){return this.position--,{elem:"layout-unit",content:this.ctx}}),o("layout-unit").mix()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t}),o("item-selector").tag()("span")),i("user-menu-update").js()(!0),i("logo2")(m()(function(){return[{elem:"yandex",tld:this.ctx.tld},{elem:"service"}]}),o("yandex")(u()("a"),l()(function(){return{target:"_blank",href:"//yandex."+this.ctx.tld}})),o("service").tag()("span")),y(function(t,n){var i=t.BEMContext||n.BEMContext;i.prototype.require=function(t){return e[t]}})}),r.exportApply(i),i}var n=function t(e,i,o){function r(a,c){if(!i[a]){if(!e[a]){var u="function"==typeof n&&n;if(!c&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return r(n?n:t)},h,h.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function o(t,e,n){}function r(t,e,n){}function s(t,e,n){}function a(t,e,n){}function c(t){return t.replace(w,"&lt;").replace(D,"&gt;")}function u(t,e,n,i){if(n=m(n),"href"===e||"src"===e){if(n=M.trim(n),"#"===n)return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(P.lastIndex=0,P.test(n))return""}else if("style"===e){if(O.lastIndex=0,O.test(n))return"";if(F.lastIndex=0,F.test(n)&&(P.lastIndex=0,P.test(n)))return"";i!==!1&&(i=i||E,n=i.process(n))}return n=g(n)}function l(t){return t.replace(B,"&quot;")}function h(t){return t.replace(C,'"')}function d(t){return t.replace(S,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function p(t){return t.replace(T,":").replace(I," ")}function f(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return M.trim(e)}function m(t){return t=h(t),t=d(t),t=p(t),t=f(t)}function g(t){return t=l(t),t=c(t)}function _(){return""}function y(t,e){function n(e){return!!i||M.indexOf(t,e)!==-1}"function"!=typeof e&&(e=function(){});var i=!Array.isArray(t),o=[],r=!1;return{onIgnoreTag:function(t,i,s){if(n(t)){if(s.isClosing){var a="[/removed]",c=s.position+a.length;return o.push([r!==!1?r:s.position,c]),r=!1,a}return r||(r=s.position),"[removed]"}return e(t,i,s)},remove:function(t){var e="",n=0;return M.forEach(o,function(i){e+=t.slice(n,i[0]),n=i[1]}),e+=t.slice(n)}}}function v(t){return t.replace(N,"")}function b(t){var e=t.split("");return e=e.filter(function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}),e.join("")}var x=t("cssfilter").FilterCSS,k=t("cssfilter").getDefaultWhiteList,M=t("./util"),E=new x,w=/</g,D=/>/g,B=/"/g,C=/&quot;/g,S=/&#([a-zA-Z0-9]*);?/gim,T=/&colon;?/gim,I=/&newline;?/gim,P=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,O=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,F=/u\s*r\s*l\s*\(.*/gi,N=/<!--[\s\S]*?-->/g;n.whiteList=i(),n.getDefaultWhiteList=i,n.onTag=o,n.onIgnoreTag=r,n.onTagAttr=s,n.onIgnoreTagAttr=a,n.safeAttrValue=u,n.escapeHtml=c,n.escapeQuote=l,n.unescapeQuote=h,n.escapeHtmlEntities=d,n.escapeDangerHtml5Entities=p,n.clearNonPrintableCharacter=f,n.friendlyAttrValue=m,n.escapeAttrValue=g,n.onIgnoreTagStripAll=_,n.StripTagBody=y,n.stripCommentTag=v,n.stripBlankChar=b,n.cssFilter=E,n.getDefaultCSSWhiteList=k},{"./util":3,cssfilter:7}],2:[function(t,e,n){function i(t){var e=h.spaceIndex(t);if(e===-1)var n=t.slice(1,-1);else var n=t.slice(1,e+1);return n=h.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function o(t){return"</"===t.slice(0,2)}function r(t,e,n){"user strict";var r="",s=0,a=!1,c=!1,u=0,l=t.length,h="",d="";for(u=0;u<l;u++){var p=t.charAt(u);if(a===!1){if("<"===p){a=u;continue}}else if(c===!1){if("<"===p){r+=n(t.slice(s,u)),a=u,s=u;continue}if(">"===p){r+=n(t.slice(s,a)),h=t.slice(a,u+1),d=i(h),r+=e(a,r.length,d,h,o(h)),s=u+1,a=!1;continue}if(('"'===p||"'"===p)&&"="===t.charAt(u-1)){c=p;continue}}else if(p===c){c=!1;continue}}return s<t.length&&(r+=n(t.substr(s))),r}function s(t,e){"user strict";function n(t,n){if(t=h.trim(t),t=t.replace(d,"").toLowerCase(),!(t.length<1)){var i=e(t,n||"");i&&o.push(i)}}for(var i=0,o=[],r=!1,s=t.length,u=0;u<s;u++){var p,f,m=t.charAt(u);if(r!==!1||"="!==m)if(r===!1||u!==i||'"'!==m&&"'"!==m||"="!==t.charAt(u-1))if(/\s|\n|\t/.test(m)){if(t=t.replace(/\s|\n|\t/g," "),r===!1){if(f=a(t,u),f===-1){p=h.trim(t.slice(i,u)),n(p),r=!1,i=u+1;continue}u=f-1;continue}if(f=c(t,u-1),f===-1){p=h.trim(t.slice(i,u)),p=l(p),n(r,p),r=!1,i=u+1;continue}}else;else{if(f=t.indexOf(m,u+1),f===-1)break;p=h.trim(t.slice(i+1,f)),n(r,p),r=!1,u=f,i=u+1}else r=t.slice(i,u),i=u+1}return i<t.length&&(r===!1?n(t.slice(i)):n(r,l(h.trim(t.slice(i))))),h.trim(o.join(" "))}function a(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function c(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function u(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}function l(t){return u(t)?t.substr(1,t.length-2):t}var h=t("./util"),d=/[^a-zA-Z0-9_:\.\-]/gim;n.parseTag=r,n.parseAttr=s},{"./util":3}],3:[function(t,e,n){e.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,o;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}}},{}],4:[function(t,e,n){function i(t){return void 0===t||null===t}function o(t){var e=d.spaceIndex(t);if(e===-1)return{html:"",closing:"/"===t[t.length-2]};t=d.trim(t.slice(e+1,-1));var n="/"===t[t.length-1];return n&&(t=d.trim(t.slice(0,-1))),{html:t,closing:n}}function r(t){var e={};for(var n in t)e[n]=t[n];return e}function s(t){t=r(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=c.onIgnoreTagStripAll),t.whiteList=t.whiteList||c.whiteList,t.onTag=t.onTag||c.onTag,t.onTagAttr=t.onTagAttr||c.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||c.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||c.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||c.safeAttrValue,t.escapeHtml=t.escapeHtml||c.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new a(t.css))}var a=t("cssfilter").FilterCSS,c=t("./default"),u=t("./parser"),l=u.parseTag,h=u.parseAttr,d=t("./util");s.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,s=n.onTag,a=n.onIgnoreTag,u=n.onTagAttr,p=n.onIgnoreTagAttr,f=n.safeAttrValue,m=n.escapeHtml,g=e.cssFilter;n.stripBlankChar&&(t=c.stripBlankChar(t)),n.allowCommentTag||(t=c.stripCommentTag(t));var _=!1;if(n.stripIgnoreTagBody){var _=c.StripTagBody(n.stripIgnoreTagBody,a);a=_.onIgnoreTag}var y=l(t,function(t,e,n,c,l){var _={sourcePosition:t,position:e,isClosing:l,isWhite:n in r},y=s(n,c,_);if(!i(y))return y;if(_.isWhite){if(_.isClosing)return"</"+n+">";var v=o(c),b=r[n],x=h(v.html,function(t,e){var o=d.indexOf(b,t)!==-1,r=u(n,t,e,o);if(!i(r))return r;if(o)return e=f(n,t,e,g),e?t+'="'+e+'"':t;var r=p(n,t,e,o);return i(r)?void 0:r}),c="<"+n;return x&&(c+=" "+x),v.closing&&(c+=" /"),c+=">"}var y=a(n,c,_);return i(y)?m(c):y},m);return _&&(y=_.remove(y)),y},e.exports=s},{"./default":1,"./parser":2,"./util":3,cssfilter:7}],5:[function(t,e,n){function i(t){return void 0===t||null===t}function o(t){var e={};for(var n in t)e[n]=t[n];return e}function r(t){t=o(t||{}),t.whiteList=t.whiteList||s.whiteList,t.onAttr=t.onAttr||s.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||s.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||s.safeAttrValue,this.options=t}var s=t("./default"),a=t("./parser");t("./util");r.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,o=n.whiteList,r=n.onAttr,s=n.onIgnoreAttr,c=n.safeAttrValue,u=a(t,function(t,e,n,a,u){var l=o[n],h=!1;if(l===!0?h=l:"function"==typeof l?h=l(a):l instanceof RegExp&&(h=l.test(a)),h!==!0&&(h=!1),a=c(n,a)){var d={position:e,sourcePosition:t,source:u,isWhite:h};if(h){var p=r(n,a,d);return i(p)?n+":"+a:p}var p=s(n,a,d);return i(p)?void 0:p}});return u},e.exports=r},{"./default":6,"./parser":8,"./util":9}],6:[function(t,e,n){function i(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function o(t,e,n){}function r(t,e,n){}function s(t,e){return a.test(e)?"":e}var a=/javascript\s*\:/gim;n.whiteList=i(),n.getDefaultWhiteList=i,n.onAttr=o,n.onIgnoreAttr=r,n.safeAttrValue=s},{}],7:[function(t,e,n){function i(t,e){var n=new r(e);return n.process(t)}var o=t("./default"),r=t("./css");n=e.exports=i,n.FilterCSS=r;for(var s in o)n[s]=o[s];"undefined"!=typeof window&&(window.filterCSS=e.exports)},{"./css":5,"./default":6}],8:[function(t,e,n){function i(t,e){function n(){if(!r){var n=o.trim(t.slice(s,a)),i=n.indexOf(":");if(i!==-1){var u=o.trim(n.slice(0,i)),l=o.trim(n.slice(i+1));if(u){var h=e(s,c.length,u,l,n);h&&(c+=h+"; ")}}}s=a+1}t=o.trimRight(t),";"!==t[t.length-1]&&(t+=";");for(var i=t.length,r=!1,s=0,a=0,c="";a<i;a++){var u=t[a];if("/"===u&&"*"===t[a+1]){var l=t.indexOf("*/",a+2);if(l===-1)break;a=l+1,s=a+1,r=!1}else"("===u?r=!0:")"===u?r=!1:";"===u?r||n():"\n"===u&&n()}return o.trim(c)}var o=t("./util");e.exports=i},{"./util":9}],9:[function(t,e,n){e.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,o;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},{}],xss:[function(t,e,n){function i(t,e){var n=new s(e);return n.process(t)}var o=t("./default"),r=t("./parser"),s=t("./xss");n=e.exports=i,n.FilterXSS=s;for(var a in o)n[a]=o[a];for(var a in r)n[a]=r[a];"undefined"!=typeof window&&(window.filterXSS=e.exports)},{"./default":1,"./parser":2,"./xss":4}]},{},[]),i=!0;"object"==typeof module&&"object"==typeof module.exports&&(exports.BEMHTML=e({xss:n("xss")}),i=!1),"object"==typeof modules&&(modules.define("BEMHTML",[],function(t){t(e({xss:n("xss")}))}),i=!1),i&&(BEMHTML=e({xss:n("xss")}),t.BEMHTML=BEMHTML)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this),function(t){function e(t){var e=s(t);if(l)for(var n,i=0;n=p[i++];)t.hasOwnProperty(n)&&e.push(n);return e}function n(n,i,o){function r(e,o){var r=function(){var t=this.__base;this.__base=r.__base;var e=o.apply(this,arguments);return this.__base=t,e};return r.__base=n[e]?n[e]:"__constructor"===e?i.__self.__parent:t.noop,r}for(var s,a,c=e(o),l=0,h=c.length;l<h;)"__self"!==(s=c[l++])&&(a=o[s],i[s]=u(a)&&a.toString().indexOf(".__base")>-1?r(s,a):a)}function i(e,n){for(var i,o=1;i=e[o++];)n?u(i)?t.inheritSelf(n,i.prototype,i):t.inheritSelf(n,i):n=u(i)?t.inherit(e[0],i.prototype,i):t.inherit(e[0],i);return n||e[0]}var o=function(){},r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys,a=t.extend,c=Array.isArray,u=t.isFunction,l=!0,h={toString:""};for(var d in h)h.hasOwnProperty(d)&&(l=!1);var p=l?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=c(t[0]),s=e||u(t[0]),l=s?e?i(t[0]):t[0]:o,h=t[s?1:0]||{},d=t[s?2:1],p=h.__constructor||s&&l.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:s?function(){return l.apply(this,arguments)}:function(){};if(!s)return p.prototype=h,p.prototype.__self=p.prototype.constructor=p,a(p,d);a(p,l),p.__parent=l;var f=l.prototype,m=p.prototype=r(f);return m.__self=m.constructor=p,h&&n(f,m,h),d&&n(l,p,d),p},t.inheritSelf=function(){var t=arguments,e=c(t[0]),o=e?i(t[0],t[0][0]):t[0],r=t[1],s=t[2],a=o.prototype;return r&&n(a,a,r),s&&n(o,o,s),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,n="__"+Number(new Date),i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,r,s,a){if("string"==typeof i){t.isFunction(o)&&(s=r,r=o,o=void 0);for(var c,u=n(r,s),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),c=l[i]||(l[i]={ids:{},list:{}}),!(u in c.ids)){var p=c.list,f={fn:r,data:o,ctx:s,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[u]=p.last=f}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,r){if("string"==typeof i||"undefined"==typeof i){var s=this[e];if(s)if(i){for(var a,c=i.split(" "),u=0;i=c[u++];)if(i=this.buildEventName(i),a=s[i])if(o){var l=n(o,r),h=a.ids;if(l in h){var d=a.list,p=h[l],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var g=this;r=o,t.each(i,function(t,e){g.un(t,e,r)})}return this},trigger:function(n,i){var o,r=this,s=r[e];if("string"==typeof n?n=t.Event(r.buildEventName(o=n)):n.type=r.buildEventName(o=n.type),n.target||(n.target=r),s&&(s=s[n.type]))for(var a,c=s.list.first;c;)n.data=c.data,a=c.fn.call(c.ctx||r,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),c.special&&c.special.one&&r.un(o,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(t,e,i){if(c(t))return void(e[n(i,"*","*")]=t);var o,r,s;for(o in t)if(u(t,o))if(s=t[o],c(s))e[n(i,o,"*")]=s;else for(r in s)u(s,r)&&(e[n(i,o,r)]=s[r])}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;i<o;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}function r(t){t.onSetMod&&(i(t.onSetMod,t),delete t.onSetMod);var e,n;if(t.onElemSetMod){for(e in t.onElemSetMod)u(t.onElemSetMod,e)&&(n=t.onElemSetMod[e],i(n,t,e));delete t.onElemSetMod}}var s=[],a=t.inherit,c=t.isFunction,u=Function.prototype.call.bind(Object.prototype.hasOwnProperty),l={},h="_",d="__",p={};this.BEM=a(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,n,i,o){return"object"==typeof e&&(t.isFunction(n)||t.isFunction(i))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,n,i){return"object"==typeof e&&t.isFunction(n)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,n){var i=!0;return"object"!=typeof e||e instanceof t.Event||(i="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),i&&(this.__base(e=this.buildEvent(e),n),this._trigger(e,n)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,r=!1;1==o?(i="",n=t,t=e,r=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",r=!0));var s=this.getMod(t,n)===i;return r?!s:s},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache,o=e in i?i[e]:i[e]=this._extractModVal(e);return o}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,i=[].slice.call(arguments,e?1:0);return i.length?i.reduce(function(t,e){return e in n&&(t[e]=n[e]),t},{}):n},setMod:function(n,i,o){"undefined"==typeof o&&("string"==typeof n?(o="undefined"==typeof i||i,i=n,n=e):o=!0);var r=this;if(!n||n[0]){o===!1||null===o?o="":o!==!0&&(o=o.toString());var s=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[s])return r;var a,c=n?r._getElemMod(i,n,a=r.__self._extractElemNameFrom(n)):r.getMod(i);if(c===o)return r;this._processingMods[s]=!0;var u=!0,l=[i,o,c];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){u=r._callModFn(a,t[0],t[1],l)!==!1&&u}),!n&&u&&(r._modCache[i]=o),u&&r._afterSetMod(i,o,c,n,a),delete this._processingMods[s]}return r},_afterSetMod:function(t,e,n,i,o){var r={modName:t,modVal:e,oldModVal:n};i&&(r.elem=i),this.trigger({modName:t,modVal:"*",elem:o},r).trigger({modName:t,modVal:e,elem:o},r)},toggleMod:function(t,n,i,o,r){"string"==typeof t&&(r=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(r=o,o="");var s=this.getMod(t,n);return(s==i||s==o)&&this.setMod(t,n,"boolean"==typeof r?r?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,r){var s=n(t,i,o);return this[s]?this[s].apply(this,r):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:l,decl:function(n,i,s){"string"==typeof n?n={block:n}:n.name&&(n.block=n.name),r(i||(i={}));var u=l[n.baseBlock||n.block]||this;if(n.modName){var h=o(n.modName,n.modVal);t.each(i,function(t,n){c(n)&&(i[t]=function(){var o;if(h(this))o=n;else{var r=u.prototype[t];r&&r!==i[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(s&&"boolean"==typeof s.live){var d=s.live;s.live=function(){return d}}var p,f=u;return n.baseMix&&(f=[f],n.baseMix.forEach(function(t){f.push(l[t])})),n.block==u._name?(p=a.self(f,i,s))._processLive(!0):((p=l[n.block]=a(f,i,s))._name=n.block,delete p._liveInitable),p},declMix:function(t,e,n){return r(e||(e={})),t=l[t]=a(e,n)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new l[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,n,i,o){return"object"==typeof e&&(t.isFunction(n)||t.isFunction(i))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,n,i){return"object"==typeof e&&t.isFunction(n)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e=h+t.modName+h+(t.modVal===!1?"":t.modVal);return t.elem&&(e=d+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;t&&s.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);n<i;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(p[n]&&(p[n].un(),delete p[n])):p[n]||(p[n]=new t.observable)}}))}(jQuery),function(t,e,n){function i(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function o(t,e,n){null!=e&&e!==!1&&(n.push(c,t),e!==!0&&n.push(c,e))}function r(t,e,n,i){i.push(t),o(e,n,i)}function s(t,e,n,i,s){r(t,a,a,s),s.push(u,e),o(n,i,s)}var a,c="_",u="__",l="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:l,MOD_DELIM:c,ELEM_DELIM:u,buildModPostfix:function(t,e,n){var i=n||[];return o(t,e,i),n?i:i.join("")},buildClass:function(t,e,n,o,c){if(i(n)?i(o)||(c=o,o=n,n=e,e=a):"undefined"!=typeof n?(c=n,n=a):e&&"string"!=typeof e&&(c=e,e=a),!e&&"undefined"==typeof n&&!c)return t;var u=c||[];return e?s(t,e,n,o,u):r(t,n,o,u),c?u:u.join("")},buildClasses:function(t,i,o,a){i&&"string"!=typeof i&&(a=o,o=i,i=n);var c=a||[];return i?s(t,i,n,n,c):r(t,n,n,c),o&&e.each(o,function(e,n){n&&(c.push(" "),i?s(t,i,e,n,c):r(t,e,n,c))}),a?c:c.join("")}}}(BEM,jQuery),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(s,a){r(a,i,s,n);var c=f[a.uniqId];c?c.domElem.index(i)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(s,t,a)})}function o(t,i,o,s,c){"boolean"==typeof o&&(c=s,s=o,o=n);var u=i[0];o=r(o||a(u)[t],u,t);var l=o.uniqId;if(f[l])return f[l]._init();p[l]=p[l]?p[l].add(i):i;var h=u.parentNode;h&&11!==h.nodeType||e.unique(p[l]);var d=y[t]||C.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||s||o.live===!1){s&&i.addClass("i-bem");var m=new d(p[l],o,Boolean(s));return delete p[l],c&&c.apply(m,D.call(arguments,4)),m}}function r(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var r=e.identify(n),s=m[r]||(m[r]={});return s[i]||(s[i]=t),t}function s(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=c(t))}function c(t){var n,i,o=t.getAttribute("data-bem");return o?JSON.parse(o):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),o=i.attr("onclick")||i.attr("ondblclick"),o&&(n=new Function(o))),n?n():{})}function u(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},g={},_={},y=t.blocks,v=t.INTERNAL,b=v.NAME_PATTERN,x=v.MOD_DELIM,k=v.ELEM_DELIM,M=RegExp("[^"+x+"]"+x+"("+b+")(?:"+x+"("+b+"))?$"),E=v.buildModPostfix,w=v.buildClass,D=Array.prototype.slice,B=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},o._blockInsideCache={},f[o._uniqId=n.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var n=this._buildBlockCacheKey(t,e),i=this._findBlocks("find",t,e,!0);return this._blockInsideCache[n]=i,i},blockInside:function(t,e){var n=this._buildBlockCacheKey(t,e),i=this._blockInsideCache[n];return i||(i=this.findBlockInside(t,e)),i},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var n="string"==typeof e?e:w(e.block,e.modName,e.modVal),i="string"==typeof t?t:t.__bemElemName;return i+":"+n},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null;
},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,r,s){if(!this.domElem)return[];r||(r=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,c="string"==typeof r,u=c?r:r.block||r.blockName,l="."+(c?u:w(u,r.modName,r.modVal))+(s?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),s)return h[0]?o(u,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,n){var i=o(u,e(n),!0);p[i._uniqId]||(p[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,i,o,r){e.isFunction(o)&&(r=o,o=n);var s=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),r.apply(s,arguments)};return r?t.bind(s._buildEventName(i),o,(a.guid=r.guid=r.guid||e.guid++,a)):e.each(i,function(e,n){s.bindToDomElem(t,e,o,n)}),s},bindToDoc:function(t,e,n){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e,n)},bindToWin:function(t,i,o){e.isFunction(i)&&(o=i,i=n);var r,s,a=o;return"resize"===t&&(o=function(){var t=h.height(),e=h.width();r===t&&s===e||(r=t,s=e,a.apply(this,arguments))},o.guid=a.guid=a.guid||e.guid++),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,i,o)},bindTo:function(t,n,i,o){var r=arguments.length;switch(r){case 3:e.isFunction(i)&&(o=i,"object"==typeof n&&(i=n,n=t,t=this.domElem));break;case 2:e.isFunction(n)?(o=n,n=t,t=this.domElem):"string"==typeof t||t instanceof e||(i=n,n=t,t=this.domElem);break;case 1:n=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i,o)},unbindFromDomElem:function(t,e,n){return t.unbind(this._buildEventName(e),n),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(d,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(h,t,e)},unbindFrom:function(t,n,i){var o=arguments.length;return 1===o?(n=t,t=this.domElem):2===o&&e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,n,i)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var n="."+this._uniqId;if(t.indexOf(".")===-1)return e[t]=t+n,e[t];var i=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+i:i+"_"+t}).join("")+n,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,n){var i=this,o=g[i.__self._buildCtxEventName(t.type)],r={};o&&i.domElem.each(function(){for(var s=this,a=o.counter;s&&a;){var c=e.identify(s,!0);if(c){if(r[c])break;var u=o.ctxs[c];u&&(e.each(u,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),r[c]=!0}s=s.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,o=[].slice.call(arguments,e?1:0),r=this._extractMods(o,e?t:n);return e||(o.length?o.forEach(function(t){i[t]=r[t]}):i=r),r},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var r=e(this);r.__bemElemName=t.__bemElemName,o.setMod(r,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem).eq(0);return o.length&&(i=o.attr("class").match(this.__self._buildModValRE(t,n||e))),i?i[2]||!0:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(i?b:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(M);n[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,r){if(this._isDestructing)return this.__base.apply(this,arguments);var s=this.__self,a=s._buildModClassPrefix(t,r),c=s._buildModValRE(t,r,"g"),u=""===n||n===!1;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),r=a;n!==!0&&(r+=x+n),(i===!0?c.test(o):(" "+o).indexOf(" "+a+x)>-1)?t.attr("class",o.replace(c,u?"":"$1"+r)):u||t.addClass(r)}),r&&this.dropElemCache(r,t,i).dropElemCache(r,t,n),this.__base.apply(this,arguments)},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),r=E(n,i),a=[],c=e.map(function(t){return a.push("."+w(o,t,n,i)),t+r}),u=1===c.length,l=s(t,a.join(","));return t===this.domElem&&a.forEach(function(t,n){(this._elemCache[c[n]]=u?l:l.filter(t)).__bemElemName=e[n]},this),l},_elem:function(t,e,n){return this._elemCache[t+E(e,n)]||this.findElem(t,e,n)},elem:function(t,n,i){if(2===arguments.length&&(i=!0),n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,n,i))},this),o},dropElemCache:function(t,e,n){if(t){var i=E(e,n);t.indexOf(" ")<0?delete this._elemCache[t+i]:t.split(" ").forEach(function(t){delete this._elemCache[t+i]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[w(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=f[e.uniqId];i?i._isDestructing||l(i,n):delete p[e.uniqId]}),u(n)}),t||n.domElem.remove(),n.__base(),delete f[n.un()._uniqId],delete n.domElem,delete n._elemCache)}},{scope:null,doc:d,win:h,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this){var n="undefined"==typeof e;if(n^t){e=this.live()!==!1;var i=this.getName(),o=this.live;this.live=function(){return this.getName()===i?e:o.apply(this,arguments)}}}return e},init:function(t,n,o){!t||e.isFunction(t)?(o=n,n=t,t=d):"string"==typeof t&&(t=e(t));var r=e.identify();return s(t,".i-bem").each(function(){i(e(this),r)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),B.call(s(i,".i-bem",o)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=f[e.uniqId];i?l(i,n):delete p[e.uniqId]}}),u(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){return this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){return this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){return this.init(e(n).appendTo(t))},prepend:function(t,n){return this.init(e(n).prependTo(t))},before:function(t,n){return this.init(e(n).insertBefore(t))},after:function(t,n){return this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var r=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){r._liveClassBind(t,e,i,o)});else{var s=_[n],a=e.identify(i);s||(s=_[n]={},d.bind(n,r._liveClassTrigger.bind(r))),s=s[t]||(s[t]={uniqIds:{},fns:[]}),a in s.uniqIds||(s.fns.push({uniqId:a,fn:r._buildLiveEventFn(i,o)}),s.uniqIds[a]=s.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=_[n];if(o)if(i){if(o=o[t]){var r=e.identify(i);if(r in o.uniqIds){var s=o.uniqIds[r],a=o.fns.length-1;for(o.fns.splice(s,1);s<a;)o.uniqIds[o.fns[s++].uniqId]=s-1;delete o.uniqIds[r]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=_[t.type];if(n){var i=t.target,o=Object.keys(n);do for(var r,s=" "+i.className+" ",a=0;r=o[a++];)if(s.indexOf(" "+r+" ")!==-1){var c=!1;if(n[r].fns.forEach(function(n){n.fn.call(e(i),t)===!1&&(c=!0)}),c&&t.preventDefault(),c||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(r){var s=[i._name,((r.data||(r.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?s.concat([t,r]):s);if(a&&!n&&t)return t.apply(a,arguments)}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,r){i&&!e.isFunction(i)||(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var s=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){s._liveClassBind(w(s._name,e,t.modName,t.modVal),i,o,r)}),s):s._liveClassBind(w(s._name,t.elem,t.modName,t.modVal),i,o,r)},liveUnbindFrom:function(t,i,o){i&&!e.isFunction(i)||(o=i,i=t,t=n);var r=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){r._liveClassUnbind(w(r._name,t),i,o)}),r):r._liveClassUnbind(w(r._name,t),i,o)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return y[e].on(t,function(t){if(t.block.domElem){var e=arguments,r=t.block[i](o);n&&r.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,r,s){var a=this;if("object"==typeof i&&(e.isFunction(o)||e.isFunction(r))&&(i=this._buildModEventName(i)),"string"==typeof i)if(e.isFunction(o)&&(s=r,r=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,r,s)});else{var c=a._buildCtxEventName(i),u=g[c]||(g[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=u.ctxs[t];n||(n=u.ctxs[t]={},++u.counter),n[e.identify(r)+(s?e.identify(s):"")]={fn:r,data:o,ctx:s}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){"object"==typeof n&&e.isFunction(i)&&(n=this._buildModEventName(n));var r=this,s=g[n=r._buildCtxEventName(n)];return s&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=s.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],i&&!e.isEmptyObject(t)||(s.counter--,delete s.ctxs[n]))}),s.counter||delete g[n]),r},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:n},extractParams:c,_buildModClassPrefix:function(t,e){return this._name+(e?k+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+x+t},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+x+"("+b+"))?(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+k+"("+b+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+w(this._name,t,e,n)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),$(function(){BEM.afterCurrentEvent(function(){BEM.DOM.init()})}),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var s=jQuery.trim(o[r]);if(s.substring(0,t.length+1)==t+"="){i=decodeURIComponent(s.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,a="; expires="+c.toUTCString()}var u=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(t){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(n===-1)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(i===-1?e.substring(n):e.substring(n,i))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":n.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",r=e.block[o];r&&!n.data(o)&&(r.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return Boolean(t.getCookie("yandex_login"))}}(window.Lego),function(t,e){var n={};/msie|trident/i.test(e)?n.ie=parseInt(e.split(/msie|rv:/i)[1],10):e.indexOf("Opera")!==-1&&(n.opera=parseInt(e.split(/Version\//i)[1],10));var i,o={},r={};(i=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=i[1]:(i=e.match(/Android\s+([\d.]+)/))?o.android=i[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(i=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=i[1].replace(/_/g,"."),r.iphone=!0):(i=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=i[1].replace(/_/g,"."),r.ipad=!0):(i=e.match(/Bada\/([\d.]+)/))?o.bada=i[1]:(i=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(n){return t[n]&&(e=n)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=this.__self.ios||this.__self.android,e=t.split("."),n=e.shift(),i=e.join("-"),o=this.getMod("platform");return{platform:o,major:n,subversion:i}}}},{ios:o.ios,iphone:r.iphone,ipad:r.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:n.ie,opera:n.opera})}(window,navigator.userAgent),function(t){t.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,n=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),i=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error([BEM.I18N("b-statcounter__metrika","JSERR_incorrectID"),"block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?i():n.push(i)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:",n="//mc.yandex.ru/metrika/watch.js";!t&&$.ajax({url:e+n,dataType:"script",cache:!0}),this.loadMetrika=function(){}}})}(BEM.DOM),BEM.DOM.decl("b-statcounter__metrika",{addCounter:function(t){var e=t&&t.id||"",n=BEM.blocks["i-global"].param("login");t.params||(t.params={}),n?($.cookie("noSessionLogin"+e)&&(t.params.sessionLogin=!0,$.cookie("noSessionLogin"+e,"",{path:"/"})),t.params.login=!0):($.cookie("noSessionLogin"+e,1,{path:"/"}),t.params.login=!1),this.__base.apply(this,arguments)}}),function(t,e,n){function i(t,e){var n={},i=t.originalEvent||{};e||(e={});for(var o,r=0;r<c;r++)o=s[r],n[o]=e[o]||t[o]||i[o]||a[r];return n.x=n.clientX,n.y=n.clientY,n.pressure=n.pressure||(n.buttons?.5:0),n.buttons||u||(n.buttons=l[n.which]||0),n.originalEvent=t.originalEvent||null,e.preventDefault?n.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(n.preventDefault=function(){t.preventDefault()},n._preventScroll=function(){}),n}function o(t,e){var i=n.Event(t),o=e.preventDefault,r=i.preventDefault.bind(i);return jQuery.extend(i,e),i.preventDefault=function(){o(),r()},i}var r={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},s=Object.keys(r),a=s.map(function(t){return r[t]}),c=s.length,u=!1,l=[0,1,4,2];try{u=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var h=t.Map&&t.Map.prototype.forEach,d=h?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this.delete(t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}},p={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var n=e.events;n&&(n.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){return!!t.contains&&t.contains(e)},getCommonAncestor:function(t,n){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(n))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){n(t).on(e,this.boundHandler)},removeEvent:function(t,e){n(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=o(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,i){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=i,this.implicitRelease=this.releaseCapture.bind(this,t),n(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i}))},releaseCapture:function(t){var i=this.captureInfo[t];i&&(this.captureInfo[t]=void 0,n(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i})))},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return n.event.trigger(t,null,e,!t.bubbles)},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};p.boundHandler=p.eventHandler.bind(p);var f,m,g={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,r=0,s=n.length;r<s&&(e=n[r]);r++){var a=Math.abs(i-e.x),c=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return i(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(d.has(this.POINTER_ID)&&this.cancel(t),d.set(this.POINTER_ID,t),p.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||p.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=d.get(this.POINTER_ID);e&&e.button===t.button&&(p.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||p.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||p.leaveOut(this.prepareEvent(t))},cancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){d.delete(this.POINTER_ID)}},_={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===d.size||1===d.size&&d.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,r=t.identifier+2;return i(o,n.extend({},t,{pointerId:r,target:p.captureInfo[r]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var n=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,n=this.scrollTypes;return t===n.EMITTER?e="none":t===n.XSCROLLER?e="X":t===n.YSCROLLER?e="Y":n.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;var e,n,i=this.firstTouchTarget;do{if(e=i.getAttribute("touch-action"),null!==e)break;i=i.parentNode}while(i!==document);var o=this.touchActionToScrollType(e);if("none"===o)n=!1;else if("XY"===o||void 0===o)n=!0;else{var r=t.originalEvent.changedTouches[0],s=o,a="Y"===o?"X":"Y",c=Math.abs(r["client"+s]-this.firstXY[s]),u=Math.abs(r["client"+a]-this.firstXY[a]);n=c>=u}return this.shouldScrollCache=n,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var n,i=0,o=t.length;i<o&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(d.size>=e.length){var n=[];d.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){d.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),p.over(t),p.enter(t),p.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=d.get(t.pointerId);if(e){var n=e.out,i=e.outTarget;p.move(t),n&&i!==t.target&&(n.relatedTarget=t.target,t.relatedTarget=i,n.target=i,t.target?(p.leaveOut(n),p.enterOver(t)):(t.target=i,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(p.up(t),p.out(t),p.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){p.cancel(t),p.out(t),p.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){d.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=g.lastTouches;if(this.isPrimaryTouch(t)){var n={x:t.clientX,y:t.clientY};e.push(n);var i=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,n);setTimeout(i,this.DEDUP_TIMEOUT)}}},y={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},prepareEvent:function(t){var e=i(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){d.delete(t)},MSPointerDown:function(t){d.set(t.originalEvent.pointerId,t),p.down(this.prepareEvent(t))},MSPointerMove:function(t){p.move(this.prepareEvent(t))},MSPointerUp:function(t){p.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){p.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){p.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){p.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){p.fireEvent("lostpointercapture",this.prepareEvent(t))}},v=function(t){if(!d.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(f=function(t,e){t.setPointerCapture(e)},m=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(f=function(t,e){v(e),t.msSetPointerCapture(e)},m=function(t,e){v(e),t.msReleasePointerCapture(e)}):(f=function(t,e){v(e),p.setCapture(e,t)},m=function(t,e){v(e),p.releaseCapture(e,t)}),n.fn.extend({setPointerCapture:function(t){f(this[0],t)},releasePointerCapture:function(t){m(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,n="pointer"+t;e[n]||(e[n]={}),e[n].props=s.concat(e[n].props||[])}):(delete n.event.special.pointerenter,delete n.event.special.pointerleave,t.navigator.msPointerEnabled?p.registerSource("ms",y):(p.registerSource("mouse",g),void 0!==t.ontouchstart&&p.registerSource("touch",_)),p.register(document)))}(window,document,jQuery),function(t,e){function n(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),p))}function i(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,n=t.clientY,i="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var r=m[o];if(!r[i]&&!(Math.abs(e-r.clientX)>d||Math.abs(n-r.clientY)>d||r.target!==t.target&&document.elementFromPoint(r.clientX,r.clientY)===r.target)){t._sourcePoint=r,r[i]=t;break}}g.push(t),setTimeout(Array.prototype.shift.bind(g),p)}}function r(t){for(var e=0;e<g.length;e++)if(g[e]===t)return g[e]._sourcePoint}function s(t){var e=r(t);return Boolean(e)&&e.target!==t.target}function a(t){var n,i=t.type;return t.button||(t.type="pointerclick",n=e.event.dispatch.apply(this,arguments),t.type=i),n}if(!e.event.special.pointerclick){var c,u=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,l="touchAction"in document.documentElement.style,h=10,d=25,p=900,f=250,m=[],g=[],_=null,y=null,v=l?function(t){function e(t){return!(!t||t===document.documentElement)&&("manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement))}return e(t)}:function(){return!1};u?(c={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!v(t.target)))if("pointerdown"===e)y=t;else if("pointermove"===e&&y&&(y.target!==t.target||i(y,t)))y=null;else if("pointerleave"===e||"pointercancel"===e)y=null;else if("pointerup"===e){if(n(t),!y)return;if(!(t.timeStamp-y.timeStamp>f))return _||(_=setTimeout(function(){_=y=null})),a.apply(this,arguments);y=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),s(t)&&(t.preventDefault(),t.stopPropagation());
},!0)})):c={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(c)},teardown:function(){e(this).off(c)}}}}(window,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,n){function i(n){var i,o=n.type;return"mouse"===n.pointerType&&1!==n.which||(n.type=e,i=t.event.dispatch.apply(this,arguments),n.type=o),i}t.event.special[e]={setup:function(){t(this).on(n,i)},teardown:function(){t(this).off(n,i)}}})}(jQuery),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var n=this.domElem;e&&this.delMod("hovered"),this._href&&(e?n.removeAttr("href"):n.attr("href",this._href)),this.afterCurrentEvent(function(){n&&n.prop("disabled",e)})},pressed:function(t,e){return!this.hasMod("disabled")&&void this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return!this.isDisabled()&&(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return!this.isDisabled()&&void(!e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,n=t.keyCode;!this._keyDowned&&e.is(n,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,n===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),function(){function t(){n.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),n=$(document.documentElement),i=0,o=!1;document.documentMode<=9?n.on("focusin",function(e){var n=e.originalEvent;!n||n.fromElement||n.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),n.addClass("utilityfocus").on({focusin:function(){n.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(i),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(i),i=setTimeout(function(){o=!1},600)}})}(),$.extend({util:{}}),function(){function t(t){return"[object Object]"===i.call(t)}function e(n,i,o){var r,s;n=Object(n),i=Object(i);for(r in i)s=o&&o(n[r],i[r],r),void 0!==s?n[r]=s:t(n[r])&&t(i[r])?n[r]=e(n[r],i[r],o):n[r]=i[r];return n}function n(t,n){return e(t,n,function(t,e,n){if("mix"===n)return[].concat(t,e)})}var i=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:n})}(),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return!this.hasMod("disabled")&&void(this._focused||(this._focus(),this.trigger("focus")))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var n=this._getControl();n.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),n.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url||this.params._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href")||this.params._url,this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("tableau-node",{getDefaultParams:function(){var t=this.elem("header");return{headerElem:t.length>0?t:this.domElem,triggerElem:this.elem("trigger")}},onSetMod:{js:{inited:function(){var t=this._tableau=$.Tableau(this.params);$(t.getNode()).on("init open close destruct",function(t){this.trigger(t.type),t.stopPropagation()}.bind(this));var e=this.findBlockOn("input","input");if(e){var n=e.val();n&&t.setSearchText(n),e.on("change",function(){t.setSearchText(this.val())})}}}},getTableau:function(){return this._tableau},isOpened:function(){return this._tableau.isOpened()},isInited:function(){return this._tableau.isInited()},open:function(){return this._tableau.open(),this},close:function(){return this._tableau.close(),this},destruct:function(){this._tableau.destruct()}}),function(t,e){function n(o){if(!o.serviceId)throw new Error("Parameter 'serviceId' is required");if(this.constructor!==n)return new n(o);if(y&&this._addStyle(y),!o.device){if(1!==b.length)throw new Error("Parameter 'device' is required");o.device=b[0]}this._useDeviceSpecificMethods(o.device),this._params=o,this._isOpened=!1,this._isInited=!1,this._handlers=[],this._bindHandler(e(t),"message",i),this._$iframe=this._buildIframe(this._buildUrl(this._params)),this._$tail=this._buildTail(),this._$tableau=this._buildAndAppendTableau(this._params,this._$iframe,this._$tail),o.headerElem&&this._bindWiringHandlers()}function i(t){var e=t.originalEvent.data;if("string"==typeof e&&0===e.indexOf(d)){var n=e.split(":");switch(n[0]){case p:this._isInited=!0,this._isOpened&&this._open(),this._$tableau.trigger("init");break;case m:this._params.height||this._$tableau.height(parseInt(n[1],10)+2*g);break;case f:this.close()}}}var o="https://yastatic.net",r="/tableau/tableau.html",s="tableau",a=s+"_opened",c=s+"_closed",u=s+"_device_",l=s+"__content",h=s+"__tail",d="tableau.",p=d+"ready",f=d+"close",m=d+"height",g=1,_=150,y="",v=!1,b=[],x={};n.prototype.setSearchText=function(t){return this._postMessage({fnName:"updateUrls",fnArgs:[{text:t,serviceId:this._params.serviceId}]}),this},n.prototype._postMessage=function(t){function e(){n.postMessage(i,"*")}var n=this._$iframe[0].contentWindow,i=JSON.stringify(t);this._isInited?e():this._$tableau.on("init",e)},n.prototype.setPos=function(t){return"number"==typeof t.top&&(this._top=t.top),"number"==typeof t.left&&(this._left=t.left),"number"==typeof t.tail&&(this._tail=t.tail),this._isOpened&&this._reposition(),this},n.prototype._reposition=function(){"number"==typeof this._top&&this._$tableau.css("top",this._top-g),"number"==typeof this._left&&this._$tableau.css("left",this._left-g),"number"==typeof this._tail&&this._$tail.css("left",this._tail)},n.prototype.open=function(){var t=this._isOpened;return this._isOpened=!0,!t&&this._isInited&&this._open(),this},n.prototype._open=function(){this._reposition(),this._$tableau.removeClass(c).addClass(a),this._postMessage({fnName:"open"}),this._$tableau.trigger("open")},n.prototype.close=function(){var t=this._isOpened;return this._isOpened=!1,t&&this._isInited&&this._close(),this},n.prototype._close=function(){this._$tableau.removeClass(a);var t=this;setTimeout(function(){t._isOpened||t._$tableau.addClass(c)},_),this._$tableau.trigger("close")},n.prototype.isOpened=function(){return this._isOpened},n.prototype.isInited=function(){return this._isInited},n.prototype.getNode=function(){return this._$tableau[0]},n.prototype.destruct=function(){var t=this;e.when(this._$tableau.trigger("destruct")).done(function(){e.each(t._handlers,function(t,e){e.$node.off(e.event,e.callback)}),t._handlers=[],t._$tableau.remove()})},n.prototype._bindHandler=function(t,n,i){var o=e.proxy(i,this);return t.on(n,o),this._handlers.push({$node:t,event:n,callback:o}),this},n.prototype._buildUrl=function(t){var n={};e.each(["preset","lang","domain","device","target","serviceId"],function(e,i){var o=t[i];if(o){var r=i.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});n[r]=o}});var i=t.host||o,s=t.path||r;return i+s+(s.indexOf("?")>-1?"":"?"+e.param(n))},n.prototype._buildIframe=function(t){return e("<iframe/>",{class:l,src:t,frameborder:0,allowtransparency:!0})},n.prototype._buildTail=function(){return e("<div/>",{class:h})},n.prototype._buildAndAppendTableau=function(t,n,i){return e("<div/>",{class:[s,u+t.device,c].join(" "),css:{width:t.width+2*g,height:t.height&&t.height+2*g,zIndex:t.zIndex}}).append(i).append(n).appendTo("body")},n.prototype._addStyle=function(t){if(!v){var e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet?e.styleSheet.cssText=t:"textContent"in e?e.textContent=t:e.innerHTML=t,v=!0}},n._onDevice=function(t,n){function i(t,i){var o=x[i]||(x[i]={});e.each(n,function(t,e){var n=o[t]||(o[t]=[]);n.push(e)})}"string"==typeof t?(i(0,t),b.push(t)):e.each(t,i)},n.prototype._useDeviceSpecificMethods=function(t){var n=this,i=function(){};e.each(x[t],function(t,o){var r=n[t]?e.proxy(n[t],n):i;e.each(o,function(t,i){r=e.proxy(i,n,r)}),n[t]=r})},e.Tableau=n}(window,jQuery),function(t,e){var n=-2;e._onDevice(["desktop","touch-pad"],{_reposition:function(t){var e=this._params,i=e.headerElem;if(i){var o=e.triggerElem,r=this._$tableau,s=i.offset().top+i.outerHeight()+n,a=o.offset().left-r.offset().left+(o.outerWidth()-this._$tail.outerWidth())/2;this._top=Math.round(s),this._tail=Math.round(a)}t()}})}(jQuery,jQuery.Tableau),function(t,e){function n(){var t=this;this._clearToggleTimer(),this.isOpened()||this._mousePressed||(this._toggleTimer=setTimeout(function(){t.open(),t._toggleTimer=null},a))}function i(t){var e=this;this._clearToggleTimer()||o(t,this._params.triggerElem)||(this._toggleTimer=setTimeout(function(){e.close(),e._toggleTimer=null},a))}function o(t,e){var n=e.offset();return t.clientX>0&&t.clientY>0&&t.pageX<e.outerWidth()+n.left&&t.pageY<e.outerHeight()+n.top}function r(){this.isOpened()||this._clearToggleTimer(),this._mousePressed=!0}function s(){this._mousePressed=!1}var a=300;e._onDevice("desktop",{_bindWiringHandlers:function(e){e(),this._toggleTimer=null,this._mousePressed=!1;var o=this._params.triggerElem,a=t(document.body);this._bindHandler(o,"mousemove",n)._bindHandler(o,"mouseleave",i)._bindHandler(a,"mousedown",r)._bindHandler(a,"mouseup dragend",s)._bindHandler(this._$tableau,"mouseenter mousemove",n)._bindHandler(this._$tableau,"mouseleave",i)}}),e.prototype._clearToggleTimer=function(){return!!this._toggleTimer&&(clearTimeout(this._toggleTimer),this._toggleTimer=null,!0)}}(jQuery,jQuery.Tableau),BEM.DOM.decl({block:"tableau-node",modName:"global",modVal:"yes"},{getDefaultParams:function(){var t=BEM.blocks["i-global"];return $.extend(this.__base(),{serviceId:t.param("id"),preset:t.param("lang"),lang:t.param("lang"),domain:t.param("tld")})}}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),n=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",n?"&yu="+n:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this.elem("name").length){var t=this,e=t.elemParams("name");e.isUglyUserName&&BEM.blocks["i-user-services"].get(function(n){var i=BEM.blocks["i-common__string"].cleverSubstring,o=BEM.blocks["i-common__string"].escapeHTML,r=Object(n.displayName).name||n.login,s=i(r,e.maxLength,e.maxLengthRelative);s='<span class="user__first-letter">'+o(s.charAt(0))+"</span>"+o(s.slice(1)),t.elem("name").html(s),t.trigger("update-name")})}}}},toggleCollapsed:function(t){return this.toggleMod("hide-name","yes","",t)}}),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1===e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.blocks["cf-helpers"]={getStorage:function(t){var e=null;try{e="sessionStorage"===t?window[t]:window.localStorage,e.setItem("foo","bar"),e.removeItem("foo")}catch(t){return!1}return{storage:e,setItem:function(t,n){try{return"string"!=typeof n&&(n=JSON.stringify(n)),e.setItem(t,n),!0}catch(t){}return!1},getItem:function(t){try{return e.getItem(t)}catch(t){}return!1},getData:function(t){try{return JSON.parse(e.getItem(t))}catch(t){}return!1},removeItem:function(t){try{return e.removeItem(t),!0}catch(t){}return!1}}},jsonParseRevise:function(t){try{return JSON.parse(t)}catch(t){return!1}},buildPath:function(t){var e=BEM.blocks["i-global"].param("basePath");return(e+"/"+t).replace(/\/+/g,"/")},getDraftStorageKey:function(t){var e="form_draft_"+t;return window.name&&window.parent!==window&&(e+="_name_"+window.name),e}},BEM.DOM.decl("b-iframe",{onSetMod:{js:function(){var t=this,e=$(window),n=window.location.href,i=t.findBlockOn("b-page").getMod("type"),o=t.findBlockInside("need-auth");e.on("message",t.pingListener()),t.postMessage("ping"),t.postMessage({url:n,type:i}),e.on("beforeunload",function(){t.postMessage("unloading")}),setInterval(t.onChangeHeight(),300),o&&t.postMessage("need-auth")}},onChangeHeight:function(){var t=this;return function(e){var n,i,o=t.findBlockInside({block:"popup",modName:"visibility",modVal:"visible"});o&&(i=Math.max($("html").prop("scrollHeight"),t.domElem.prop("scrollHeight"))),n=o?i:t.domElem.outerHeight(),t.height!==n&&(t.height=n,t.postHeight())}},postHeight:function(){var t=this,e={};e["iframe-height"]=t.height,t.postMessage(e)},pingListener:function(){var t=this,e=t.params||{},n=e.xFrameOptions&&e.xFrameOptions.allowFrom||[];return function(e){var i,o=e.originalEvent,r=o.data,s=o.origin;s&&(s=s.replace(/:[0-9]+$/,"")),"pong"===r&&(i=new RegExp("(\\.("+n.join(")|(").replace(/[-.]/g,"\\$&")+"))$"),i.test(s)&&(t.removeAntiClickjack(),t.trigger("allowed",{origin:s})))}},removeAntiClickjack:function(){var t=this,e=document.getElementById("antiClickjack");e&&(e.parentNode.removeChild(e),t.postHeight())},height:0,postMessage:function(t){var e=window.parent||"",n=window.name||"",i=t;n&&("string"==typeof i?(e.postMessage(i,"*"),i={name:n,message:t}):i.name=n),"string"!=typeof i&&(i=JSON.stringify(i)),e.postMessage(i,"*")}},{}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"browser-corp"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t="id_email",e="id_message",n=$("label[for="+t+"]"),i=document.getElementById(t);if(i){i.placeholder=n.text();var o=$("label[for="+e+"]"),r=document.getElementById(e);r&&(r.placeholder=o.text())}}}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"browser-mgoodbye"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.collectData(),this.mustExit||this.bindEvents()}},collectData:function(){var t=$("input[value=17196]");if(!t.length)return void(this.mustExit=!0);this.checkbox=t.closest(".checkbox");var e=t.closest(".survey__checkbox-list"),n=this.findBlockOn(this.domElem,"i-global").params.lang||"ru",i=$(".lite__text");if(!i.length)return void(this.mustExit=!0);e.append('<div class="lite lite_turn_yes lite_lang_'+n+'"><div class="lite__img"></div><a class="lite__download" href="https://redirect.appmetrica.yandex.com/serve/241349155140689099"  target="_blank"></a></div>'),this.lite=this.findBlockInside("lite"),this.lite.elem("download").before(i);var o=this;this.findBlocksInside("checkbox").forEach(function(t){t.domElem[0]===o.checkbox[0]&&(o.checkbox=t)})},bindEvents:function(){var t=this;this.checkbox.on("change",function(e,n){t.lite.setMod("turn",!n.checked&&"yes")})}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"browser-promo-beta"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=$("label[for=id_answer_non_profile_email_29479]"),e=document.getElementById("id_answer_non_profile_email_29479");e&&(e.placeholder=t.text())}}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"developers"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.findBlockInside("survey"),e=t&&t.elem("hint")||[];e.length&&e.each(function(){var t=$(this),e=t.text(),n=t.closest(".survey-question").find(".input__control, .select__option:first");e&&n.length&&(n.hasClass("select__option")&&"--"===n.text()?n.text(e).closest(".select").bem("select").redraw():n.attr("placeholder",e),t.hide())}),$.each(this.findBlocksInside("select"),function(){this.setMod("empty",!this.val()&&"yes"),this.on("change",function(){this.setMod("empty",!this.val()&&"yes")})})}}}),BEM.DOM.decl({block:"survey",modName:"theme",modVal:"direct-mediaplans-send-mail"},{checkForm:function(t){var e=this.findBlockOn("survey-validation"),n=e.elem("message"),i=!1;return t?i=!0:n.each(function(t,n){if(e.hasMod($(n),"visibility","visible"))return i=!0,!1}),this.questions.forEach(function(t){var e=t.getValidators(),n=!0;e&&Object.keys(e).forEach(function(t){if(!e[t]())return n=!1,!1}),n||i?n&&i&&(n=!1):n=!0,t.setMod("validated",n?"yes":"no")}),this}}),BEM.DOM.decl({block:"survey-validation",modName:"theme",modVal:"direct-mediaplans-send-mail"},{onElemSetMod:{message:{visibility:function(){var t=this.findBlockOn("survey");t.checkForm(!0)}}}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"direct-mediaplans-send-mail"},{onSetMod:{js:function(){function t(t){var e=t.findBlockOutside("survey"),n=t.findBlockOutside("survey-validation"),i=t.findBlockInside("input"),o=e.findElem(t.domElem,"control"),r=e.findElem(t.domElem,"required"),s=e.findElem(t.domElem,"label"),a=n.findElem(t.domElem,"message"),c=$(BEMHTML.apply({block:"survey",elem:"required-and-label",tag:"td"}));BEM.DOM.after(o,c),BEM.DOM.append(c,r),BEM.DOM.append(c,s),a.each(function(t,e){BEM.DOM.before(i.domElem,e)})}var e,n,i,o,r;this.__base.apply(this,arguments),r=this.findBlockInside("survey-validation"),o=this.findBlockInside("survey"),i=this.findBlocksInside("survey-question"),i.forEach(function(t){~t.params.name.indexOf("non_profile_email")?e=t:~t.params.name.indexOf("short_text")&&(n=t)}),e&&n&&r&&o&&(r.setMod("theme","direct-mediaplans-send-mail"),o.setMod("theme","direct-mediaplans-send-mail"),o.checkForm(),o.domElem.on("submit",function(){o.checkForm()}),BEM.DOM.before(e.domElem,n.domElem),t(n),t(e))}}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"launcher-goodbye"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=$("label[for=id_another]"),e=document.getElementById("id_another");e&&(e.placeholder=t.text())}}}),BEM.DOM.decl({block:"b-iframe",modName:"theme",modVal:"tech-dev"},{onSetMod:{js:function(){var t,e=this;e.__base.apply(e,arguments),window!==window.top&&($(window).on("message",function(t){var e,n,i=t.originalEvent,o=i.data||"";o&&"string"==typeof o&&o.indexOf("survey-max-height")>-1&&(e=JSON.parse(o),n=e["survey-max-height"],n&&(n=n-$(".b-page .survey-title:eq(0)").outerHeight(!0)-$(".survey__submit-button").outerHeight(!0)-parseInt($(".survey__section").css("padding-top"),10),$(".survey__section").css("max-height",n)))}),t=window.location.href.indexOf("/success/")>-1?"success":"fail",e.postMessage(t))}}}),function(t,e){function n(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}function i(t){return h?h(t):"[object Array]"===d.call(t)}function o(t){return t&&"[object Object]"===d.call(t)}function r(t,e){var n;t=t||{},e=e||{};for(n in e)e.hasOwnProperty(n)&&null==t[n]&&(t[n]=e[n]);return t}function s(t,e,n){var i,o,r=[];if(!t)return r;if(l&&t.map===l)return t.map(e,n);for(i=0,o=t.length;i<o;i++)r[i]=e.call(n,t[i],i,t);return r}function a(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function c(t){var e=u.settings.currency.format;return"function"==typeof t&&(t=t()),n(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:n(e)?u.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}var u={};u.version="0.4.1",u.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var l=Array.prototype.map,h=Array.isArray,d=Object.prototype.toString,p=u.unformat=u.parse=function(t,e){if(i(t))return s(t,function(t){return p(t,e)});if(t=t||0,"number"==typeof t)return t;e=e||u.settings.number.decimal;var n=new RegExp("[^0-9-"+e+"]",["g"]),o=parseFloat((""+t).replace(/\((.*)\)/,"-$1").replace(n,"").replace(e,"."));return isNaN(o)?0:o},f=u.toFixed=function(t,e){e=a(e,u.settings.number.precision);var n=Math.pow(10,e);return(Math.round(u.unformat(t)*n)/n).toFixed(e)},m=u.formatNumber=u.format=function(t,e,n,c){if(i(t))return s(t,function(t){return m(t,e,n,c)});t=p(t);var l=r(o(e)?e:{precision:e,thousand:n,decimal:c},u.settings.number),h=a(l.precision),d=t<0?"-":"",g=parseInt(f(Math.abs(t||0),h),10)+"",_=g.length>3?g.length%3:0;return d+(_?g.substr(0,_)+l.thousand:"")+g.substr(_).replace(/(\d{3})(?=\d)/g,"$1"+l.thousand)+(h?l.decimal+f(Math.abs(t),h).split(".")[1]:"")},g=u.formatMoney=function(t,e,n,l,h,d){if(i(t))return s(t,function(t){return g(t,e,n,l,h,d)});t=p(t);var f=r(o(e)?e:{symbol:e,precision:n,thousand:l,decimal:h,format:d},u.settings.currency),_=c(f.format),y=t>0?_.pos:t<0?_.neg:_.zero;return y.replace("%s",f.symbol).replace("%v",m(Math.abs(t),a(f.precision),f.thousand,f.decimal))};u.formatColumn=function(t,e,l,h,d,f){if(!t)return[];var g=r(o(e)?e:{symbol:e,precision:l,thousand:h,decimal:d,format:f},u.settings.currency),_=c(g.format),y=_.pos.indexOf("%s")<_.pos.indexOf("%v"),v=0,b=s(t,function(t,e){if(i(t))return u.formatColumn(t,g);t=p(t);var n=t>0?_.pos:t<0?_.neg:_.zero,o=n.replace("%s",g.symbol).replace("%v",m(Math.abs(t),a(g.precision),g.thousand,g.decimal));return o.length>v&&(v=o.length),o});return s(b,function(t,e){return n(t)&&t.length<v?y?t.replace(g.symbol,g.symbol+new Array(v-t.length+1).join(" ")):new Array(v-t.length+1).join(" ")+t:t})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.accounting=u):"function"==typeof define&&define.amd?define([],function(){return u}):(u.noConflict=function(n){return function(){return t.accounting=n,u.noConflict=e,u}}(t.accounting),t.accounting=u)}(this),function(){BEM.DOM.decl("survey",{onSetMod:{js:function(){var t=this,e=t.params,n=t.findBlockOutside("b-iframe"),i=e.formId,o=BEM.blocks["cf-helpers"],r=o.getStorage("sessionStorage");t.parentOrigin="",t.questions=t.findBlocksInside("survey-question"),t.submitButton=t.findBlockInside("submit-button","button"),t.questions.forEach(function(e){var n=e.params,i=n.name;i&&(t.namedFields[i]=e)}),t.bindTo(t.elem("checkbox").find("a").add(t.elem("radiobox").find("a")),"pointerclick",function(t){t.stopPropagation()}),t.bindTo("captcha-updater","pointerclick",function(e){t.updateCaptcha(e)}),t.bindTo("submit",function(){t.collectClientData(),r&&r.removeItem(o.getDraftStorageKey(i))}),n&&n.on("allowed",function(e,n){t.parentOrigin=n.origin||""})}},submitButton:"",namedFields:{},collectClientData:function(){var t=this.domElem,e='<input type="hidden" value="">',n=this.collectPlugins(),i={date:new Date,js:!0,parent_origin:this.parentOrigin};n&&(i.plugins=n),Object.keys(i).forEach(function(n){t.find('input[name="'+n+'"]').remove(),$(e).attr("name",n).val(i[n]).prependTo(t)})},collectPlugins:function(){var t=[];return jQuery.each(navigator.plugins,function(e,n){var i=n.name;n.version?i+=", "+n.version:"Shockwave Flash"===n.name&&(i=n.description),t.indexOf(i)===-1&&t.push(i)}),t.join(" | ")},showAlert:function(t,e,n){var i=this,o=n||"";e&&t&&(i.closeAlert(),i.alert||(i.alert=i.findBlockOn($(BEMHTML.apply({block:"popup",mods:{theme:o.theme||"error",role:"survey-alert",autoclosable:"yes"},js:{directions:{to:o.direction||"bottom",axis:"left"},tail:{width:8,height:8}},content:[{elem:"tail"},{elem:"content"}]})),"popup"),BEM.DOM.append(i.domElem,i.alert.domElem)),i.alert.setContent(t).show(e))},closeAlert:function(){this.alert&&this.alert.hide()},updateCaptcha:function(t){function e(t){var e=t.image_url,n=t.key,r=i.parents(o.buildSelector("captcha"));r.find('input[type="hidden"]').attr("data-captcha-image-url",e).val(n),r.find(o.buildSelector("captcha-img")).attr("src",e)}function n(){o.delMod(i,"updating")}var i=t.data&&t.data.domElem||"",o=this,r=o.params;i&&!o.hasMod(i,"updating")&&(o.setMod(i,"updating","yes"),$.ajax({type:"POST",url:"/surveys/captcha/",dataType:"json",data:{_csrf:r.csrfToken},success:e,complete:n}))}})}(),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){return!this.hasMod("disabled")&&(e?this._focused||this._focus():this._focused&&this._blur(),void this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")}))}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var r=t.createTextRange();r.collapse(!1),e=o.compareEndPoints("EndToEnd",r)>-1?i:-o.moveEnd("character",-i)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return!this.hasMod("disabled","yes")&&void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._updateVal)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")}))}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),n=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||n)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes");
})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._updateVal()})}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",function(){this._updateValNextTick()}),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(n){n.setMod(t,e)})}},_onSampleClick:function(t,e){var n=this.elemParams(t);this.val("val"in n?n.val:t.text(),{source:"sample"})}},{live:function(){return this.liveBindTo("sample","pointerclick",function(t){this._onSampleClick(t.data.domElem,t)}),this.__base()}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){var e=BEM.blocks.keycodes.is(t.which,"UP","DOWN");if(e&&!t.shiftKey){t.preventDefault();var n=this._items.length,i=!1;if(n){var o=t.which-39,r=this._curItemIndex,s=0;do i=(0===r&&o===-1||r+o>=n)&&this._onLeaveItem(this._items[r],!0),r+=o,r<0?r=n-1:r>=n&&(r=0);while(!i&&this._onEnterItem(this._items[r],!0)===!1&&++s<n)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),n=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],i=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&n.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),i.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:i,js:o,content:{elem:"content",content:n}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},function(e,n){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){n.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var n=this._items,i=this._curItemIndex;i>-1&&n[i].delMod("hovered"),i=this._getItemIndex(t),i>-1&&n[i].setMod("hovered","yes"),this._curItemIndex=i,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(t.enter()!==!1?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var n=this._curItemIndex;return n>-1&&n===this._getItemIndex(t)&&(this._items[n].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var n=t.select(e||!1),i="object"==typeof n?n.needUpdate:n!==!1,o="object"==typeof n&&n.needEvent;this._preventRequest=!0,i&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),i||(this._preventHide=!0),this.afterCurrentEvent(function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(i||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var n=t._getPopup(),i=e.items||e;t.foot&&i.length&&$.inArray(t.foot,i)===-1&&i.push(t.foot),i.length?(t._curItemIndex=-1,BEM.DOM.update(n.elem("items"),t._buildItemsHtml(i),function(){n.isShown()||(n.show(t.elem("box")),t._setWidth()),t._items=n.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):n.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t,n){var i,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(i=t.concat().pop())&&$.extend(o,i),o}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),BEM.DOM.decl({block:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:function(){var t=this;t.__base.apply(t,arguments),t.on("update-items",function(){$(window).trigger("onConsiderScrollHeight")}),t.on("blur",function(){$(window).trigger("unConsiderScrollHeight")})}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,n,i){return $.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i)),this},_get:function(e,n,i,o){var r=this._buildCacheKey(e,o),s=t[o.cacheGroup];o.cache&&s&&r in s.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,s.data[r])},this):this._do(e,n,i,o)},_do:function(t,e,n,i){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var r=this._buildCacheKey(n,e);return o.data[r]=i,o.keys.push(r),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var r=arguments,s={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,r,s){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(r,s)&&e.apply(i.callbackCtx,n)}),c=o._wrapCallback(function(t,e,s){o._allowCallback(e,s)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,r)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(i.paramsToSettings||[]),function(t,e){s[e]=i[e]}),$.ajax(s).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,n=this._repackDirParams(t.directions),i=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(i);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var n="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+n).bem(n)}var i=this._findParent(e);i&&this.setParent(i)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var n=this;return this.beforeHide(function(){n.domElem&&n.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,n=e.length,i=0;i<n;i++)if(e[i]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,n=e.length,i=0;i<n;i++)if(e[i]._uniqId===t._uniqId)return void e.splice(i,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,n){var i={},o=Object.prototype.hasOwnProperty;return n||(n={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(r){var s=o.call(n,r)?n[r].call(this,t[r],e[r]):e[r];!s||"object"!=typeof s||Array.isArray(s)?i[r]=s:t[r]?i[r]=this._mergeParams(t[r],s,n):i[r]=s},this),i},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],n=e,i=t.length,o=[],r=0;r<i;r++)for(var s=t[r],a=s.length,c=0;c<a;c++)for(var u=e[r],l=u.length,h=0;h<l;h++)for(var d=n[r],p=d.length,f=0;f<p;f++)o.push({direction:s[c],axis:u[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},n=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),n=t.map(function(t){if("string"==typeof t){var n=t.split("-");t={to:n[0],tail:{}},n[1]&&(t.axis=n[1]),n[2]&&(t.tail.axis=n[2])}var i=t.to;return e[i]||(e[i]=t),t.axis&&(i+="-"+t.axis),t.key=i,e[i]=t,i},this),{directions:e,keys:n}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,n=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;t<n;t++){var i=e[t],o=this._directions[i];this._resetPos(i)._pushPos(i,this._calcPos(o))._pushPos(i,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(i)._pushTailPos(i,this._calcTailPos(o))._pushTailPos(i,this._calcTailOffset(o))._pushPos(i,this._calcOffsetByTail(o)),this._pushPos(i,this._getParentOffset());var r=this._calcVisibilityFactor(o);if((r>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=r,this._direction=this._directions[i],this.size=this.getPlacingSize(),100===r))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),n=this.getOwnerSize(),i=this.getPlacingSize(),o=t.axis,r=this.params.position||{},s={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":s={top:a.call(r,"top")?r.top:e.top+n.height,left:a.call(r,"left")?r.left:this._calcLeft(o)};break;case"top":s={top:a.call(r,"top")?r.top:e.top-i.height,left:a.call(r,"left")?r.left:this._calcLeft(o)};break;case"left":s={top:a.call(r,"top")?r.top:this._calcTop(o),left:a.call(r,"left")?r.left:e.left-i.width};break;case"right":s={top:a.call(r,"top")?r.top:this._calcTop(o),left:a.call(r,"left")?r.left:e.left+n.width}}return s},_calcTop:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=i.top:"middle"===t?e+=i.top+o.height/2-n.height/2:"bottom"===t&&(e+=i.top+o.height-n.height),e},_calcLeft:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=i.left:"center"===t?e+=i.left+o.width/2-n.width/2:"right"===t&&(e+=i.left+o.width-n.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,n=this._cache.offset||(this._cache.offset={}),i=t.key,o=t.offset;if(n[i])return n[i];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(i){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return n[i]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,n){n!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),n):(n=e,Object.keys(t).forEach(function(e){this._sum(t[e],n)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(n){t[n]=(t[n]||0)+e[n]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,n,i=this._viewport,o=this._getSizeOf(i),r=this.getPopupSize(),s=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:i.scrollTop(),left:i.scrollLeft()},u=s.top+a.top-c.top,l=s.left+a.left-c.left,h=l+r.width-o.width,d=u+r.height-o.height,p={height:r.height,width:r.width},f=100;return d>0&&(p.height-=d),u<0&&(p.height+=u),l<0&&(p.width+=l),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(n=Math.abs(p.height*p.width),e=r.height*r.width,e!==n&&(f=n/e*100)),f},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,n=t[e],i=this._zIndex;return n||(n=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=n[n.length-1]+1,n.push(this._zIndex),this._zIndex!==i&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var n="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(n=""),t.find(n+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),n=!0;return!(parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility"))&&($(this).parentsUntil(e).each(function(){var t=$(this);if("none"===t.css("display"))return n=!1}),n)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)return void(this._preventHideByClick=null);if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var n,i=this._childs.length;for(n=0;n<i;n++)if(this.containsDomElem.call({domElem:this._childs[n].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,n=this.getCurrPos(),i={opacity:1,top:n.top,left:n.left},o={opacity:0,top:n.top,left:n.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(i,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var n=e.to,i=this.getCurrPos(),o=this.domElem,r={top:i.top,left:i.left,opacity:0};return"bottom"===n?r.top+=10:"top"===n?r.top-=10:"left"===n?r.left-=10:"right"===n&&(r.left+=10),o.stop(!0,!0).animate(r,this.params.duration,function(){t(),o.css("opacity","")})}}),$.extend({debounce:function(t,e,n,i){var o,r=function(){var r=arguments;i=i||this,n&&!o&&t.apply(i,r),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,r),o=null},e)};return 3===arguments.length&&"boolean"!=typeof n&&(i=n,n=!1),r.stop=function(){clearTimeout(o),o=null},r},throttle:function(t,e,n){var i,o,r,s=function(){o=arguments,r=!0,n=n||this,i||function(){r?(t.apply(n,o),r=!1,i=setTimeout(arguments.callee,e)):i=null}()};return s.stop=function(){clearTimeout(i),i=null},s}}),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function o(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function r(t,n){var i,o=e.isArray(n);return e.isArray(t)?o?i=t.concat(n):(i=t).push(n):o?(i=n).unshift(t):i=[t,n],i}function s(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var r=d[t.block]||(d[t.block]={});n.onBlock&&i(r,"_block",o(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(r,"_elem",o(n.onElem,t)):e.each(n.onElem,function(e,n){i(r,"_elem"+("*"===e?"":c+e),o(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,o){var r=this,s=r._params;return"undefined"==typeof n?s[t]:(!i&&t in s?o&&(s[t]=e.extend(n,s[t])):s[t]=n,r)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var o=i._params.attrs;return o?(n||!(t in o))&&(o[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var o=i._params.mods;return o?(n||!(t in o))&&(o[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(!e&&"mix"in i?i.mix=i.mix.concat(t):i.mix=t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){
var e=this,n=e._params;return n.content=r(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=r(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var o=n._tParamsChanges||(n._tParamsChanges={});return t in o||(o[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,o=typeof i;if("string"===o||"number"===o)n.push(i);else if(e.isArray(i))for(var r,s,a=0,c=i.length;a<c;)t._params=r=i[a++],s=typeof r,"string"===s||"number"===s?n.push(r):r&&(r._pos=a,r._siblingsCount=c,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,o=n._params,r=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||n._curBlock.block),d=!1;o.js&&((t={})[l(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),i.push("<",r),(a||o.cls)&&(i.push(' class="'),a&&(h(c,o.elem,o.mods,i),o.mix&&e.each(o.mix,function(e,n){n&&(i.push(" "),h(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,d||(d=!n.elem)))})),o.cls&&i.push(a?" ":"",o.cls),d&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',s(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[r]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",r,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=d[t._curBlock.block];if(o){var r;if(i.elem?(r=o["_elem"+c+i.elem],o._elem&&(r=r?r.concat(o._elem):o._elem)):r=o._block,r)for(var s,a=0;(s=r[a++])&&(s(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)})},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],o=0,r=e.sort(function(t,e){return t[0]-e[0]}),s=[],a="?",c=t.indexOf(a)!==-1,u=function(){for(var e,n=/\&(#\d+|#x[a-f\d]+|\w+);/gi;e=n.exec(t);)s.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;t.indexOf(a)!==-1&&s.length;)t=t.replace(a,s[0]),s.shift();return t};return!c&&u(),r.forEach(function(e){n=o>e[0]?o:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(o,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,o=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(o))}),i}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",function(t){this.trigger(t.type)}),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),n=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",!!t.param("pers")&&"yes").content(BEM.blocks["b-autocomplete-item"].highlight(n,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"nav",modVal:"yes"},{enter:function(){return!1},select:function(t){return t&&$('<form style="display:none" action="'+this.val()+'" target="_blank"/>').appendTo("body").submit().remove(),{needEvent:!0}}},{getUrl:function(t){return(t.match(/^\w[\w-]*:\/\//g)?"":"http://")+t}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onSetMod:{js:{inited:function(){this.setMod("nav","yes")}}},enter:function(){return this.__base.apply(this,arguments)},select:function(){return this.__base.apply(this,arguments)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(t){var e=t.param("data"),n=4===t.param("suggestVersion"),i=e[4]||e[3],o=(i.match(/^\w[\w-]*:\/\//g)?"":"http://")+i;t.js({val:o}).content({elem:"link",url:o,title:BEM.blocks["i-common__string"].escapeHTML(n?e[3]:e[2]),description:BEM.blocks["b-autocomplete-item"].highlight(n?e[2]:e[1],t.param("hl"))})},onElem:{link:function(t){t.tag("a").attrs({href:t.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:t.param("title")},{elem:"link-info",tag:"span",content:[" — "].concat(t.param("description"))}])}}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(t){t.mod("enterable","no").content($.map(t.param("data").slice(1),function(t){return $.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"lingvo"},{onBlock:function(t){var e=t.param("data")[1];t.content([{tag:"span",elem:"text",content:e.text},{tag:"span",elem:"translation",content:[" — ",e.translation]}])}}),BEM.DOM.decl("input",{onElemSetMod:{message:{visibility:function(t,e,n){var i=this,o=i.getMod(t,"type");if(o){var r=!0;n||i.elem("message","type",o).each(function(){this!==t[0]&&i.hasMod($(this),"visibility","visible")&&(r=!1)}),r&&i.toggleMod("message-"+o,"yes","","visible"===n)}}}}}),BEM.DOM.decl({block:"textinput",baseBlock:"control"},{onSetMod:{js:{inited:function(){this._control=this.elem("control"),this._text=this._control.val()}}},getText:function(){return this._text},setText:function(t){return t===this._text?this:(this._control.val(t),this._textChange(),this)},_textChange:function(t){var e=this._control.val(),n=this._text,i=Boolean(e!==n);if(!i)return!1;this._text=e;var o={text:e,oldText:n,byCode:t};this.trigger("change",o)}},{live:function(){return this.liveBindTo("control","input",function(){this._textChange()}),this.__base()}}),BEM.DOM.decl({block:"textinput"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.autofocus&&this.setMod("focused","yes")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._textChange()})}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._textChange)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")})),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._textChange),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl({block:"textinput",modName:"has-clear",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base(),this._clear=this.elem("clear"),this.on("change",this._updateClearOnInputChange)}}},_updateClearOnInputChange:function(){this.toggleMod(this._clear,"visible","yes","",Boolean(this.getText()))},_onClearPointerclick:function(){this.setText("").setMod("focused","yes").elem("control").focus()},_onClearPointerover:function(){this.setMod(this._clear,"hovered","yes").bindTo(this._clear,"pointerout",this._onClearPointerout)},_onClearPointerout:function(){this.delMod(this._clear,"hovered").unbindFrom(this._clear,"pointerout")},_preventLosingFocus:function(t){this.hasMod("focused")&&(t.preventDefault(),t.stopPropagation())}},{live:function(){return this.liveBindTo("clear","pointerclick",function(t){this._onClearPointerclick(t)}).liveBindTo("clear","pointerover",function(t){this._onClearPointerover(t)}).liveBindTo("clear","mousedown touchend",function(t){this._preventLosingFocus(t)}),this.__base()}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",e),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.domElem[0]===t.target&&this._onChange(t),this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){var t=this;t.__base.apply(t,arguments),t.bindTo("pointerclick",function(t){var e=$(t.target).prop("tagName");e&&"a"===e.toLowerCase()&&t.stopPropagation()})}}}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var n=$(e),i=this.__self._getRadioByElem(n);n.isFocused()&&this.setMod(i,"focused","yes"),n.prop("checked")&&this.setMod(i,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),n=this.findElem(t,"control"),i=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,n.prop("checked",!0),this._val=n.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:i})},"":function(t){var e=this.findElem(t,"control"),n=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:n})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,n){t.find(this.buildSelector("control")).prop("disabled",n),n&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(n,i){if(i.value===t)return e.setMod(e.__self._getRadioByElem($(i)),"checked","yes"),!1}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var n=this.findElem(e,"control");n.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||n.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}),this.__base()}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return!this.hasMod("disabled")&&(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var n,i=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(n=$(this).parent("optgroup")[0],!(n&&n.disabled))&&(i=e)}),i>-1&&this._selectedIndex(i,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var n=this._getSelectedIndex();return"undefined"==typeof t||t===n?n:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:n},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){if(this._isParentPopup()){var t=this._popup._parent;(t.repaint||t.redraw).call(t)}return this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,n=t.keyCode===e.UP,i=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,r=t.keyCode===e.SPACE;if(n||i){if(t.preventDefault(),!this.isOpened())return this.open();var s=this._items.length,a=this._curItemIndex;if(n&&0===a||i&&a>s-2)return;if(s){var c,u=i?1:-1;for(c=a;c>=0&&c<=s;)if(c+=u,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||r)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,n){this.elem("button").attr("aria-activedescendant",t.attr("id"));var i=this._curItemIndex,o=this._getItemIndex(t),r=this._items;i>-1&&this.delMod(r.eq(i),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(r.eq(o),"hovered","yes")),n&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function t(e,n,i){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{opened:function(){var t=this;t.__base.apply(t,arguments),t.hasMod("opened")?$(window).trigger("unConsiderScrollHeight"):$(window).trigger("onConsiderScrollHeight")}}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,n=this._getPopup().domElem;return BEM.DOM.update(this.findElem(n,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(n,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){function e(t,e,n){var i={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||"   "},elemMods:{}};return n&&(i.elemMods=n),i}function n(t,i){var c=t.length;if(c){var u=0;do{var l=$(t[u]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&u>0&&r.push(o),s.push(r),r=[],r.push(e(l,l.attr("label"),$.extend({label:"yes"},h,i))),n(l.children(),$.extend({inner:"yes"},h,i));var d=r;r=s.pop(),r.push({block:"select",elem:"group",content:d})}else r.push(e(l,l.html(),$.extend(h,l.is(":selected")&&{selected:"yes"},i)))}while(++u<c||(a=!1))}}var i="select",o={block:i,elem:"separator",tag:"i"},r=[],s=[],a=!1;return n(t),BEMHTML.apply(r)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,n=t.__self.getName(),i=this._getPopupContent(n),o=this._getPopupMix(n),r={animate:"no"},s={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(r,e.popupMods),$.extend(s,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:r,mix:o,js:s,content:{elem:"content",content:i}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,n){t._isOutsideClicked(e,n)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,n){t._popup.containsDomElem($(n.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var n=parseInt(e.domElem.css("height"),10),i=t*this._rowHeight;n!==i&&(e.setSize({height:i}),n>i&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,n=this._popupContent,i=n.scrollTop(),o=e-i,r=2*this._rowHeight;o>n.height()-r?t=e-r:i&&o<r&&(t=e-n.height()+r),t&&n.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl({block:"select",modName:"to",modVal:"bottom"},{getDefaultParams:function(){return $.extend(this.__base(),{popupMods:{adaptive:"no"},popupParams:{to:"bottom"}})}}),BEM.DOM.decl({block:"select",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){this.suggestBlock=this.findBlockOn("suggest","input"),this.__base.apply(this,arguments),this.eventBinders(),this.collectItemData()}},opened:{"":function(){this.__base.apply(this,arguments),this.suggestBlock._blur()}}},eventBinders:function(){var t=this;this.suggestBlock.on("focus",function(){t.suggestBlock.val(""),t.setSelected(),t.resetFilter(),t.open(),t.setMod("focused","yes")}),this.suggestBlock.on("blur",function(){t.isOpened()&&t.close(),t.updateSuggestBlock(),t.delMod("focused")}),this.suggestBlock.bindTo("control","input",function(){t.filterItems(t.suggestBlock.val()),t._drawPopup()}),this.on("change",function(e,n){t.setSelected(),n.prev>-1&&t.suggestBlock._blur()}),window.top.location!==window.location&&this.on("blur",function(){t.suggestBlock._blur()})},collectItemData:function(){var t=this;this._itemsData=[],this.elem("option").each(function(e,n){t._itemsData.push({value:n.value,content:n.label,item:"option"})})},setSelected:function(){var t=this.val();this._itemsData.forEach(function(e){e.selected=e.value===t})},filterItems:function(t){var e;t=t.toLowerCase(),e=t.length?this._itemsData.filter(function(e){return e.content.toLowerCase().indexOf(t)>-1||""===e.value}):this._itemsData,this.setOptions(e)},resetFilter:function(){BEM.DOM.update(this.elem("control"),BEMHTML.apply(this._itemsData.map(this.__self._buildOption))),this._popup&&this._redrawList()},updateSuggestBlock:function(){this.suggestBlock.val(this._getSelectedText())},_setButtonText:function(t){this.__base.apply(this,arguments),this.isOpened()||this.suggestBlock.val(t)}}),BEM.DOM.decl("attach",{onSetMod:{js:{inited:function(){this._noFileText=this.elem("text").text(),this._filePath="",this._setFilePath(""),this.bindTo("reset","pointerclick",this.resetFile)}},disabled:function(t,e){this.elem("control").prop("disabled",e),this.getButton().setMod("disabled",e)}},val:function(){return this._filePath},getButton:function(){return this._button||(this._button=this.findBlockOn("button","button2")||this.findBlockOn("button","button"))},resetFile:function(){if(!this.hasMod("disabled")){var t=this.elem("control");return t.val(""),t.replaceWith(t.clone()),this.dropElemCache("control"),this.getButton().dropElemCache("control"),this._setFilePath(""),this.trigger("reset")}},_setFilePath:function(t,e){var n=this._filePath;this._filePath=t;var i=t.split("\\").pop(),o=i.split(".").pop().toLowerCase();this.setMod(this.elem("holder"),"file",this._extensionsToMods[o]||this.params.unknownType),this.toggleMod(this.elem("holder"),"state","hidden",!i),this.elem("text").text(i||this._noFileText),(e||t!==n)&&this.trigger("change")},_update:function(){this._setFilePath(this.elem("control").val(),!0)},_extensionsToMods:{zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",gif:"gif",jpg:"jpg",jpeg:"jpg",png:"png",eml:"eml",exe:"exe",m4a:"audio",ogg:"audio",mp3:"mp3",wav:"wav",wma:"wma",flv:"video",mov:"mov",wmv:"wmv",mp4:"mp4",avi:"avi",xls:"xls",doc:"doc",docx:"doc",txt:"txt",pdf:"pdf",ppt:"ppt"},getDefaultParams:function(){return{unknownType:"unknown"}}},{live:function(){this.liveBindTo("change",function(){this._update()})}}),BEM.DOM.decl("date-input",{onSetMod:{js:function(){var t=this,e=t.elem("iso-date");t.calendar=t.findBlockInside("control","m-calendar"),t.calendar.on("change",function(n,i){return i?(e.val(BEM.blocks["mi-helpers"].dateFormat(i,"yyyy-mm-dd")),void t.trigger("change")):void e.val("")})}},val:function(t){return t&&t instanceof Date?(this.calendar.setDate(t.toISOString()),this):this.calendar.getDate()}}),BEM.blocks["mi-helpers"]={getDateFromHumanString:function(t){var e,n=Math.abs(-(t.search(/\./)+1)||-(t.search("Z")+1)),i=t;return i=i.replace(/-/g,",").replace("T",",").replace(/:/g,","),i=n?i.substr(0,n-1):i,i=i.split(","),i[1]=i[1]-1,e=this.getUTC_YMD(i[0],i[1],i[2]),i[3]&&e.setHours(i[3]),i[4]&&e.setMinutes(i[4]),i[5]&&e.setSeconds(i[5]),e},getUTC_YMD:function(t,e,n){var i=new Date(Date.UTC(2e3,10));return i.setUTCFullYear(t),i.setUTCMonth(e),i.setUTCDate(n),i.setUTCMinutes(i.getMinutes()+i.getTimezoneOffset()),i},getHumanStringFromDate:function(t){var e,n,i,o,r,s,a,c;return t&&t.date?(n=t.date,i=n.getFullYear(),o=(n.getMonth()+1).toString(),r=n.getDate().toString(),s=n.getHours().toString(),a=n.getMinutes().toString(),c=n.getSeconds().toString(),1===o.length&&(o="0"+o),e=i+"-"+o,t.needDay!==!1&&(1===r.length&&(r="0"+r),e=e+"-"+r,t.needHours&&(1===s.length&&(s="0"+s),e=e+"T"+s,t.needMinutes&&(1===a.length&&(a="0"+a),e=e+":"+a,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e):null},validateNumberOnlyInput:function(t){var e,n,i,o=!1,r=t.target,s=$(r),a=r.selectionStart,c=s.val(),u=/^[-|\d]{1}\d{0,}(?:[.,]{0,1}\d{0,})$/,l=u.exec(c);if(!l&&c.length){for(e=0;e<c.length;e++)if(n=c.substr(0,e)+c.substr(e+1,c.length),u.exec(n)){s.val(n),r.setSelectionRange(a-1,a-1),o=!0;break}o||(i=/\d+(?:[.,]{0,1}\d{0,})/.exec(c),
s.val(i?i[0]:""))}},isVisible:function(t){var e,n=BEM.DOM.win.get(0),i=BEM.DOM.doc.get(0);return t===i||!(!t||!t.parentNode)&&((!t.style||"none"!==t.style.display&&"hidden"!==t.style.visibility)&&((!n.getComputedStyle||(e=n.getComputedStyle(t,""),"none"!==e.display&&"hidden"!==e.visibility))&&this.isVisible(t.parentNode)))},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},o={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};return function(r,s,a){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(r)||/\d/.test(r)||(s=r,r=void 0);try{if(r=r?new Date(r):new Date,isNaN(r))throw SyntaxError("invalid date");s=String(o[s]||s||o.default),"UTC:"==s.slice(0,4)&&(s=s.slice(4),a=!0);var c=a?"getUTC":"get",u=r[c+"Date"](),l=r[c+"Day"](),h=r[c+"Month"](),d=r[c+"FullYear"](),p=r[c+"Hours"](),f=r[c+"Minutes"](),m=r[c+"Seconds"](),g=r[c+"Milliseconds"](),_=a?0:r.getTimezoneOffset(),y={d:u,dd:i(u),ddd:BEM.I18N("i-tanker__days","short"+(l?l:7)),dddd:BEM.I18N("i-tanker__days","n"+(l?l:7)),m:h+1,mm:i(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:f,MM:i(f),s:m,ss:i(m),l:i(g,3),L:i(g>99?Math.round(g/10):g),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:a?"UTC":(String(r).match(e)||[""]).pop().replace(n,""),o:(_>0?"-":"+")+i(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return s.replace(t,function(t){return t in y?y[t]:t.slice(1,t.length-1)})}catch(t){}}}()},BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,n=this._positions[t.key],i=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(i,n):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(i,n)),o},_calcTailTop:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),r=this.params.tail.width,s=this.getPopupSize(),a=s.height,c=o.top-e.top,u=e.top+s.height-(o.top+i.height);return c>0&&(n+=c,a-=c),u>0&&(a-=u),"middle"===t?(a-=r,n+=a/2):"bottom"===t&&(a-=r,n+=a),n<0&&(n=0),n},_calcTailLeft:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),r=this.params.tail.width,s=this.getPopupSize(),a=o.left-e.left,c=s.width,u=e.left+s.width-(o.left+i.width);return a>0&&(n+=a,c-=a),u>0&&(c-=u),"center"===t?(c-=r,n+=c/2):"right"===t&&(c-=r,n+=c),n},_calcOffsetByTail:function(t){var e=this.params.tail,n=e.height,i={};switch(t.to){case"top":i={top:-n};break;case"bottom":i={top:n};break;case"right":i={left:n};break;case"left":i={left:-n}}return i},_calcTailOffset:function(t){var e={},n=t.to,i=t.tail,o=i.offset,r=i.axis;return!!o&&("top"===n||"bottom"===n?(e.left=0,"left"===r?e.left+=o.left:"center"===r?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===r&&(e.left-=o.right)):"left"!==n&&"right"!==n||(e.top=0,"top"===r?e.top+=o.top:"middle"===r?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===r&&(e.top-=o.bottom)),e)},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("m-datepicker",{getDate:function(){return!!this._isDateSelected&&this._selectedDate},getSelectedDay:function(){return!!this._isDateSelected&&this._selectedDate.getDate()},setDate:function(t,e,n){if("string"==typeof t)this._selectedDate=BEM.blocks["mi-helpers"].getDateFromHumanString(t);else{if("object"!=typeof t)throw new Error("Wrong argument! Should be ISOString string or { from: ISOString, to: ISOString } object");this._selectedDate={from:BEM.blocks["mi-helpers"].getDateFromHumanString(t.from),to:BEM.blocks["mi-helpers"].getDateFromHumanString(t.to)}}this._isDateSelected=!0,this.trigger("change",{date:this.getDate(),fromArrow:!e}),e||this._buildDatepicker(n?this._selectedDate:null),this.clearButton&&this.clearButton.delMod("disabled")},clearDate:function(){this._isDateSelected=!1,this.trigger("change",{date:this.getDate()})},_getFootElemBEMJSON:function(t){return{block:"m-datepicker",elem:"foot",content:t}},_getStartDay:function(t,e,n){var i;return"string"==typeof t||"number"==typeof t?(n=e,e=t,i=BEM.blocks["mi-helpers"].getUTC_YMD(n,e,1).getDay()):i=t.getDay(),0===i&&(i=7),i},_getMonthDays:function(t,e){var n=[31,28,31,30,31,30,31,31,30,31,30,31],i=n[t];return 28!==i||e%4!==0||e%100===0&&e%400!==0||(i=29),i},_isDateSelected:!1}),BEM.DOM.decl("m-calendar",{_popUpOpened:!1,onSetMod:{js:function(){this.params.value&&(this._notTriggerChange=!0,this.setDate(this.params.value))}},getDatePicker:function(){return this._datePicker||!1},setDate:function(t,e){this._datePicker&&this._popUpOpened||(this.params.value=t,this._buildDatePicker()),this._datePicker.setDate(t,!e,e)},getDate:function(){return this._datePicker||this._buildDatePicker(),this._datePicker.getDate()},clearDate:function(){this._datePicker||this._buildDatePicker(),this._datePicker.clearDate()},_onDateChange:function(t,e){this._popUpOpened&&!e.fromArrow&&this.params.autoclose&&this._datePickerPopup.hide(),!this._notTriggerChange&&this.trigger("change",this._datePicker.getDate()),this._notTriggerChange=!1},_onTogglerClick:function(){this._datePicker||this._buildDatePicker(),this._datePickerPopup.show(this.elem("toggler")),this._datePicker.setSizes()},_onDatePickerPopupHide:function(){this.input._isDatePickerOpened=!1,this._popUpOpened=!1,this.trigger("hide")},_onDatePickerPopupShow:function(){this._popUpOpened=!0,this.trigger("show")},_buildDatePicker:function(){this._buildPopup(),this._datePicker=$(BEMHTML.apply(this._getDatePickerBEMJSON())).bem("m-datepicker"),this._datePicker.on("change",this._onDateChange,this),this._datePickerPopup.setContent(this._datePicker.domElem).on("hide",this._onDatePickerPopupHide,this).on("show",this._onDatePickerPopupShow,this)},_buildPopup:function(){this._datePickerPopup||(this._datePickerPopup=$(BEMHTML.apply({block:"popup",mix:[{block:"m-calendar",elem:"popup",elemMods:{type:this.getMod("type")}}],content:[{elem:"tail"},{elem:"content"}]})).bem("popup"))}},{dateFormat:BEM.blocks["mi-helpers"].dateFormat}),BEM.DOM.decl("m-calendar",{_buildPopup:function(){var t={};this.popupDirections&&(t.directions=this.popupDirections),this._datePickerPopup||(this._datePickerPopup=$(BEMHTML.apply({block:"popup",mix:[{block:"m-calendar",elem:"popup",elemMods:{type:this.getMod("type")}}],js:t,content:[{elem:"tail"},{elem:"content"}]})).bem("popup"))}}),BEM.DOM.decl("m-calendar",{popupDirections:"bottom-left"}),function(t){function e(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function n(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function i(t){for(v in x)x[v]=t[B[v]]}function o(t){var n,o,r,s,c,u;if(n=t.keyCode,e(D,n)==-1&&D.push(n),93!=n&&224!=n||(n=91),n in x){x[n]=!0;for(r in M)M[r]==n&&(a[r]=!0)}else if(i(t),a.filter.call(this,t)&&n in b)for(u=p(),s=0;s<b[n].length;s++)if(o=b[n][s],o.scope==u||"all"==o.scope){c=o.mods.length>0;for(r in x)(!x[r]&&e(o.mods,+r)>-1||x[r]&&e(o.mods,+r)==-1)&&(c=!1);(0!=o.mods.length||x[16]||x[18]||x[17]||x[91])&&!c||o.method(t,o)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function r(t){var n,i=t.keyCode,o=e(D,i);if(o>=0&&D.splice(o,1),93!=i&&224!=i||(i=91),i in x){x[i]=!1;for(n in M)M[n]==i&&(a[n]=!1)}}function s(){for(v in x)x[v]=!1;for(v in M)a[v]=!1}function a(t,e,n){var i,o;i=m(t),void 0===n&&(n=e,e="all");for(var r=0;r<i.length;r++)o=[],t=i[r].split("+"),t.length>1&&(o=g(t),t=[t[t.length-1]]),t=t[0],t=w(t),t in b||(b[t]=[]),b[t].push({shortcut:i[r],scope:e,method:n,key:i[r],mods:o})}function c(t,e){var i,o,r,s,a,c=[];for(i=m(t),s=0;s<i.length;s++){if(o=i[s].split("+"),o.length>1&&(c=g(o),t=o[o.length-1]),t=w(t),void 0===e&&(e=p()),!b[t])return;for(r=0;r<b[t].length;r++)a=b[t][r],a.scope===e&&n(a.mods,c)&&(b[t][r]={})}}function u(t){return"string"==typeof t&&(t=w(t)),e(D,t)!=-1}function l(){return D.slice(0)}function h(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function d(t){k=t||"all"}function p(){return k||"all"}function f(t){var e,n,i;for(e in b)for(n=b[e],i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++}function m(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""==e[e.length-1]&&(e[e.length-2]+=","),e}function g(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=M[e[n]];return e}function _(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function y(){var e=t.keymaster;return t.keymaster=C,e}var v,b={},x={16:!1,18:!1,17:!1,91:!1},k="all",M={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},E={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=function(t){return E[t]||t.toUpperCase().charCodeAt(0)},D=[];for(v=1;v<20;v++)E["f"+v]=111+v;var B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(v in M)a[v]=!1;_(document,"keydown",function(t){o(t)}),_(document,"keyup",r),_(window,"focus",s);var C=t.keymaster;t.keymaster=a,t.keymaster.setScope=d,t.keymaster.getScope=p,t.keymaster.deleteScope=f,t.keymaster.filter=h,t.keymaster.isPressed=u,t.keymaster.getPressedKeyCodes=l,t.keymaster.noConflict=y,t.keymaster.unbind=c,"undefined"!=typeof module&&(module.exports=a)}(window),keymaster.filter=function(){return!0},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var o,r=e||window.event,s=[].slice.call(arguments,1),a=0,c=0,u=0,l=0,h=0;return e=t.event.fix(r),e.type="mousewheel",r.wheelDelta&&(a=r.wheelDelta),r.detail&&(a=r.detail*-1),r.deltaY&&(u=r.deltaY*-1,a=u),r.deltaX&&(c=r.deltaX,a=c*-1),void 0!==r.wheelDeltaY&&(u=r.wheelDeltaY),void 0!==r.wheelDeltaX&&(c=r.wheelDeltaX*-1),l=Math.abs(a),(!n||l<n)&&(n=l),h=Math.max(Math.abs(u),Math.abs(c)),(!i||h<i)&&(i=h),o=a>0?"floor":"ceil",a=Math[o](a/n),c=Math[o](c/i),u=Math[o](u/i),s.unshift(e,a,c,u),(t.event.dispatch||t.event.handle).apply(this,s)}var n,i,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var s=o.length;s;)t.event.fixHooks[o[--s]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.hasMod("disable","change")&&(this.changeDisabled=!0),this._todayDate=new Date,this.params.specialDays&&(this._specialDays=this.params.specialDays,this.setMod("special-days","yes")),this.params.limits&&this.setLimits(this.params.limits.min,this.params.limits.max),this.params.value?this.setDate(this.params.value):this._buildDatepicker(),this.changeDisabled||this.bindTo("mousewheel",this._onMouseWheel),this._checkLimits()}},setSpecialDays:function(t){this._specialDays=t,this._buildDatepicker()},setMinDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._maxDate&&t>this._maxDate)throw new Error("meccano:m-datepicker:  min date should be less then Max date");this._minDate=t,this.yearChooserControl&&this.yearChooserControl.attr("min",t.getFullYear())},setMaxDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._minDate&&t<this._minDate)throw new Error("meccano:m-datepicker: max date should be greater then Min date");this._maxDate=t,this.yearChooserControl&&this.yearChooserControl.attr("max",t.getFullYear())},setLimits:function(t,e){t&&this.setMinDate(t),e&&this.setMaxDate(e)},_checkLimits:function(){this._minDate&&this._toggleDirectionButton("previous"),this._maxDate&&this._toggleDirectionButton("next")},_toggleDirectionButton:function(t){var e=this[t+"Button"],n="next"==t?this._maxDate:this._minDate,i=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates[t].year,this._dates[t].month,"next"==t?1:this._dates[t].monthDays),o="next"==t?i>n:i<n;o&&e.delMod("hovered"),e.toggleMod("disabled","yes","",o)},_toggleMonthChooserButtons:function(){var t,e,n=0,i=11,o=this.monthChooserButtons[0];this._minDate&&this.gereatChooserData.year==this._minDate.getFullYear()&&(n=this._minDate.getMonth()),this._maxDate&&this.gereatChooserData.year==this._maxDate.getFullYear()&&(i=this._maxDate.getMonth()),this.monthChooserRadio.each(function(r){e=$(this),t=r<n||r>i,t&&(this.control.checked=!1,o.setMod(e,"checked","")),o.toggleMod(e,"disabled","yes","",t)})},_onMouseWheel:function(t,e,n,i){var o;return t.preventDefault(),!this._isChangeCalendarRunning&&(this._isChangeCalendarRunning=!0,(n<0||i>0)&&(o=this._changeMonth("next")),(n>0||i<0)&&(o=this._changeMonth("previous")),void(o||(this._isChangeCalendarRunning=!1)))},setSizes:function(){var t,e=this.findElem("bodies");if(!this._sizes){if(t=this.findElem("grid-table"),!t.width()||!t.height())return;this._sizes={gridWidth:t.width(),gridHeight:t.height(),titleHeight:this.findElem("title","position","current").height()}}e.css({width:this._sizes.gridWidth,height:this._sizes.gridHeight}),this.findElem("head").height(this._sizes.titleHeight),this._blockSizeSet||(this.domElem.width(this.domElem.outerWidth()),this.domElem.height(this.domElem.outerHeight()),this._blockSizeSet=!0)},_onTitleClick:function(){var t=this;this.toggleMod("show","great-chooser"),this.hasMod("show","great-chooser")?(this._subscribeChooserControlls(),this.gereatChooserData={year:this._dates.current.year,month:this._dates.current.month},this.yearChooser.val(this._dates.current.year),this.monthChooserButtons.forEach(function(e){e.val(t._dates.current.month.toString())}),this._toggleMonthChooserButtons()):this._unsubscribeChooserControlls()},_subscribeChooserControlls:function(){var t=this;this.monthChooserButtons.forEach(function(e){e.on("change",t._onChooserMonthChange,t)}),this.bindToDomElem(this.yearChooserControl,"input",this._onChooserYearInput),this.bindTo(this.chooser,"submit",this._onChooserSubmit)},_unsubscribeChooserControlls:function(){this.monthChooserButtons.forEach(function(t){t.un("change")}),this.unbindFromDomElem(this.yearChooserControl,"input"),this.unbindFrom(this.chooser,"submit")},_onChooserSubmit:function(t){t.preventDefault(),this.delMod("show"),this._buildDatepicker(BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._checkLimits()},_onChooserMonthChange:function(t){this.gereatChooserData.month=t.target.val()},_onChooserYearInput:function(t){var e=this.yearChooser.val();e&&(this._maxDate&&e>this._maxDate.getFullYear()||this._minDate&&e<this._minDate.getFullYear()||(this.yearChooser.val(e),this.gereatChooserData.year=e,this._toggleMonthChooserButtons()))},_bindToDates:function(){this.bindTo(this.findElem("dates"),"click",this._onDateChoose)},_onChangeMonthButtonClick:function(t){var e=t.target.getMod("target");this._isChangeCalendarRunning||this._changeMonth(e)},_changeMonth:function(t){var e=this,n=BEM.I18N("i-tanker__months","n"+(this._dates[t].month+1))+" "+this._dates[t].year,i=this.findElem("body","position","back"),o=this.findElem("body","position","current"),r=this.findElem("title","position","back"),s=this.findElem("title","position","current"),a=i.add(r),c=o.add(s),u=i.add(o).add(r).add(s);return!("previous"==t&&this.previousButton.hasMod("disabled")||"next"==t&&this.nextButton.hasMod("disabled"))&&(this.setMod(u,"transition","no").setMod(a,"direction",t),this._isChangeCalendarRunning=!0,BEM.DOM.update(i,BEMHTML.apply(this._buildDatepickerGridBEMJSON(this._dates[t]))),BEM.DOM.update(r,BEMHTML.apply(this._getTitleClickBEMJSON(n))),this._createDateContext({year:this._dates[t].year,month:this._dates[t].month}),setTimeout(function(){e.delMod(u,"transition").delMod(a,"direction").setMod(c,"direction",t)},50),i.on("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd",function(){e.setMod(u,"transition","no").setMod(a,"position","current").setMod(c,"position","back").delMod(c,"direction"),BEM.DOM.update(c,""),i.off(),e._bindToDates(),e._bindTitleClick(),e._isChangeCalendarRunning=!1,e.setSizes()}),this._checkLimits(),!0)},_getTitleClickBEMJSON:function(t){return{block:"m-datepicker",elem:"title-click",tag:"span",content:[t,{block:"awesome-icon",mods:{icon:"angle-down"}}]}},_bindTitleClick:function(){this.bindTo(this.findElem("title-click"),"click",this._onTitleClick)},_createDateContext:function(t){var e,n,i,o,r,s,a=t instanceof Date;e=a?t.getMonth():t.month,o=a?t.getFullYear():t.year,n=e-1<0?11:e-1,i=e+1>11?0:e+1,r=11===n?o-1:o,s=0===i?o+1:o,this._dates={current:this._fillDateContext(e,o),previous:this._fillDateContext(n,r),next:this._fillDateContext(i,s)}},_fillDateContext:function(t,e){return{month:t,year:e,startDay:this._getStartDay(t,e),monthDays:this._getMonthDays(t,e)}},_buildDatepicker:function(t){t?this._createDateContext(t):this.params.date?this._createDateContext(BEM.blocks["mi-helpers"].getDateFromHumanString(this.params.date+"-01")):this._isDateSelected?this._createDateContext(this._selectedDate):this._createDateContext(this._todayDate),BEM.DOM.update(this.domElem,BEMHTML.apply(this._getDatePickerBEMJSON())),this.changeDisabled||(this._findMainControlls(),this._subscribeMainControlls(),this._bindToDates()),this.setSizes()},_findMainControlls:function(){this.previousButton=this.findBlockInside({block:"button",modName:"target",modVal:"previous"}),this.nextButton=this.findBlockInside({block:"button",modName:"target",modVal:"next"}),this.monthChooserButtons=this.findBlocksInside("choose-month","radio-button"),this.monthChooserRadio=this.monthChooserButtons[0].findElem("radio"),this.yearChooser=this.findBlockInside("choose-year","input"),this.yearChooserControl=this.yearChooser.findElem("control"),this.chooser=this.findElem("great-chooser"),this.hasMod("has","clear")&&(this.clearButton=this.findBlockInside({block:"button",modName:"action",modVal:"clear"}))},_subscribeMainControlls:function(){this.previousButton.on("click",this._onChangeMonthButtonClick,this),this.nextButton.on("click",this._onChangeMonthButtonClick,this),this.clearButton&&this.clearButton.on("click",this.clearDate,this),this._bindTitleClick()},_onDateChoose:function(t){var e=$(t.target),n=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day")),i=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day","disabled","yes"));n&&!i&&(this._selectedDate=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates.current.year,this._dates.current.month,$(t.target).attr("data-content")),this._isDateSelected||(this._isDateSelected=!0),this.delMod(this.findElem("day","selected","yes"),"selected").setMod($(t.target),"selected","yes").trigger("change",{date:this.getDate()}),this.clearButton&&this.clearButton.delMod("disabled"))},_getDatePickerBEMJSON:function(){var t,e=[{block:"m-datepicker",elem:"head",content:this._getDatePickerHeadBEMJSON()},{block:"m-datepicker",elem:"bodies",content:[{elem:"body",elemMods:{position:"back"}},{elem:"body",elemMods:{position:"current"},content:this._buildDatepickerGridBEMJSON(this._dates.current)}]}];return this.changeDisabled||e.push({block:"m-datepicker",elem:"great-chooser",content:this._buildGreatChooserBEMJSON()}),this.hasMod("has","clear")&&(t=this._getFootElemBEMJSON({block:"button",mods:{theme:"normal",type:"simple",size:"s",action:"clear"},content:BEM.I18N("m-datepicker","clear")}),this._isDateSelected||(t.content.mods.disabled="yes"),e.push(t)),e},_buildGreatChooserBEMJSON:function(){return[{elem:"choose-year",content:{block:"input",mods:{theme:"normal",size:"s",clear:"no"},content:{elem:"control",attrs:{type:"number",min:this._minDate?this._minDate.getFullYear():"",max:this._maxDate?this._maxDate.getFullYear():""}}}},{elem:"choose-month",content:function(){for(var t=1,e=[],n=0;n<4;n++)e.push({block:"radio-button",mods:{theme:"normal",size:"s",quorter:"q"+(n+1)},js:{id:"1234"},name:this._uniqId+"-radio",inputAttrs:{name:"q"+(n+1)},content:function(){for(var e=[],n=1;n<4;n++)e.push({elem:"radio",controlAttrs:{value:t-1,required:"required"},content:BEM.I18N("i-tanker__months","short"+t)}),t++;return e}()});return e}.bind(this)()},{elem:"chooser-submit",content:{block:"button",mods:{theme:"normal",size:"s",type:"month"},type:"submit",content:"OK"}}]},_getDatePickerHeadBEMJSON:function(){var t,e=BEM.I18N("i-tanker__months","n"+(this._dates.current.month+1))+" "+this._dates.current.year;return t=this.changeDisabled?{elem:"titles",content:{elem:"title",elemMods:{position:"current"},content:e}}:[{elem:"left",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"previous"},content:"←"}},{elem:"titles",content:[{elem:"title",elemMods:{position:"current"},content:this._getTitleClickBEMJSON(e)},{elem:"title",elemMods:{position:"back"}}]},{elem:"right",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"next"},content:"→"}}]},_buildDatepickerGridBEMJSON:function(t){var e=this,n=[],i=this._buildGridMap(t);return n.push({elem:"thead",tag:"thead",content:{elem:"thead-line",tag:"tr",content:function(){var t,e=[];for(t=0;t<7;t++)e.push({elem:"day-name",tag:"th",content:{elem:"day-name-i",content:BEM.I18N("m-datepicker__short-days",t+1)}});return e}()}}),n.push({elem:"dates",tag:"tbody",content:function(){for(var n=[],o=0;o<i.length;o++)n.push({elem:"week",tag:"tr",content:function(){var n,r,s,a,c=[],u=e._maxDate||e._minDate,l=t.month==e._todayDate.getMonth()&&t.year==e._todayDate.getFullYear(),h=e._selectedDate&&t.month==e._selectedDate.getMonth()&&t.year==e._selectedDate.getFullYear(),d=BEM.blocks["mi-helpers"].getUTC_YMD(t.year,t.month,1);a=1===(t.month+1).toString().length?"0"+(t.month+1):t.month+1;for(var p=0;p<7;p++)i[o][p]?(n={elem:"day",tag:"td",elemMods:{},attrs:{"data-content":i[o][p]}},e._specialDays&&(r=1===i[o][p].toString().length?"0"+i[o][p].toString():i[o][p],s=t.year+"-"+a+"-"+r,e._specialDays[s]&&(n.attrs.style="background: "+e._specialDays[s].background+"; ",e._specialDays[s].color&&(n.attrs.style=n.attrs.style+"color: "+e._specialDays[s].color),n.attrs.title=e._specialDays[s].title)),5!==p&&6!==p||(n.elemMods.weekend="yes"),h&&i[o][p]===e.getSelectedDay()&&(n.elemMods.selected="yes"),l&&i[o][p]===e._todayDate.getDate()&&(n.elemMods.today="yes"),u&&(d.setDate(i[o][p]),(e._minDate&&d<e._minDate||e._maxDate&&d>e._maxDate)&&(n.elemMods.disabled="yes")),c.push(n)):(n={elem:"day-empty",tag:"td"},c.push(n));return c}()});return n}()}),{block:"m-datepicker",elem:"grid",content:[{elem:"grid-table",tag:"table",content:n}]}},_buildGridMap:function(t){var e,n=0,i=new Array(7),o=[];for(e=1;e<=t.monthDays;e++)1==e&&(n=t.startDay-1),i[n]=e,6==n?(o.push(i),i=new Array(7),n=0):n++,e+1>t.monthDays&&o.push(i);return o.length<6&&o.push(new Array(7)),o},_isChangeCalendarRunning:!1}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{clearDate:function(){this.__base.apply(this,arguments),this._buildDatepicker(new Date(this._dates.current.year,this._dates.current.month,1)),this.clearButton&&this.clearButton.setMod("disabled","yes")},_onChooserSubmit:function(t){t.preventDefault();var e,n=!isNaN(new Date(this.gereatChooserData.year,this.gereatChooserData.month).getTime());this.delMod("show"),n&&(e=BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._buildDatepicker(e),this._checkLimits()}}),BEM.DOM.decl({name:"m-calendar",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.keyboard&&window.keymaster("enter, left, right, up, down",this._onKeyDown.bind(this))}},destruct:function(t){this.params.keyboard&&window.keymaster.unbind("enter, left, right, up, down",this),this.__base(t)},_onKeyDown:function(t){var e,n,i,o=this.params;this.__self.activeCalendar===this&&(this._datePicker._selectedDate?e=Number(this._datePicker._selectedDate):n=o.date?new Date(o.date):new Date,n||"Left"!==t.keyIdentifier?n||"Right"!==t.keyIdentifier?n||"Up"!==t.keyIdentifier?n||"Down"!==t.keyIdentifier||(t.preventDefault(),n=new Date(e+this.__self.MILLISECONDS_IN_WEEK)):(t.preventDefault(),n=new Date(e-this.__self.MILLISECONDS_IN_WEEK)):n=new Date(e+this.__self.MILLISECONDS_IN_DAY):n=new Date(e-this.__self.MILLISECONDS_IN_DAY),i=!o.limits||o.limits&&(!o.limits.max||BEM.blocks["mi-helpers"].getDateFromHumanString(o.limits.max)>=n)&&(!o.limits.min||BEM.blocks["mi-helpers"].getDateFromHumanString(o.limits.min)<=n),!i||"Left"!==t.keyIdentifier&&"Right"!==t.keyIdentifier&&"Up"!==t.keyIdentifier&&"Down"!==t.keyIdentifier?"Enter"===t.keyIdentifier&&this._datePicker._selectedDate&&this.setDate(BEM.blocks["mi-helpers"].dateFormat(this._datePicker._selectedDate,"yyyy-mm-dd")):this.setDate(BEM.blocks["mi-helpers"].dateFormat(n,"yyyy-mm-dd"),!0))},_getDatePickerBEMJSON:function(){var t={block:"m-datepicker",mods:{type:"month"},js:["value","date","specialDays","limits"].reduce(function(t,e){return this.params[e]&&(t[e]=this.params[e]),t}.bind(this),{})};return this.hasMod("has","clear")&&(t.mods.has="clear"),t},setSpecialDays:function(t){return this._datePicker.setSpecialDays(t)},setMinDate:function(t){return this._datePicker.setMinDate(t)},setMaxDate:function(t){return this._datePicker.setMaxDate(t)},setLimits:function(t,e){return this._datePicker.setLimits(t,e)},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.__self.activeCalendar=null},_onDatePickerPopupShow:function(){this.__base.apply(this,arguments),setTimeout(function(){this.__self.activeCalendar=this}.bind(this),200)}},{MILLISECONDS_IN_DAY:864e5,MILLISECONDS_IN_WEEK:6048e5}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){return this.__base.apply(this,arguments)!==!1&&void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.__base.apply(this,arguments),this.input.bindTo("click",t._onTogglerClick.bind(this)),this.input.on("focus",this._onTogglerClick,this),this.input.bindTo(this.input.domElem,"mousedown",function(){t.input.un("focus")})}},_onDateChange:function(t,e){var n=BEM.blocks["m-calendar"].dateFormat,i=e.date,o=e.fromArrow;o||(i?i.from?this.input.val(n(i.from)+" — "+n(i.to)):this.input.val(n(i)):this.input.val("")),this.__base.apply(this,arguments)},_onTogglerClick:function(){var t=this;this.input._isDatePickerOpened=!0,this.__base.apply(this,arguments),this.bindToDoc("keydown.close",function(e){9===e.which&&(t._datePickerPopup.hide(),t.unbindFromDoc("keydown.close"))})},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.input.delMod("focused"),this.input.on("focus",this._onTogglerClick,this),this.unbindFromDoc("keydown.close")}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.input&&(this.__base.apply(this,arguments),this.input.bindTo("pointerclick",t._onTogglerClick.bind(t)),this.input.elem("control").on("focus",function(){t.input.elem("control").blur(),t._onTogglerClick.call(t)}))}}}),BEM.DOM.decl("date-range-input",{val:function(t,e){var n=this.findBlockInside("from","date-input"),i=this.findBlockInside("to","date-input");return t||e?(t&&n.val(t),e&&i.val(e),this):[n.val(),i.val()]}}),BEM.DOM.decl("date-range-input",{onSetMod:{js:function(){var t=this,e=t.findBlockInside(t.elem("from"),"m-calendar"),n=t.findBlockInside(t.elem("to"),"m-calendar"),i={min:e.params.limits.min,max:n.params.limits.max},o=function(t,e,n){var i=t.params,o=t.getDate();o?i.value=BEM.blocks["mi-helpers"].getHumanStringFromDate({date:o}):i.value="",i.limits[e]=n,t._buildDatePicker()};t.controls={from:e,to:n},e.on("change",function(e,r){var s;s=r?BEM.blocks["mi-helpers"].dateFormat(r,"yyyy-mm-dd"):i.min,o(n,"min",s),t.trigger("change")}),n.on("change",function(n,r){var s;s=r?BEM.blocks["mi-helpers"].dateFormat(r,"yyyy-mm-dd"):i.max,o(e,"max",s),t.trigger("change")})}}}),BEM.DOM.decl("payment-question",{onSetMod:{js:function(){var t=this,e=t.elem("control"),n=t.elemParams(e),i=t.findBlockInside(e,"input")||t.findBlockInside(e,"radio-button")||"";t.min=n.min,t.max=n.max,t.amount=n.min,t.price=n.price,t.updatePrice(),i.on("change",function(e){t.amount=i.val(),t.updatePrice()})}},min:1,max:1,price:0,amount:1,getPriceStr:function(){var t,e=this,n=e.amount,i=e.price,o=n*i;return(n>e.max||n<e.min)&&(o=0),t=accounting.formatNumber(o,0," ")},updatePrice:function(){var t=this,e=t.findBlockInside("price"),n=e.elem("val");BEM.DOM.update(n,t.getPriceStr())}}),BEM.DOM.decl("survey-question",{onSetMod:{js:function(){var t=this,e=BEM.blocks["cf-helpers"],n=t.findBlockOutside("survey");t.controls=t.getControls(),t.formId=n.params.slug,"preview"!==n.getMod("type")&&(t.surveyStorage=e.getStorage("sessionStorage")),t.setPresetQuestionAnswer(),t.controls.forEach(function(e){var n=null;e.on("change",function(){clearTimeout(n),n=setTimeout(t._onChangeControl(e),300)})})}},setPresetQuestionAnswer:function(){var t,e=this.getFormStorageData();this.params.defaultFromQuery?t=this.params.defaultFromQuery:e&&e[this.params.name]&&(t=e[this.params.name]),t&&this.setPresetAnswer(t)},setPresetAnswer:function(){},getControls:function(){return[]},checkValueWithCond:function(t,e){var n=this.getControls(),i=!1;return n.forEach(function(n){var o=n.val();switch(t){case"eq":o===e&&(i=!0);break;case"neq":o!==e&&(i=!0)}}),i},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){var e=$.trim(t.val());return!!e})}}},clearValue:function(){},val:function(){},_onChangeControl:function(t){var e,n,i=this.getMod("widget"),o=this.params.name,r={captcha:!0,agreement:!0,"autocomplete-selection":!0};if(this.trigger("change"),this.surveyStorage&&!r[i]){switch(n=this.getFormStorageData()||{},i){case"checkbox":e=t.isChecked()?"True":"False";break;case"checkbox-list":case"date-widget":e=this.val();break;default:e=t.val()}e?n[o]=e:n[o]&&delete n[o],this.setFormStorageData(n)}},getFormStorageData:function(){return this.surveyStorage&&this.surveyStorage.getData(this.getFormStorageKey())},setFormStorageData:function(t){this.surveyStorage&&t&&this.surveyStorage.setItem(this.getFormStorageKey(),t);
},getFormStorageKey:function(){return BEM.blocks["cf-helpers"].getDraftStorageKey(this.formId)}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"number"},{getControls:function(){var t=this.findBlockInside("textinput").findElem("control"),e=[];return t.length&&(e=e.concat(t)),e},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.val()}),n||e.forEach(function(e){e.val(t)}))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"tickets"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||this.findBlocksInside("radio-button")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"agreement"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("checkbox")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return!!t.isChecked()})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox-list"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},val:function(){var t=[];return this.controls.forEach(function(e){e.isChecked()&&t.push(e.val())}),t.length?t:void 0},setPresetAnswer:function(t){var e=this.getControls(),n=!1;e.length&&(n=e.some(function(t){return t.isChecked()}),n||e.forEach(function(e){var n=e.val(),i="string"!=typeof t?t.some(function(t){return n===t}):n===t;i&&e.toggle()}))},checkValueWithCond:function(t,e){var n=this.controls||[],i=!1;return n.forEach(function(n){var o=n.val();if(n.isChecked())switch(t){case"eq":o===e&&(i=!0);break;case"neq":o!==e&&(i=!0)}}),i},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.some(function(t){return!!t.isChecked()})},noOptions:function(){return!t.hasMod("required","yes")||!t.controls||!!t.controls.length}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},setPresetAnswer:function(t){var e=this.controls||[],n=e[0]||"";n&&!n.isChecked()&&"True"===t&&n.toggle()},checkValueWithCond:function(t,e){var n=this.controls||[],i=n[0]||"",o=!1;if(i){var r=i.isChecked(),s=r?"True":"False";switch(t){case"eq":s===e&&(o=!0);break;case"neq":s!==e&&(o=!0)}}return o},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return!!t.isChecked()})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"radio-list"},{getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.val()}),!n&&t&&e.forEach(function(e){t="string"==typeof t?t:t[0],e.val(t)}))},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return!!t.elem("radio").length})},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("select")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return!!t.val()&&"0"!==t.val()})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"file"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("attach")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){var e=t.params.alreadyUploaded||!1;return!!t.val()||!!e})},fileTooLarge:function(){return t.controls.every(function(t){var e=t.params.maxFileSize||0,n=t.elem("control")[0]||{},i=n.files[0]||{},o=i.size||0;return e=parseInt(e,10),e=1024*e*1024,e>=o})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"multifile"},{onSetMod:{js:function(){this.controls=this.getControls();var t=this.controls[0];t.on("upload",this.onUpload()).on("remove",this.onRemove()).on("abort",this.onAbort()).on("add",this.onAdd()),this.addExistingFiles(),this.addHiddenFileInput("")}},getControls:function(){return this.findBlocksInside("file-upload")||[]},addExistingFiles:function(){var t=this,e=this.controls[0],n=e.findBlocksInside("file");n.forEach(function(e){var n=e.responseData&&e.responseData.id;t.addHiddenFileInput(n)})},onUpload:function(){var t=this,e=t.findBlockOutside("survey"),n=t.controls[0];return function(i,o){var r=o&&o.id||"";r&&t.addHiddenFileInput(r),n.isUploadInProgress()||e.submitButton.delMod("disabled")}},onAbort:function(){var t=this,e=t.findBlockOutside("survey"),n=t.controls[0];return function(t){n.isUploadInProgress()||e.submitButton.delMod("disabled")}},onRemove:function(){var t=this;return function(e,n){var i=n&&n.id||"";i&&t.removeHiddenFileInput(i)}},onAdd:function(){var t=this,e=t.findBlockOutside("survey"),n=t.controls[0];return function(){n.isUploadInProgress()&&e.submitButton.setMod("disabled","yes")}},addHiddenFileInput:function(t){var e=this.controls[0],n=this.params&&this.params.name||"",i={block:"file",mods:{hidden:"yes",id:t},name:n,content:t};BEM.DOM.prepend(e.domElem,BEMHTML.apply(i))},removeHiddenFileInput:function(t){var e=this.findBlockInside({block:"file",modName:"id",modVal:t});e.destruct()}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"captcha"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"input"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.val()}),n||e.forEach(function(e){e.val(t)}))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"textarea"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.val()}),n||e.forEach(function(e){e.val(t)}))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"select"},{getControls:function(){return this.findBlocksInside("select")||[]},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.params.alreadySelected}),n||e.forEach(function(e){var n=e.params;n&&n.valueFromQuery&&(t="string"==typeof t?t:t[0],e.val(n.valueFromQuery[t]))}))},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return!!t.elem("option").length})},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"autocomplete-selection"},{onSetMod:{js:function(){var t=this;this.autocomplete=this.findBlockOn("control","input"),this.autocomplete.on("select",t._onAutocompleteSelect,t),this.autocomplete.on("change",t._onAutocompleteChange,t),this.autocomplete.on("blur",t._onAutocompleteBlur,t),this.params.isMultiple&&(this._multipleChoice={}),this.__base.apply(this,arguments),this.params.savedValue&&this.params.savedValue.length&&this.preSetAnswer(this.params.savedValue)}},getValidators:function(){var t=this,e=this.__base.apply(this,arguments),n=this.autocomplete.getDataprovider();return e.noOptions=function(){if(!t.hasMod("required","yes")||!t.autocomplete.length)return!0;var e=$.Deferred();return n.get("",function(t){e.resolve(!(!t.items||!t.items.length))}),e},e.required=function(){return!t.hasMod("required","yes")||!!t.val()},e},checkValueWithCond:function(t,e){var n=this.val();return!!n&&Object.keys(n).some(function(n){return{eq:n===e,neq:n!==e}[t]})},clearValue:function(){this.autocomplete.val(""),this.params.isMultiple?(BEM.DOM.replace(this.elem("data"),BEMHTML.apply({block:"survey-question",elem:"data",elemMods:{multiple:"yes"}})),this._multipleChoice={}):this._getHiddenInput().val("")},val:function(){var t,e,n,i;return this.params.isMultiple?(t=this.findBlocksInside("data","autocomplete-item"),t.length&&(e={},t.forEach(function(t){var n=t.getData();e[n.value]=n.label}))):(n=this._getHiddenInput().val(),i=this.autocomplete.val(),n&&i&&(e={},e[n]=i)),e},_notifyValueChange:function(t){this.trigger("change",{value:t})},_getHiddenInput:function(){return this._hiddenInput||(this._hiddenInput=$(BEM.DOM.append(this.elem("data"),BEMHTML.apply({tag:"input",attrs:{type:"hidden",name:this.params.name,value:""}})))),this._hiddenInput},_onAutocompleteSelect:function(t,e){var n=e.item||"",i=n.params&&n.params.id||"",o=this.autocomplete.val();this.params.isMultiple?(this._addItem(o,i),this.autocomplete._blur()):i&&this._getHiddenInput().val(i),this._updateLocalStorage(i,o)},_onAutocompleteChange:function(){var t;this.params.isMultiple||(t=this._getHiddenInput().val(),this._getHiddenInput().val(""),this._updateLocalStorage(t))},_onAutocompleteBlur:function(){if(this.params.isMultiple)this.autocomplete.clearInput(),this.trigger("change");else{var t=this._getHiddenInput().val();t||this.autocomplete.clearInput(),this._notifyValueChange(t)}},_addItem:function(t,e){var n;this._multipleChoice[e]||(n=BEM.DOM.append(this.elem("data"),BEMHTML.apply({block:"autocomplete-item",data:{label:t,name:this.params.name,value:e}})),this._multipleChoice[e]=n.bem("autocomplete-item"),this._multipleChoice[e].on("removeItem",this._removeItem,this))},_removeItem:function(t,e){var n=t.block,i=e.data;delete this._multipleChoice[i.value],n.destruct(),this._updateLocalStorage(i.value)},setPresetAnswer:function(t){var e=Object.keys(t),n=e.map(function(e){return{id:e,text:t[e]}});n.length&&this.preSetAnswer(n)},preSetAnswer:function(t){var e=this;this.params.isMultiple?t.forEach(function(t){e._addItem(t.text,t.id)}):(e._getHiddenInput().val(t[0].id),e.autocomplete.val(t[0].text))},_updateLocalStorage:function(t,e){if(t){var n,i=this.params.name,o=this.getFormStorageData()||{};o[i]=o[i]||{},n=o[i],e?n[t]=e:n[t]&&delete n[t],0===Object.keys(n).length&&delete n,this.setFormStorageData(o)}}}),BEM.DOM.decl("autocomplete-item",{onSetMod:{js:function(){this.bindTo("clear","pointerclick",this._onClear)}},getData:function(t){return t?this.params[t]:this.params},getLabel:function(){return this.getData("label")},getName:function(){return this.getData("name")},val:function(t){return void 0!==t?(t=null===t?"":t.toString(),this.elem("data").val(t),this):this.elem("data").val()},_onClear:function(){this.unbindFromDomElem(this.elem("clear"),"pointerclick"),this.trigger("removeItem",{data:this.getData()})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date-widget"},{val:function(t,e){var n,i=this.getControls()[0];return t||e?(i.val(t,e),this):(n=[].concat(i.val()),n.length?n:void 0)},getControls:function(){return this.controls=this.findBlockInside("date-range-input")||this.findBlockInside("date-input"),this.controls=[].concat(this.controls),this.controls},checkValueWithCond:function(t,e){var n=this.val();return e=new Date(e),!(!n||isNaN(e.getTime()))&&n.some(function(n){return{gt:n>e,eq:n===e,lt:n<e,neq:n!==e}[t]})},getValidators:function(){var t=this;return{required:function(){var e;return!t.hasMod("required","yes")||(e=t.val(),e&&e.every(function(t){return!!t}))}}},setPresetAnswer:function(t){var e=this.getControls()[0],n=this.val(),i=!1;n.length&&(i=n.reduce(function(t,e){return t&&!!e},!0),!i&&Array.isArray(t)&&(t=t.map(function(t){return t?new Date(t):t}),e.val.apply(e,t)))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"scale"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls,n=!1;e.length&&(n=e.some(function(t){return t.val()}),n||e.forEach(function(e){var n=e.params;n&&n.valueFromQuery&&(t="string"==typeof t?t:t[0],e.val(n.valueFromQuery[t]))}))}}),function(t,e){"use strict";var n=0;t.ajaxTransport("iframe",function(i){if(i.async){var o,r,s,a=i.initialIframeSrc||"javascript:false;";return{send:function(c,u){o=t('<form style="display:none;"></form>'),o.attr("accept-charset",i.formAcceptCharset),s=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+s+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+s+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+s+"_method=PATCH",i.type="POST"),n+=1,r=t('<iframe src="'+a+'" name="iframe-transport-'+n+'"></iframe>').bind("load",function(){var n,s=t.isArray(i.paramName)?i.paramName:[i.paramName];r.unbind("load").bind("load",function(){var n;try{if(n=r.contents(),!n.length||!n[0].firstChild)throw new Error}catch(t){n=e}u(200,"success",{iframe:n}),t('<iframe src="'+a+'"></iframe>').appendTo(o),window.setTimeout(function(){o.remove()},0)}),o.prop("target",r.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&t.each(i.formData,function(e,n){t('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(o)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(n=i.fileInput.clone(),i.fileInput.after(function(t){return n[t]}),i.paramName&&i.fileInput.each(function(e){t(this).prop("name",s[e]||i.paramName)}),o.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),o.submit(),n&&n.length&&i.fileInput.each(function(e,i){var o=t(n[e]);t(i).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(i)})}),o.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",a),o&&o.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var n=e&&e[0];return n&&t.isXMLDoc(n)?n:t.parseXML(n.XMLDocument&&n.XMLDocument.xml||t(n.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}(jQuery),$.support.xhrFormDataFileUpload=!!window.FormData,BEM.DOM.decl("file",{token:void 0,responseData:void 0,size:0,uploadingProcess:null,onSetMod:{js:function(){var t=this,e=t.params,n=t.elem("delete");t.token=e.token,t.bindTo(n,"pointerclick",function(){t.uploadingProcess?(t.dontThrowError=!0,t.trigger("abort"),t.uploadingProcess.abort()):t.trigger("remove",t.responseData),t.destruct()})}},setData:function(t){var e=this;return e.size=t.size||0,window.File&&t instanceof File?(this.fileData=t,this.upload()):this.responseData=t,this},setFileInput:function(t){this.fileInput=t,this.fileInput.val()&&!this.isXHRUpload()&&this.uploadViaIframe()},upload:function(){var t=this,e=new FormData,n=t.fileData,i=t.token;t.setMod("progress","yes"),e.append("file",n),e.append("_csrf",i),t.uploadingProcess=$.ajax({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),data:e,processData:!1,contentType:!1,dataType:"json",success:t.onUploadSuccess(),error:t.onUploadError(),complete:t.onComplete()})},uploadViaIframe:function(){var t=this,e=t.fileInput,n=t.token;t.setMod("progress","yes"),t.uploadingProcess=$.ajax({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),formData:[{name:"_csrf",value:n}],fileInput:e,paramName:"file",dataType:"iframe json",success:t.onUploadSuccess(),error:t.onUploadError()})},isXHRUpload:function(){return $.support.xhrFormDataFileUpload},onUploadSuccess:function(){var t=this;return function(e){t.responseData=e,t.trigger("upload",t.responseData),t.delMod("progress")}},onUploadError:function(){var t=this;t.findBlockOutside("survey");return function(e){var n,i=e.responseText||"",o=BEM.I18N("file","default-error-text");if(!t.dontThrowError){try{n=JSON.parse(i)}catch(t){}n?(o=n.errors||[],o=o.join("<br/>")):i&&(o=i),t.trigger("upload",{id:"error"}),t.trigger("remove",{id:"error"}),t.trigger("alert",{msg:o}),t.destruct()}}},onComplete:function(){var t=this;return function(){t.uploadingProcess=null}},val:function(){return this.params&&this.params.attrs&&this.params.attrs.name||""}}),BEM.DOM.decl({name:"button",modName:"active",modVal:"no"},{onSetMod:{hovered:function(){return!1},pressed:function(){return!1}}},{}),BEM.DOM.decl("file-upload",{attached:0,uploaded:0,maxFilesCount:1,maxFilesSize:10,filesCountLimitStr:"",filesSizeLimitStr:"",attachedSize:0,onSetMod:{js:function(){var t,e=this,n=e.params,i=n.files||[],o=e.findBlockOutside("survey");e.attachButton=e.findBlockInside("attach"),e.fileInput=e.attachButton.findElem("control"),e.maxFilesCount=n.maxFilesCount,e.maxFilesSize=n.maxFilesSize,e.filesCountLimitStr=BEM.I18N("file-upload","files-limit-error",{count:e.maxFilesCount}),e.filesSizeLimitStr=BEM.I18N("file-upload","size-limit-error",{size:e.maxFilesSize}),i.length&&i.forEach(function(t){e.uploaded++,e.createFileView(t)}),t=e.attachButton.findBlockInside("button"),t.on("press",function(){o.closeAlert()}),e.attachButton.bindTo("change",function(t){var n=$(t.target),i=e.getFileInputFiles(n);e.checkFilesCountLimit(i.length)?o.showAlert(e.filesCountLimitStr,e.attachButton):e.checkFilesSizeLimit(i)?o.showAlert(e.filesSizeLimitStr,e.attachButton):i.forEach(function(t){e.createFileView(t)}),e.attachButton.resetFile()})}},checkFilesCountLimit:function(t){var e=this;return e.attached+t>e.maxFilesCount},checkFilesSizeLimit:function(t){var e=this,n=parseInt(e.maxFilesSize,10),i=0;return n=1024*n*1024,t.forEach(function(t){t.size&&(i+=t.size)}),e.attachedSize+i>n},getFileInputFiles:function(t){var e,n=$.makeArray(t.prop("files"));return n.length||(e=t.prop("value"),e&&(n=[{name:e.replace(/^.*\\/,"")}])),n},val:function(){var t=this,e=t.findBlocksInside("file-list","file"),n=[];return e.forEach(function(t){n.push(t.val())}),n.join(",")},getFileList:function(){var t=this,e=t.findElem("file-list");return e.length||(BEM.DOM.prepend(t.domElem,BEMHTML.apply({block:"file-upload",elem:"file-list"})),e=t.findElem("file-list")),e},createFileView:function(t){var e,n,i=this,o=""+ +new Date,r=t.size||0,s=i.getFileList(),a=i.fileAttrs||{};a.name=t.name,e={block:"file",mods:{timestamp:o},fileAttrs:a,token:i.params.token},n=BEMHTML.apply(e),i.fileInput=i.attachButton.findElem("control"),BEM.DOM.append(s,n),i.attached++,i.attachedSize+=r,i.trigger("add"),i.findBlockInside({block:"file",modName:"timestamp",modVal:o}).on("upload",i.onFileUpload()).on("remove",i.onFileRemove()).on("abort",i.onFileUploadAborted()).on("alert",i.onFileUploadAlert()).setData(t).setFileInput(i.fileInput)},removeAttached:function(t){var e=this,n=t.target;e.attached--,e.attachedSize-=n.size,e.attached||e.getFileList().remove()},onFileUpload:function(){var t=this;return function(e,n){t.uploaded++,t.trigger("upload",n)}},onFileUploadAborted:function(){var t=this;return function(e){t.removeAttached(e),t.trigger("abort")}},onFileUploadAlert:function(){var t=this,e=t.findBlockOutside("survey");return function(n,i){i=i||{},e.showAlert(i.msg,t.attachButton)}},onFileRemove:function(){var t=this;return function(e,n){t.removeAttached(e),t.uploaded--,t.trigger("remove",n)}},isUploadInProgress:function(){var t=!1;return this.attached-this.uploaded&&(t=!0),t}}),BEM.DOM.decl("survey-validation",{onSetMod:{js:function(){var t=this,e=t.findBlockOn("survey"),n=e.questions,i=!0;t.scrollToError(),e.bindTo("submit",function(){var o=this,r=[];if(e.submitButton.setMod("disabled","yes"),i)return n.forEach(function(e){var n=e.getValidators();e.hasMod("hidden","yes")||(t.delMod(t.findElem(e.domElem,"message","visibility","visible"),"visibility"),n&&Object.keys(n).forEach(function(i){var o=n[i]();$.when(o).done(function(n){n||t.setMod(t.findElem(e.domElem,"message","type",i),"visibility","visible")}),r.push(o)}))}),$.when.apply($,r).done(function(){var n=[].slice.call(arguments),r=!n.every(function(t){return!!t});r?(t.setMod("invalid","yes"),t.scrollToError(),e.submitButton.delMod("disabled")):(t.delMod("invalid"),i=!1,o.domElem.submit())}),!1})}},scrollToError:function(){var t=(window.parent,$("html, body")),e=this.findBlockOutside("b-iframe"),n=this.findElem("message","visibility","visible"),i=0,o={};n.length&&(i=n.eq(0).parents(".survey__line").offset().top-50,e&&(o["iframe-offset"]=i,e.postMessage(o)),t.animate({scrollTop:i}))}}),BEM.DOM.decl("survey-conditions",{onSetMod:{js:function(){var t=this;t.survey=t.findBlockOn("survey"),t.allowPostConditions=t.params.allowPostConditions||"",t.addRelatedFields(t.allowPostConditions),t.survey.questions.forEach(function(e){var n=e.params,i=n.showConditions||"";i&&(t.addRelatedFields(i),e.setMod("hidden","yes"))}),t.checkAllQuestionsForConditions(),t.checkPostConditions(),t.relatedFields.forEach(function(e){var n=t.survey.namedFields[e];n.on("change",function(){t.checkAllQuestionsForConditions(),t.checkPostConditions()})})}},survey:"",allowPostConditions:"",relatedFields:[],addRelatedFields:function(t){var e=this;t&&t.forEach(function(t){t.forEach(function(t){var n=t.field;e.relatedFields.indexOf(n)===-1&&e.relatedFields.push(n)})})},checkAllQuestionsForConditions:function(){var t=this;t.survey.questions.forEach(function(e){var n=e.params,i=n.showConditions||"";i&&(t.checkConditions(i)?e.delMod("hidden"):e.setMod("hidden","yes"))})},checkPostConditions:function(){var t=this,e=t.allowPostConditions;e&&(t.checkConditions(e)?t.survey.submitButton.delMod("hidden"):t.survey.submitButton.setMod("hidden","yes"))},checkConditions:function(t){var e=this,n=t.some(function(t){return e.checkGroup(t)});return n},checkGroup:function(t){var e=!1,n=this;return t.forEach(function(t,i){var o=t.operator,r=t.field,s=t.condition,a=t.field_value;if(0===i)e=e||n.checkField(s,r,a);else switch(o){case"and":e=e&&n.checkField(s,r,a);break;case"or":e=e||n.checkField(s,r,a)}}),e},checkField:function(t,e,n){var i=this,o=!1,r=i.survey.namedFields[e];return r.hasMod("hidden")&&!r.hasMod("hidden-by-default")?o:o=r.checkValueWithCond(t,n)}}),BEM.decl("uri",{onSetMod:{js:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return"undefined"!=typeof t?(this.uriParts[e]=t,this):this.uriParts[e]}})}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(t){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?:?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],i=e.exec(t||""),o={};return n.forEach(function(t,e){o[t]=i[e]||""}),o},parseQuery:function(t){var e,n,i,o,r,s={};if("string"!=typeof t||""===t)return s;for(n=t.replace("?","").split("&"),e=0;e<n.length;e++)i=n[e].split("="),i=[i.shift(),void 0!==i[0]?i.join("="):null],o=this.decode(i[0]),r=i[1]||""===i[1]?this.decode(i[1]):null,s[o]?(r||""===r)&&s[o].push(r):s[o]=null===r?[]:[r];return s},query:function(t){var e="";"undefined"!=typeof t&&(this.queryParams=this.parseQuery(t));var n=this.queryParams,i=Object.keys(n),o=this;return i.forEach(function(t,i){i>0&&(e+="&"),"object"!=typeof n[t]||n[t].length?n[t].forEach(function(n,i){i>0&&(e+="&"),e+=o.encode(t)+"="+o.encode(n)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var n=[];return"undefined"!=typeof e&&((this.queryParams[t]||[]).forEach(function(t){t!==e&&n.push(t)}),this.queryParams[t]=n),"undefined"!=typeof e&&0!==n.length||delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,n){return this.deleteParam(t,n).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?t+=0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?"/"+this.path():this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),t+=this.path()?this.path():this.host()?"/":window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.DOM.decl("survey-field-filters",{onSetMod:{js:function(){var t=this;t.survey=t.findBlockOn("survey"),t.survey.questions.forEach(function(e){var n=e.params,i=n.fieldFilters||[];i.length&&t.addRelatedFields(i)}),t.relatedFields.forEach(function(e){var n=t.survey.namedFields[e],i=n.params.name||"",o=n.val();o&&t.handleRelatedFieldChange(i,o),n.on("change",function(e,n){var i=n.value||"",o=this.params.name||"";t.handleRelatedFieldChange(o,i)})})}},relatedFields:[],addRelatedFields:function(t){var e=this;t&&t.forEach(function(t){var n=t.field;e.relatedFields.indexOf(n)===-1&&e.relatedFields.push(n)})},handleRelatedFieldChange:function(t,e){var n=this,i=BEM.blocks.uri;n.survey.questions.forEach(function(n){var o=n.params,r=o.fieldFilters||[];r=r.filter(function(e){return e.field===t}),r.length&&(n.hasMod("widget","autocomplete-selection")&&n.clearValue(),r.forEach(function(t){var o,r=t.param_name||"",s=n.findBlockInside({block:"input",modName:"suggest",modVal:"yes"}),a=s.getDataprovider(),c=a&&a.params&&a.params.url||"";c&&(c=i.parse(c),o=c.getParam("uri"),o=i.parse(o[0]),e?o.replaceParam(r,e):o.deleteParam(r),o=o.toString(),c.replaceParam("uri",o),a.params.url=c.toString())}))})}}),BEM.DOM.decl({block:"popup",modName:"role",modVal:"survey-alert"},{_onClick:function(){this.hide()}},{live:function(){this.liveBindTo("pointerclick",function(){this._onClick()})}}),BEM.DOM.decl("scale-question",{onSetMod:{js:function(){var t=this,e=t.findBlockInside("radiobox");e.on("change",function(){var n=e.val();t.elem("answer").val(n),n&&t.elem("answer").prop("checked",!0)})}}}),BEM.DOM.decl({block:"domik",modName:"type",modVal:"page"},{getFormBlock:function(){return this._form||(this._form=this.findBlockInside("auth")),this._form}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var n=t();return!Array.isArray(n)||(e.showError(n[0],BEM.I18N("auth",n[1])),n[0].elem("control").attr("aria-invalid",!0),!1)});return i&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),i},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),!!this._checkInput(!0)&&(this._onSubmit(t),void this.trigger("submit",t))},_onSubmit:function(t){this.disableButton(),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var n=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,n.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[-а-яА-ЯёЁA-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t);
},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,n,i){var o=i.checkEmpty,r=this;return[function(){return!o||0!==e.length||[t._username,"fill-input"]},function(){return!o||0!==n.length||[t._password,"fill-input"]},function(){return!/[а-яА-ЯёЁ]/.test(n)||[t._password,"wrong-keyboard-layout"]},function(){return!!r._isUsernameValid(e,!o)||[t._username,"wrong-characters"]},function(){return!!r._isPasswordValid(n)||[t._password,"wrong-characters"]},function(){return!n||n!==e||[t._password,"wrong-password"]}]}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),n=this;if(e)n._createSocial(e);else{var i=t.param("social-host");if(!i)return;n._getSocialProviders(i,function(t){n._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),n=this.__self._getTopWindow().location;t&&n.href!==t?n.href=t:n.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var n,i,o,r=[];return t=t.filter(function(t){return t.enabled}),i=this._buildSocialPrimary(t),r=r.concat(i),o=this._buildSocialSecondary(t),n=this._buildSocialMore(i,o,e,t),n&&r.push(n),r},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:BEM.blocks["i-common__string"].escapeHTML(t.display_name)}}})},_buildSocialMore:function(t,e,n,i){if(t.length>=i.length)return!1;var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"· · ·"},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:n}}],content:e}}]}},_getTopWindow:function(){return window.top}}),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,n){var i,o,r,s=this;if(this._onSuccess=t,this._onFailure=e,!this._hasLocalStorage())return void this.onFailure({status:"error"});if(this._cleanup(),n=$.extend({},s._getDefaultParams(),n),i=n.startUrl+"?",r=n.popupName,delete n.startUrl,delete n.popupName,o=n.display,o&&"popup"!==o&&(n.retpath=n.retnopopup||n.retpath||window.location.href,delete n.retnopopup),i+=Object.keys(n).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e])),t},[]).join("&"),o&&"popup"!==o)return void this._navigate(i);this._salt=Math.floor(1e9*Math.random()).toString(16);var a=r+"_"+this._salt;return this._lsLoginStatusKey="login_status_from_"+a,this._window=window.open(i,a,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(s._lsLoginStatusKey)}catch(t){}if(s.isClosed()&&(clearInterval(s._timer),!t))return void s.onFailure({status:"error"});if(t){var e=s._deserialize(t);s._handleStatus(e)===!1&&s.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"})},_hasLocalStorage:function(){return Boolean(window.localStorage)},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(n){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status&&(this.onFailure(t),!0)},isClosed:function(){return!this._window||this._window.closed},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,n,i){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",n,", height=",i].join("")},_getPopupParams:function(){var t,e,n=this._windowWidth,i=this._windowHeight;return window.opera?(t=(screen.availWidth-n)/2,e=(screen.availHeight-i)/2):(t=(window.innerWidth-n)/2,e=(window.innerHeight-i)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,n,i)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}}),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,n=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=n,n.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=n[e].bind(n)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var n="open"===e;this.elem("switcher").attr("aria-expanded",n),this._getButton()&&this._getButton().toggleMod("arrow","up","down",n)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);t&&!this._popup.isShown()||this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),n=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===n.ENTER||t.keyCode===n.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return!this.hasMod("disabled")&&void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){this._preventClick||this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),n.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.prvntKeys)&&t.preventDefault(),n.is(e,this.params.pressKeys)&&(this.delMod("pressed"),n.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.DOM.decl({name:"auth",modName:"iframe",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}}}},{live:function(){return this.__base.apply(this,arguments),!1},_getTopWindow:function(){return window}}),function(t){var e=1,n=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){var i="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";n=t.matchMedia(i).matches}else n=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:n})}(window),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this.updateIcon(),this.setMod(this.elem("icon"),"loaded","yes")}}},_getIconPath:function(t){var e=this.params.avatarHost,n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n;return[e,"/get-yapic/",t,i].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e=this.__self,n=e._buildTypePopup(this._uniqId,this.params.mods,this.params.js),i=$(BEMHTML.apply(n)),o=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,i),this._popup=i.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),o){var r=o.domElem;t.getUsernameBlock().val(r.find("input[name=login]").change().val()),t.getPasswordBlock().val(r.find("input[name=passwd]").change().val()),delete this.params.hidden,o.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){this._form&&(BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw())}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,n){var i=(n||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},n),mods:$.extend({type:"popup"},e),content:[i?{elem:"explain",content:i}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){return this._menu||(this._menu=!0,this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.SPACE&&this.domElem.click()})),this.__base(),!1}}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"===i)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(n){n&&n.counters&&void 0!==n.counters.unread?t.call(this,n.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,n=this.params.unreadMax;e&&n&&e>n&&(e=n+"+");var i=e?e+" ":"";BEM.DOM.update(this.domElem,i+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"internal",modVal:"yes"},{_getIconPath:function(){var t=BEM.blocks["i-global"].param("login");return"//center.yandex-team.ru/api/v1/user/"+t+"/avatar.jpg"}}),function(t){var e=function(){var t={};!function(t){!function(n,i,o){function r(){g&&_&&console.log.apply(console,arguments)}function s(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?d+t.elem:"")+(t.modName?h+t.modName+h+t.modVal:"")}function a(t){var e={};return t.split(d).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(h).forEach(function(t,n){e[i[n]]=t})}),e}function c(t){return!!t&&m.push(t)}function u(){return m.length&&m.pop()}function l(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof i.I18N&&i.I18N._proto)return i.I18N;"undefined"==typeof e&&(e={}),t=i;var h="_",d="__",p="ru",f={},m=[],g=!1,_="undefined"!=typeof console&&"function"==typeof console.log;l.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&c(this._keyset),this._keyset=s(t),this},key:function(t){return this._key=t,this},decl:function(t){var n=a(this._keyset),i="i-tanker"===n.block?"tanker":this._prj,o=n.elem||this._keyset,r=this._key;i=e[i]||(e[i]={}),o=i[o]||(i[o]={}),o[r]="function"==typeof t?t:function(e){return t};var s=f[this._lang]||(f[this._lang]={}),c=s[this._keyset]||(s[this._keyset]={});c[r]=t},val:function(t,e){var n=f[this._lang]&&f[this._lang][this._keyset],i="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!n)return r("[I18N_NO_KEYSET] %s",i),"";n=n[this._key];var o=typeof n;return"undefined"===o?(r("[I18N_NO_VALUE] %s",i),""):"string"===o?n:(e||(e=this),n.call(e,t))},_cache:function(){return f}},i.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,r=this._proto;return r.lang(this._lang).key(t),i=r.val.call(r,n,e),o=u(),o&&r.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){g=!!t},e.lang(p),e}(new l)}(this,"undefined"==typeof t?{}:t)}(t);var e=t.I18N;return e.lang("all"),e}(),n=!0;"object"==typeof exports&&(module.exports=e),"object"==typeof modules&&modules.define("i18n",function(t){t(e)}),n&&((t.BEM||(t.BEM={})).I18N=e)}("undefined"!=typeof window?window:global),function(t){var e=function(){var t={};!function(t){!function(n,i,o){function r(){g&&_&&console.log.apply(console,arguments)}function s(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?d+t.elem:"")+(t.modName?h+t.modName+h+t.modVal:"")}function a(t){var e={};return t.split(d).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(h).forEach(function(t,n){e[i[n]]=t})}),e}function c(t){return!!t&&m.push(t)}function u(){return m.length&&m.pop()}function l(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof i.I18N&&i.I18N._proto)return i.I18N;"undefined"==typeof e&&(e={}),t=i;var h="_",d="__",p="ru",f={},m=[],g=!1,_="undefined"!=typeof console&&"function"==typeof console.log;l.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&c(this._keyset),this._keyset=s(t),this},key:function(t){return this._key=t,this},decl:function(t){var n=a(this._keyset),i="i-tanker"===n.block?"tanker":this._prj,o=n.elem||this._keyset,r=this._key;i=e[i]||(e[i]={}),o=i[o]||(i[o]={}),o[r]="function"==typeof t?t:function(e){return t};var s=f[this._lang]||(f[this._lang]={}),c=s[this._keyset]||(s[this._keyset]={});c[r]=t},val:function(t,e){var n=f[this._lang]&&f[this._lang][this._keyset],i="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!n)return r("[I18N_NO_KEYSET] %s",i),"";n=n[this._key];var o=typeof n;return"undefined"===o?(r("[I18N_NO_VALUE] %s",i),""):"string"===o?n:(e||(e=this),n.call(e,t))},_cache:function(){return f}},i.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,r=this._proto;return r.lang(this._lang).key(t),i=r.val.call(r,n,e),o=u(),o&&r.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){g=!!t},e.lang(p),e}(new l)}(this,"undefined"==typeof t?{}:t)}(t);var e=t.I18N;return e.decl("attach",{"button-text":"Выбрать файл","no-file":"файл не выбран"},{lang:"ru"}),e.decl("auth",{auth:"Авторизация","fill-input":"Заполните это поле",login:"Логин",logon:"Войти",more:"Ещё",password:"Пароль",register:"Регистрация",remember:"Вспомнить пароль","social-log-in":"Войти при помощи социальной сети",temporary:"Чужой компьютер","wrong-characters":"Недопустимый ввод","wrong-keyboard-layout":"Смените раскладку","wrong-password":"Пароль не может совпадать с логином"},{lang:"ru"}),e.decl("b-page",{title:"Yandex.Forms"},{lang:"ru"}),e.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),e.decl("copyright",{link:function(t){return"ООО «"+t.content+"»"},yandex:"Яндекс"},{lang:"ru"}),e.decl("date-range-input",{from:"с",to:"по"},{lang:"ru"}),e.decl("file",{"default-error-text":"Что-то пошло не так."},{lang:"ru"}),e.decl("file-upload",{"files-limit-error":function(t){return"Можно прикрепить не более "+t.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"файла",some:"файлов",many:"файлов",none:"файлов"})},"limit-hint":function(t){return"Максимум "+t.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"файл",some:"файла",many:"файлов",none:"файлов"})+" "+this.keyset("i-tanker__dynamic").key("toggle",{condition:t.multiple,true:"общим",false:""})+" размером до "+t.size+" "+this.keyset("file-upload").key("mb",{})},mb:"МБ","size-limit-error":function(t){return"Размер загружаемых файлов превышает "+t.size+" "+this.keyset("file-upload").key("mb",{})},"upload-text":"Загрузить"},{lang:"ru"}),e.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",stat:"Статистика",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/",copyright:"Яндекс",feedback:"Обратная связь"},{lang:"ru"}),e.decl("header2",{service:"Формы"},{lang:"ru"}),e.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appsearch:"Приложения",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),e.decl("i-tanker__days",{acc1:"в понедельник",acc2:"во вторник",acc3:"в среду",acc4:"в четверг",acc5:"в пятницу",acc6:"в субботу",acc7:"в воскресенье",n1:"понедельник",n2:"вторник",n3:"среда",n4:"четверг",n5:"пятница",n6:"суббота",n7:"воскресенье",name:function(t){return function(t){return e.tanker.days[(t.short?"short":"n")+t.day]()}.call(this,t)},short1:"пн",short2:"вт",short3:"ср",short4:"чт",short5:"пт",short6:"сб",short7:"вс",today:"сегодня",tomorrow:"завтра",yesterday:"вчера"},{lang:"ru"}),e.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,n=e%10,i=e%100;return 1==n&&11!=i?t.one:n>1&&n<5&&(i<10||i>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t.true:t.false}.call(this,t)}},{lang:"ru"}),e.decl("i-tanker__months",{g1:"Января",g10:"Октября",g11:"Ноября",g12:"Декабря",g2:"Февраля",g3:"Марта",g4:"Апреля",g5:"Мая",g6:"Июня",g7:"Июля",g8:"Августа",g9:"Сентября",n1:"Январь",n10:"Октябрь",n11:"Ноябрь",n12:"Декабрь",n2:"Февраль",n3:"Март",n4:"Апрель",n5:"Май",n6:"Июнь",n7:"Июль",n8:"Август",n9:"Сентябрь",name:function(t){return function(t){var n=e.tanker.months[(t.case||"n")+t.month]();return Boolean(t.lowercase)?n.toLowerCase():n}.call(this,t)},short1:"янв",short10:"окт",short11:"ноя",short12:"дек",short2:"фев",short3:"мар",short4:"апр",short5:"май",short6:"июн",
short7:"июл",short8:"авг",short9:"сен"},{lang:"ru"}),e.decl("m-datepicker",{clear:"очистить"},{lang:"ru"}),e.decl("m-datepicker__short-days",{1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб",7:"вс"},{lang:"ru"}),e.decl("need-auth",{caution:"Требуется авторизация через аккаунт Яндекса или любой другой сервис"},{lang:"ru"}),e.decl("popup",{add:"Добавить",cancel:"Отмена",revert:"Вернуть",apply:"Применить"},{lang:"ru"}),e.decl("survey",{"attach-file":"Не приложен файл","attach-file-already-uploaded":function(t){return"Вы уже загружали файл с именем <b>"+t.file+"</b>.<br/> Если хотите его заменить, прикрепите новый файл."},"attach-file-max-file-size":function(t){return"Максимальный размер файла: <b>"+t.size+" "+this.keyset("file-upload").key("mb",{})+"</b>."},"captcha-updater":"показать другую картинку",choose:"Выбрать","choose-options":"Не выбран ни один из вариантов",confirm:"Вы не подтвердили своё согласие на передачу анкеты с вашими персональными данными","empty-field":"Это поле обязательно","error-text":"Не все обязательные поля заполнены верно.",feedback:"Форма обратной связи","feedback-button-text":"Оправить отзыв","file-too-large":"Файл слишком большой","incorrect-date":"Неверная дата","invalid-email":"Введён некорректный email","no-options":"Для этого поля нет данных, но оно обязательно для заполнения.",registration:"Регистрация","registration-button-text":"Зарегистрироваться","save-changes":"Сохранить изменения",simple_form:"","simple_form-button-text":"Отправить","success-simple_form":"Ваша заявка принята!",sum:"Сумма"},{lang:"ru"}),e.decl("user",{enter:"Войти",exit:"Выйти",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},letter_compose:"Написать письмо",passport:"Паспорт",tune:"Настройка",upload_files:"Мой Диск"},{lang:"ru"}),e.lang("ru"),e}(),n=!0;"object"==typeof exports&&(module.exports=e),"object"==typeof modules&&modules.define("i18n",function(t){t(e)}),n&&((t.BEM||(t.BEM={})).I18N=e)}("undefined"!=typeof window?window:global);